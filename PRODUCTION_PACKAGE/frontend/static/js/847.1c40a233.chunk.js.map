{"version":3,"file":"static/js/847.1c40a233.chunk.js","mappings":"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","sources":["services/market/marketService.js","components/simulation/TradingInterface.jsx","components/simulation/SimulationPortfolioChart.jsx","components/simulation/TransactionHistory.jsx","pages/SimulationPage.jsx","hooks/useAlphaVantageData.js"],"sourcesContent":["/**\n * Alpha Vantage Market Data Service\n * Provides real-time stock market data integration for InvestX Labs\n */\n\nconst ALPHA_VANTAGE_BASE_URL = process.env.REACT_APP_ALPHA_VANTAGE_BASE_URL || 'https://www.alphavantage.co/query';\nconst API_KEY = process.env.REACT_APP_ALPHA_VANTAGE_API_KEY;\n\n// Cache for API responses to avoid excessive calls\nconst priceCache = new Map();\nconst CACHE_DURATION = 60000; // 1 minute cache\n\n// LocalStorage cache key\nconst STORAGE_CACHE_KEY = 'investx_market_cache';\nconst STORAGE_CACHE_DURATION = 300000; // 5 minutes for localStorage cache\n\n/**\n * Get current stock quote from Alpha Vantage\n * @param {string} symbol - Stock symbol (e.g., 'AAPL')\n * @returns {Promise<Object|null>} Quote data or null on failure\n */\nexport const getQuote = async (symbol) => {\n  console.log('üìà [MarketService] getQuote() called for symbol:', symbol);\n  \n  if (!symbol) {\n    console.warn('üìà [MarketService] ‚ùå No symbol provided');\n    return null;\n  }\n\n  if (!API_KEY) {\n    console.warn('üìà [MarketService] ‚ùå Alpha Vantage API key not found in environment variables');\n    return null;\n  }\n\n  // Check in-memory cache first\n  const cacheKey = symbol.toUpperCase();\n  const cached = priceCache.get(cacheKey);\n  const cacheAge = cached ? Date.now() - cached.timestamp : null;\n  \n  if (cached && cacheAge < CACHE_DURATION) {\n    console.log('üìà [MarketService] üéØ Cache HIT for', symbol, '- age:', Math.round(cacheAge / 1000), 'seconds');\n    return cached.data;\n  } else if (cached) {\n    console.log('üìà [MarketService] ‚è∞ Cache MISS for', symbol, '- stale data, age:', Math.round(cacheAge / 1000), 'seconds');\n  } else {\n    console.log('üìà [MarketService] üÜï Cache MISS for', symbol, '- no cached data');\n  }\n\n  // Check localStorage cache as fallback\n  try {\n    const storedCache = localStorage.getItem(STORAGE_CACHE_KEY);\n    if (storedCache) {\n      const cacheData = JSON.parse(storedCache);\n      const cachedQuote = cacheData[cacheKey];\n      if (cachedQuote && (Date.now() - cachedQuote.timestamp) < STORAGE_CACHE_DURATION) {\n        console.log('üìà [MarketService] üíæ localStorage Cache HIT for', symbol);\n        // Restore to in-memory cache\n        priceCache.set(cacheKey, cachedQuote);\n        return cachedQuote.data;\n      }\n    }\n  } catch (storageError) {\n    console.warn('üìà [MarketService] Error reading localStorage cache:', storageError);\n  }\n\n  try {\n    const url = `${ALPHA_VANTAGE_BASE_URL}?function=GLOBAL_QUOTE&symbol=${encodeURIComponent(symbol)}&apikey=${API_KEY}`;\n    \n    console.log('üìà [MarketService] üåê Sending API request to Alpha Vantage:', url.replace(API_KEY, 'API_KEY_HIDDEN'));\n    \n    const response = await fetch(url);\n    if (!response.ok) {\n      throw new Error(`HTTP error! status: ${response.status}`);\n    }\n\n    const data = await response.json();\n    \n    console.log('üìà [MarketService] üì• Raw API response received for', symbol, ':', Object.keys(data));\n    \n    // Check for API errors\n    if (data['Error Message']) {\n      console.error('üìà [MarketService] ‚ùå Alpha Vantage API Error:', data['Error Message']);\n      return null;\n    }\n\n    if (data['Note']) {\n      console.warn('üìà [MarketService] ‚ö†Ô∏è Alpha Vantage API Note (rate limit):', data['Note']);\n      return null;\n    }\n\n    const quote = data['Global Quote'];\n    if (!quote) {\n      console.error('üìà [MarketService] ‚ùå No quote data found for symbol:', symbol);\n      return null;\n    }\n    \n    console.log('üìà [MarketService] üìä Raw quote data for', symbol, ':', quote);\n\n    // Transform the response to a more usable format\n    const transformedQuote = {\n      symbol: quote['01. symbol'],\n      open: parseFloat(quote['02. open']) || 0,\n      high: parseFloat(quote['03. high']) || 0,\n      low: parseFloat(quote['04. low']) || 0,\n      price: parseFloat(quote['05. price']) || 0,\n      volume: parseInt(quote['06. volume']) || 0,\n      latestTradingDay: quote['07. latest trading day'],\n      previousClose: parseFloat(quote['08. previous close']) || 0,\n      change: parseFloat(quote['09. change']) || 0,\n      changePercent: parseFloat(quote['10. change percent']?.replace('%', '')) || 0\n    };\n    \n    console.log('üìà [MarketService] ‚úÖ Transformed quote for', symbol, ':', {\n      price: transformedQuote.price,\n      change: transformedQuote.change,\n      changePercent: transformedQuote.changePercent,\n      previousClose: transformedQuote.previousClose\n    });\n\n    // Cache the result in memory\n    const cacheEntry = {\n      data: transformedQuote,\n      timestamp: Date.now()\n    };\n    priceCache.set(cacheKey, cacheEntry);\n    \n    // Also cache in localStorage\n    try {\n      const storedCache = localStorage.getItem(STORAGE_CACHE_KEY);\n      const cacheData = storedCache ? JSON.parse(storedCache) : {};\n      cacheData[cacheKey] = cacheEntry;\n      // Keep only last 50 entries to avoid storage bloat\n      const keys = Object.keys(cacheData);\n      if (keys.length > 50) {\n        // Remove oldest entries\n        const sortedKeys = keys.sort((a, b) => (cacheData[a].timestamp || 0) - (cacheData[b].timestamp || 0));\n        sortedKeys.slice(0, keys.length - 50).forEach(key => delete cacheData[key]);\n      }\n      localStorage.setItem(STORAGE_CACHE_KEY, JSON.stringify(cacheData));\n    } catch (storageError) {\n      console.warn('üìà [MarketService] Error writing to localStorage cache:', storageError);\n    }\n    \n    console.log('üìà [MarketService] üíæ Cached quote for', symbol, '- cache size:', priceCache.size);\n\n    return transformedQuote;\n  } catch (error) {\n    console.error('üìà [MarketService] ‚ùå Error fetching quote for', symbol, ':', error);\n    \n    // Try to return cached data as fallback (in-memory first)\n    const cached = priceCache.get(cacheKey);\n    if (cached) {\n      console.log('üìà [MarketService] üîÑ Returning stale in-memory cached data as fallback for', symbol);\n      return cached.data;\n    }\n    \n    // Try localStorage cache as last resort\n    try {\n      const storedCache = localStorage.getItem(STORAGE_CACHE_KEY);\n      if (storedCache) {\n        const cacheData = JSON.parse(storedCache);\n        const cachedQuote = cacheData[cacheKey];\n        if (cachedQuote) {\n          console.log('üìà [MarketService] üîÑ Returning stale localStorage cached data as fallback for', symbol, '(may be outdated)');\n          // Add warning that data may be stale\n          return {\n            ...cachedQuote.data,\n            _stale: true,\n            _staleWarning: 'Market data may be outdated. Please refresh.'\n          };\n        }\n      }\n    } catch (storageError) {\n      console.warn('üìà [MarketService] Error reading localStorage cache on error fallback:', storageError);\n    }\n    \n    return null;\n  }\n};\n\n/**\n * Get multiple stock quotes efficiently\n * @param {string[]} symbols - Array of stock symbols\n * @returns {Promise<Object>} Object with symbol as key and quote data as value\n */\nexport const getMultipleQuotes = async (symbols) => {\n  console.log('üìà [MarketService] getMultipleQuotes() called for', symbols.length, 'symbols:', symbols);\n  \n  if (!symbols || symbols.length === 0) {\n    console.log('üìà [MarketService] ‚ö†Ô∏è No symbols provided to getMultipleQuotes');\n    return {};\n  }\n\n  // Limit concurrent requests to respect API rate limits\n  const BATCH_SIZE = 5; // Alpha Vantage free tier: 5 calls per minute\n  const results = {};\n  \n  console.log('üìà [MarketService] üîÑ Processing', symbols.length, 'symbols in batches of', BATCH_SIZE);\n  \n  for (let i = 0; i < symbols.length; i += BATCH_SIZE) {\n    const batch = symbols.slice(i, i + BATCH_SIZE);\n    const batchNumber = Math.floor(i / BATCH_SIZE) + 1;\n    const totalBatches = Math.ceil(symbols.length / BATCH_SIZE);\n    \n    console.log('üìà [MarketService] üì¶ Processing batch', batchNumber, 'of', totalBatches, ':', batch);\n    \n    try {\n      const promises = batch.map(symbol => getQuote(symbol));\n      const batchResults = await Promise.all(promises);\n      \n      console.log('üìà [MarketService] ‚úÖ Batch', batchNumber, 'completed - received', batchResults.filter(r => r !== null).length, 'valid quotes');\n      \n      batch.forEach((symbol, index) => {\n        results[symbol] = batchResults[index];\n      });\n\n      // Add delay between batches to respect rate limits\n      if (i + BATCH_SIZE < symbols.length) {\n        console.log('üìà [MarketService] ‚è≥ Waiting 12 seconds before next batch to respect rate limits...');\n        await new Promise(resolve => setTimeout(resolve, 12000)); // 12 second delay\n        console.log('üìà [MarketService] ‚è∞ Delay complete, proceeding to next batch');\n      }\n    } catch (error) {\n      console.error('üìà [MarketService] ‚ùå Error fetching batch', batchNumber, ':', error);\n      // Continue with remaining batches\n    }\n  }\n  \n  const successCount = Object.values(results).filter(r => r !== null).length;\n  console.log('üìà [MarketService] üéØ getMultipleQuotes completed:', successCount, 'successful out of', symbols.length, 'requested');\n\n  return results;\n};\n\n/**\n * Calculate portfolio metrics with live market data\n * @param {Array} holdings - User's portfolio holdings\n * @param {Object} marketData - Market data from getMultipleQuotes\n * @returns {Object} Calculated portfolio metrics\n */\nexport const calculateLivePortfolioMetrics = (holdings, marketData) => {\n  if (!holdings || holdings.length === 0) {\n    return {\n      totalValue: 0,\n      totalCostBasis: 0,\n      totalGainLoss: 0,\n      totalGainLossPercentage: 0,\n      dayChange: 0,\n      dayChangePercentage: 0,\n      holdings: []\n    };\n  }\n\n  let totalValue = 0;\n  let totalCostBasis = 0;\n  let totalDayChange = 0;\n\n  const enrichedHoldings = holdings.map(holding => {\n    const quote = marketData[holding.symbol];\n    const currentPrice = quote?.price || holding.purchasePrice || 0;\n    const previousClose = quote?.previousClose || holding.purchasePrice || 0;\n    \n    const value = holding.shares * currentPrice;\n    const costBasis = holding.shares * holding.purchasePrice;\n    const gainLoss = value - costBasis;\n    const gainLossPercentage = costBasis > 0 ? (gainLoss / costBasis) * 100 : 0;\n    \n    const dayChange = holding.shares * (currentPrice - previousClose);\n    const dayChangePercentage = previousClose > 0 ? ((currentPrice - previousClose) / previousClose) * 100 : 0;\n\n    totalValue += value;\n    totalCostBasis += costBasis;\n    totalDayChange += dayChange;\n\n    return {\n      ...holding,\n      currentPrice,\n      previousClose,\n      value,\n      gainLoss,\n      gainLossPercentage,\n      dayChange,\n      dayChangePercentage,\n      lastUpdated: new Date().toISOString()\n    };\n  });\n\n  const totalGainLoss = totalValue - totalCostBasis;\n  const totalGainLossPercentage = totalCostBasis > 0 ? (totalGainLoss / totalCostBasis) * 100 : 0;\n  const dayChangePercentage = (totalValue - totalDayChange) > 0 ? (totalDayChange / (totalValue - totalDayChange)) * 100 : 0;\n\n  return {\n    totalValue,\n    totalCostBasis,\n    totalGainLoss,\n    totalGainLossPercentage,\n    dayChange: totalDayChange,\n    dayChangePercentage,\n    holdings: enrichedHoldings,\n    lastUpdated: new Date().toISOString()\n  };\n};\n\n/**\n * Clear the price cache (useful for testing or manual refresh)\n */\nexport const clearPriceCache = () => {\n  priceCache.clear();\n};\n\n/**\n * Get cache statistics\n */\nexport const getCacheStats = () => {\n  return {\n    size: priceCache.size,\n    entries: Array.from(priceCache.keys())\n  };\n};\n","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useSimulation } from '../../contexts/SimulationContext';\nimport { getQuote } from '../../services/market/marketService';\nimport GlassCard from '../ui/GlassCard';\nimport GlassButton from '../ui/GlassButton';\n\nconst TradingInterface = ({ virtualBalance, holdings }) => {\n  const { buyStock, sellStock, loading } = useSimulation();\n  \n  const [symbol, setSymbol] = useState('');\n  const [shares, setShares] = useState('');\n  const [tradeType, setTradeType] = useState('buy');\n  const [currentPrice, setCurrentPrice] = useState(null);\n  const [searching, setSearching] = useState(false);\n  const [message, setMessage] = useState(null);\n  const [aiCoaching, setAiCoaching] = useState(null);\n\n  /**\n   * Search for stock\n   */\n  const handleSearch = async () => {\n    if (!symbol) return;\n\n    setSearching(true);\n    setMessage(null);\n    setCurrentPrice(null);\n\n    try {\n      const quote = await getQuote(symbol.toUpperCase());\n      \n      if (quote && quote.price) {\n        setCurrentPrice(quote.price);\n        generateAICoaching(symbol.toUpperCase(), quote.price);\n      } else {\n        setMessage({ type: 'error', text: 'Stock not found. Please check the symbol and try again.' });\n      }\n    } catch (error) {\n      console.error('Error fetching quote:', error);\n      setMessage({ type: 'error', text: 'Failed to fetch stock data. Please try again.' });\n    } finally {\n      setSearching(false);\n    }\n  };\n\n  /**\n   * Generate AI coaching\n   */\n  const generateAICoaching = (stockSymbol, price) => {\n    // Educational coaching based on context\n    const holding = holdings.find(h => h.symbol === stockSymbol);\n    \n    if (tradeType === 'buy') {\n      if (holding) {\n        setAiCoaching({\n          type: 'info',\n          text: `üìö You already own ${holding.shares} shares of ${stockSymbol}. Consider: Is this adding to your diversification or over-concentrating your portfolio?`\n        });\n      } else {\n        setAiCoaching({\n          type: 'success',\n          text: `üí° This would be a new position. Remember to research the company's fundamentals, industry trends, and consider how it fits your overall portfolio strategy.`\n        });\n      }\n    } else {\n      if (holding) {\n        const gainLoss = (price - holding.purchase_price) * shares;\n        const gainLossPercent = ((price - holding.purchase_price) / holding.purchase_price) * 100;\n        \n        if (gainLoss > 0) {\n          setAiCoaching({\n            type: 'success',\n            text: `üìà This trade would result in a ${gainLossPercent.toFixed(2)}% gain! Remember: realizing profits is part of good portfolio management, but also consider tax implications and long-term goals.`\n          });\n        } else {\n          setAiCoaching({\n            type: 'warning',\n            text: `üìâ This trade would result in a ${Math.abs(gainLossPercent).toFixed(2)}% loss. Consider: Is this a strategic decision to cut losses, or could holding longer align with your investment thesis?`\n          });\n        }\n      }\n    }\n  };\n\n  /**\n   * Execute trade\n   */\n  const handleTrade = async () => {\n    if (!symbol || !shares || !currentPrice) {\n      setMessage({ type: 'error', text: 'Please fill in all fields and search for a stock first.' });\n      return;\n    }\n\n    const numShares = parseFloat(shares);\n    if (isNaN(numShares) || numShares <= 0) {\n      setMessage({ type: 'error', text: 'Please enter a valid number of shares.' });\n      return;\n    }\n\n    setMessage(null);\n\n    try {\n      let result;\n      if (tradeType === 'buy') {\n        result = await buyStock(symbol.toUpperCase(), numShares, currentPrice);\n      } else {\n        result = await sellStock(symbol.toUpperCase(), numShares, currentPrice);\n      }\n\n      if (result.success) {\n        setMessage({ \n          type: 'success', \n          text: `‚úÖ Successfully ${tradeType === 'buy' ? 'bought' : 'sold'} ${numShares} shares of ${symbol.toUpperCase()}!` \n        });\n        \n        // Reset form\n        setSymbol('');\n        setShares('');\n        setCurrentPrice(null);\n        setAiCoaching(null);\n      } else {\n        setMessage({ type: 'error', text: result.error || 'Trade failed. Please try again.' });\n      }\n    } catch (error) {\n      console.error('Trade error:', error);\n      setMessage({ type: 'error', text: 'An error occurred. Please try again.' });\n    }\n  };\n\n  // Calculate trade cost\n  const totalCost = currentPrice && shares ? (parseFloat(shares) * currentPrice * (tradeType === 'buy' ? 1.001 : 0.999)).toFixed(2) : 0;\n  const canAfford = tradeType === 'buy' ? parseFloat(totalCost) <= virtualBalance : true;\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n      {/* Trading Form */}\n      <GlassCard variant=\"floating\" padding=\"large\">\n        <h3 className=\"text-2xl font-semibold text-white mb-6\">\n          {tradeType === 'buy' ? 'üìà Buy Stock' : 'üìâ Sell Stock'}\n        </h3>\n\n        {/* Trade Type Toggle */}\n        <div className=\"flex space-x-2 mb-6 bg-white/5 rounded-lg p-1\">\n          <button\n            onClick={() => {\n              setTradeType('buy');\n              setAiCoaching(null);\n            }}\n            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\n              tradeType === 'buy'\n                ? 'bg-green-500/30 text-green-300'\n                : 'text-white/60 hover:text-white'\n            }`}\n          >\n            Buy\n          </button>\n          <button\n            onClick={() => {\n              setTradeType('sell');\n              setAiCoaching(null);\n            }}\n            className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\n              tradeType === 'sell'\n                ? 'bg-red-500/30 text-red-300'\n                : 'text-white/60 hover:text-white'\n            }`}\n          >\n            Sell\n          </button>\n        </div>\n\n        {/* Stock Symbol */}\n        <div className=\"mb-4\">\n          <label className=\"block text-white/70 text-sm mb-2\">Stock Symbol</label>\n          <div className=\"flex space-x-2\">\n            <input\n              type=\"text\"\n              placeholder=\"e.g., AAPL\"\n              value={symbol}\n              onChange={(e) => setSymbol(e.target.value.toUpperCase())}\n              className=\"flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-white/40\"\n              onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n            />\n            <GlassButton\n              variant=\"primary\"\n              size=\"medium\"\n              onClick={handleSearch}\n              disabled={searching || !symbol}\n            >\n              {searching ? '...' : 'Search'}\n            </GlassButton>\n          </div>\n        </div>\n\n        {/* Current Price Display */}\n        {currentPrice && (\n          <motion.div\n            initial={{ opacity: 0, y: -10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mb-4 bg-blue-500/20 border border-blue-400/30 rounded-lg p-4\"\n          >\n            <p className=\"text-white/70 text-sm mb-1\">Current Price</p>\n            <p className=\"text-white text-3xl font-bold\">${currentPrice.toFixed(2)}</p>\n          </motion.div>\n        )}\n\n        {/* Number of Shares */}\n        <div className=\"mb-4\">\n          <label className=\"block text-white/70 text-sm mb-2\">Number of Shares</label>\n          <input\n            type=\"number\"\n            placeholder=\"e.g., 10\"\n            value={shares}\n            onChange={(e) => setShares(e.target.value)}\n            min=\"0.01\"\n            step=\"0.01\"\n            className=\"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-white/40\"\n          />\n        </div>\n\n        {/* Trade Summary */}\n        {currentPrice && shares && (\n          <div className=\"mb-6 bg-white/5 rounded-lg p-4 space-y-2\">\n            <div className=\"flex justify-between text-white/70\">\n              <span>Shares:</span>\n              <span>{shares}</span>\n            </div>\n            <div className=\"flex justify-between text-white/70\">\n              <span>Price per share:</span>\n              <span>${currentPrice.toFixed(2)}</span>\n            </div>\n            <div className=\"flex justify-between text-white/70\">\n              <span>Trading fee (0.1%):</span>\n              <span>${(parseFloat(shares) * currentPrice * 0.001).toFixed(2)}</span>\n            </div>\n            <div className=\"border-t border-white/20 pt-2 flex justify-between text-white font-semibold text-lg\">\n              <span>Total:</span>\n              <span className={tradeType === 'buy' ? 'text-red-400' : 'text-green-400'}>\n                {tradeType === 'buy' ? '-' : '+'}${totalCost}\n              </span>\n            </div>\n            {tradeType === 'buy' && !canAfford && (\n              <p className=\"text-red-400 text-sm mt-2\">\n                ‚ö†Ô∏è Insufficient funds. You need ${(parseFloat(totalCost) - virtualBalance).toFixed(2)} more.\n              </p>\n            )}\n          </div>\n        )}\n\n        {/* Trade Button */}\n        <GlassButton\n          variant={tradeType === 'buy' ? 'primary' : 'danger'}\n          size=\"large\"\n          onClick={handleTrade}\n          disabled={loading || !currentPrice || !shares || !canAfford}\n          className=\"w-full\"\n        >\n          {loading ? 'Processing...' : tradeType === 'buy' ? 'Buy Now' : 'Sell Now'}\n        </GlassButton>\n\n        {/* Message */}\n        {message && (\n          <motion.div\n            initial={{ opacity: 0, y: 10 }}\n            animate={{ opacity: 1, y: 0 }}\n            className={`mt-4 p-4 rounded-lg ${\n              message.type === 'success' \n                ? 'bg-green-500/20 border border-green-400/30' \n                : 'bg-red-500/20 border border-red-400/30'\n            }`}\n          >\n            <p className=\"text-white text-sm\">{message.text}</p>\n          </motion.div>\n        )}\n      </GlassCard>\n\n      {/* AI Coaching & Info */}\n      <div className=\"space-y-6\">\n        {/* AI Coaching */}\n        {aiCoaching && (\n          <motion.div\n            initial={{ opacity: 0, x: 20 }}\n            animate={{ opacity: 1, x: 0 }}\n          >\n            <GlassCard variant=\"floating\" padding=\"large\" className={\n              aiCoaching.type === 'success' ? 'bg-green-500/10 border-green-400/20' :\n              aiCoaching.type === 'warning' ? 'bg-yellow-500/10 border-yellow-400/20' :\n              'bg-blue-500/10 border-blue-400/20'\n            }>\n              <div className=\"flex items-start space-x-3\">\n                <span className=\"text-3xl\">ü§ñ</span>\n                <div>\n                  <h4 className=\"text-white font-semibold mb-2\">AI Trading Coach</h4>\n                  <p className=\"text-white/80 text-sm\">{aiCoaching.text}</p>\n                </div>\n              </div>\n            </GlassCard>\n          </motion.div>\n        )}\n\n        {/* Educational Tips */}\n        <GlassCard variant=\"floating\" padding=\"large\">\n          <h4 className=\"text-white font-semibold mb-4 flex items-center\">\n            <span className=\"text-2xl mr-2\">üí°</span>\n            Trading Tips\n          </h4>\n          <div className=\"space-y-3 text-white/70 text-sm\">\n            <div className=\"flex items-start space-x-2\">\n              <span className=\"text-green-400\">‚Ä¢</span>\n              <p>Always research a company before buying its stock</p>\n            </div>\n            <div className=\"flex items-start space-x-2\">\n              <span className=\"text-green-400\">‚Ä¢</span>\n              <p>Diversify across different sectors to reduce risk</p>\n            </div>\n            <div className=\"flex items-start space-x-2\">\n              <span className=\"text-green-400\">‚Ä¢</span>\n              <p>Consider long-term trends rather than short-term fluctuations</p>\n            </div>\n            <div className=\"flex items-start space-x-2\">\n              <span className=\"text-green-400\">‚Ä¢</span>\n              <p>Don't invest more than you can afford to lose</p>\n            </div>\n            <div className=\"flex items-start space-x-2\">\n              <span className=\"text-green-400\">‚Ä¢</span>\n              <p>Keep emotions in check - stick to your strategy</p>\n            </div>\n          </div>\n        </GlassCard>\n\n        {/* Popular Stocks */}\n        <GlassCard variant=\"floating\" padding=\"large\">\n          <h4 className=\"text-white font-semibold mb-4\">Popular Stocks</h4>\n          <div className=\"grid grid-cols-2 gap-2\">\n            {['AAPL', 'MSFT', 'GOOGL', 'AMZN', 'TSLA', 'META'].map((stock) => (\n              <button\n                key={stock}\n                onClick={() => {\n                  setSymbol(stock);\n                  handleSearch();\n                }}\n                className=\"bg-white/10 hover:bg-white/20 rounded-lg px-4 py-2 text-white transition-colors\"\n              >\n                {stock}\n              </button>\n            ))}\n          </div>\n        </GlassCard>\n      </div>\n    </div>\n  );\n};\n\nexport default TradingInterface;\n\n","import React from 'react';\nimport { PieChart, Pie, Cell, ResponsiveContainer, Legend, Tooltip } from 'recharts';\nimport GlassCard from '../ui/GlassCard';\n\nconst SimulationPortfolioChart = ({ holdings, portfolioMetrics, marketData }) => {\n  if (!holdings || holdings.length === 0) {\n    return (\n      <GlassCard variant=\"floating\" padding=\"large\">\n        <h3 className=\"text-xl font-semibold text-white mb-4\">Portfolio Allocation</h3>\n        <div className=\"text-center py-12\">\n          <p className=\"text-white/60\">No holdings to display</p>\n        </div>\n      </GlassCard>\n    );\n  }\n\n  // Calculate allocation data\n  const allocationData = holdings.map(holding => {\n    const currentPrice = marketData?.[holding.symbol]?.price || holding.current_price || holding.purchase_price;\n    const value = holding.shares * currentPrice;\n    \n    return {\n      name: holding.symbol,\n      value: value,\n      shares: holding.shares\n    };\n  });\n\n  const COLORS = ['#3b82f6', '#10b981', '#f59e0b', '#ef4444', '#8b5cf6', '#ec4899', '#14b8a6', '#f97316'];\n\n  return (\n    <GlassCard variant=\"floating\" padding=\"large\">\n      <h3 className=\"text-xl font-semibold text-white mb-6\">Portfolio Allocation</h3>\n      \n      <div className=\"h-80\">\n        <ResponsiveContainer width=\"100%\" height=\"100%\">\n          <PieChart>\n            <Pie\n              data={allocationData}\n              cx=\"50%\"\n              cy=\"50%\"\n              labelLine={false}\n              label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n              outerRadius={80}\n              fill=\"#8884d8\"\n              dataKey=\"value\"\n            >\n              {allocationData.map((entry, index) => (\n                <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n              ))}\n            </Pie>\n            <Tooltip \n              contentStyle={{ \n                background: 'rgba(0, 0, 0, 0.8)', \n                border: '1px solid rgba(255, 255, 255, 0.2)',\n                borderRadius: '8px',\n                color: '#fff'\n              }}\n              formatter={(value) => `$${value.toFixed(2)}`}\n            />\n            <Legend \n              wrapperStyle={{ color: '#fff' }}\n              formatter={(value, entry) => `${value}: ${entry.payload.shares.toFixed(2)} shares`}\n            />\n          </PieChart>\n        </ResponsiveContainer>\n      </div>\n    </GlassCard>\n  );\n};\n\nexport default SimulationPortfolioChart;\n\n","import React from 'react';\nimport { motion } from 'framer-motion';\nimport GlassCard from '../ui/GlassCard';\n\nconst TransactionHistory = ({ transactions }) => {\n  if (!transactions || transactions.length === 0) {\n    return (\n      <GlassCard variant=\"floating\" padding=\"large\">\n        <h3 className=\"text-xl font-semibold text-white mb-4\">Transaction History</h3>\n        <div className=\"text-center py-12\">\n          <p className=\"text-white/60 text-lg mb-2\">No transactions yet</p>\n          <p className=\"text-white/40 text-sm\">Your trading history will appear here</p>\n        </div>\n      </GlassCard>\n    );\n  }\n\n  return (\n    <GlassCard variant=\"floating\" padding=\"large\">\n      <h3 className=\"text-xl font-semibold text-white mb-6\">Transaction History</h3>\n      \n      <div className=\"space-y-3\">\n        {transactions.map((transaction, index) => (\n          <motion.div\n            key={transaction.id}\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            transition={{ delay: index * 0.05 }}\n            className=\"bg-white/10 rounded-lg p-4 hover:bg-white/15 transition-colors\"\n          >\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-4\">\n                <div className={`w-10 h-10 rounded-full flex items-center justify-center ${\n                  transaction.transaction_type === 'buy' \n                    ? 'bg-green-500/20 text-green-400' \n                    : 'bg-red-500/20 text-red-400'\n                }`}>\n                  {transaction.transaction_type === 'buy' ? '‚Üë' : '‚Üì'}\n                </div>\n                <div>\n                  <p className=\"text-white font-semibold\">\n                    {transaction.transaction_type === 'buy' ? 'Bought' : 'Sold'} {transaction.symbol}\n                  </p>\n                  <p className=\"text-white/60 text-sm\">\n                    {transaction.shares} shares @ ${transaction.price?.toFixed(2)}\n                  </p>\n                  <p className=\"text-white/40 text-xs\">\n                    {new Date(transaction.transaction_date).toLocaleString()}\n                  </p>\n                </div>\n              </div>\n              <div className=\"text-right\">\n                <p className={`font-semibold ${\n                  transaction.transaction_type === 'buy' ? 'text-red-400' : 'text-green-400'\n                }`}>\n                  {transaction.transaction_type === 'buy' ? '-' : '+'}\n                  ${Math.abs(transaction.total_amount).toFixed(2)}\n                </p>\n                {transaction.fees > 0 && (\n                  <p className=\"text-white/40 text-xs\">\n                    Fee: ${transaction.fees.toFixed(2)}\n                  </p>\n                )}\n              </div>\n            </div>\n          </motion.div>\n        ))}\n      </div>\n    </GlassCard>\n  );\n};\n\nexport default TransactionHistory;\n\n","import React, { useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { useSimulation } from '../contexts/SimulationContext';\nimport { useAlphaVantageData } from '../hooks/useAlphaVantageData';\nimport GlassCard from '../components/ui/GlassCard';\nimport GlassButton from '../components/ui/GlassButton';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\nimport TradingInterface from '../components/simulation/TradingInterface';\nimport SimulationPortfolioChart from '../components/simulation/SimulationPortfolioChart';\nimport TransactionHistory from '../components/simulation/TransactionHistory';\n\nconst SimulationPage = () => {\n  const { \n    portfolio, \n    virtualBalance, \n    holdings, \n    transactions, \n    loading, \n    error,\n    resetSimulation \n  } = useSimulation();\n\n  const { \n    portfolioMetrics, \n    marketData \n  } = useAlphaVantageData(holdings || []);\n\n  const [activeTab, setActiveTab] = useState('trade');\n  const [showResetConfirm, setShowResetConfirm] = useState(false);\n\n  const fadeIn = {\n    hidden: { opacity: 0, y: 16 },\n    visible: { opacity: 1, y: 0, transition: { duration: 0.6, ease: 'easeOut' } }\n  };\n\n  // Calculate portfolio value\n  const portfolioValue = portfolioMetrics?.totalValue || 0;\n  const totalInvested = portfolioValue + virtualBalance - 10000;\n  const totalReturn = totalInvested - 10000;\n  const totalReturnPercent = totalInvested > 0 ? (totalReturn / 10000) * 100 : 0;\n\n  if (loading && !portfolio) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center\">\n        <LoadingSpinner size=\"large\" />\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 py-4 lg:py-6\">\n      <div className=\"w-full max-w-[1920px] mx-auto px-3 lg:px-4 xl:px-6\">\n        {/* Header */}\n        <motion.div\n          variants={fadeIn}\n          initial=\"hidden\"\n          animate=\"visible\"\n          className=\"mb-4 lg:mb-6\"\n        >\n          <div className=\"flex items-center justify-between mb-3\">\n            <div>\n              <h1 className=\"text-3xl md:text-4xl font-bold text-white mb-2\">\n                üéÆ Simulation Mode\n              </h1>\n              <p className=\"text-white/70\">\n                Practice trading with $10,000 virtual money\n              </p>\n            </div>\n            <GlassButton\n              variant=\"secondary\"\n              size=\"small\"\n              onClick={() => setShowResetConfirm(true)}\n            >\n              Reset Simulation\n            </GlassButton>\n          </div>\n\n          {/* Quick Stats */}\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6\">\n            <GlassCard variant=\"floating\" padding=\"medium\">\n              <p className=\"text-white/70 text-sm mb-1\">Virtual Cash</p>\n              <p className=\"text-white text-2xl font-bold\">\n                ${virtualBalance.toFixed(2)}\n              </p>\n            </GlassCard>\n\n            <GlassCard variant=\"floating\" padding=\"medium\">\n              <p className=\"text-white/70 text-sm mb-1\">Portfolio Value</p>\n              <p className=\"text-white text-2xl font-bold\">\n                ${portfolioValue.toFixed(2)}\n              </p>\n            </GlassCard>\n\n            <GlassCard variant=\"floating\" padding=\"medium\">\n              <p className=\"text-white/70 text-sm mb-1\">Total Return</p>\n              <p className={`text-2xl font-bold ${totalReturn >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                {totalReturn >= 0 ? '+' : ''}${totalReturn.toFixed(2)}\n              </p>\n            </GlassCard>\n\n            <GlassCard variant=\"floating\" padding=\"medium\">\n              <p className=\"text-white/70 text-sm mb-1\">Return %</p>\n              <p className={`text-2xl font-bold ${totalReturnPercent >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                {totalReturnPercent >= 0 ? '+' : ''}{totalReturnPercent.toFixed(2)}%\n              </p>\n            </GlassCard>\n          </div>\n        </motion.div>\n\n        {/* Educational Notice */}\n        <motion.div\n          variants={fadeIn}\n          initial=\"hidden\"\n          animate=\"visible\"\n          className=\"mb-6\"\n        >\n          <GlassCard variant=\"solid\" padding=\"medium\" className=\"bg-blue-500/20 border-blue-400/30\">\n            <div className=\"flex items-start space-x-3\">\n              <span className=\"text-2xl\">üí°</span>\n              <div>\n                <p className=\"text-white font-medium mb-1\">Educational Simulation</p>\n                <p className=\"text-white/80 text-sm\">\n                  This is a learning environment using real market data but virtual money. \n                  All trades are simulated and no real money is involved. Use this to practice \n                  strategies before investing real money.\n                </p>\n              </div>\n            </div>\n          </GlassCard>\n        </motion.div>\n\n        {/* Tabs */}\n        <motion.div\n          variants={fadeIn}\n          initial=\"hidden\"\n          animate=\"visible\"\n          className=\"mb-6\"\n        >\n          <div className=\"flex space-x-2 bg-white/5 rounded-lg p-1\">\n            <button\n              onClick={() => setActiveTab('trade')}\n              className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\n                activeTab === 'trade'\n                  ? 'bg-white/20 text-white'\n                  : 'text-white/60 hover:text-white'\n              }`}\n            >\n              üìà Trade\n            </button>\n            <button\n              onClick={() => setActiveTab('portfolio')}\n              className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\n                activeTab === 'portfolio'\n                  ? 'bg-white/20 text-white'\n                  : 'text-white/60 hover:text-white'\n              }`}\n            >\n              üíº Portfolio\n            </button>\n            <button\n              onClick={() => setActiveTab('history')}\n              className={`flex-1 px-4 py-2 rounded-lg font-medium transition-all ${\n                activeTab === 'history'\n                  ? 'bg-white/20 text-white'\n                  : 'text-white/60 hover:text-white'\n              }`}\n            >\n              üìã History\n            </button>\n          </div>\n        </motion.div>\n\n        {/* Tab Content */}\n        <motion.div\n          key={activeTab}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          exit={{ opacity: 0, y: -20 }}\n          transition={{ duration: 0.3 }}\n        >\n          {activeTab === 'trade' && (\n            <TradingInterface \n              virtualBalance={virtualBalance}\n              holdings={holdings}\n            />\n          )}\n\n          {activeTab === 'portfolio' && (\n            <div className=\"space-y-6\">\n              <SimulationPortfolioChart \n                holdings={holdings}\n                portfolioMetrics={portfolioMetrics}\n                marketData={marketData}\n              />\n              \n              {/* Holdings List */}\n              <GlassCard variant=\"floating\" padding=\"large\">\n                <h3 className=\"text-xl font-semibold text-white mb-4\">Your Holdings</h3>\n                {holdings.length === 0 ? (\n                  <div className=\"text-center py-12\">\n                    <p className=\"text-white/60 text-lg mb-4\">No holdings yet</p>\n                    <p className=\"text-white/40 text-sm\">\n                      Start trading to build your simulated portfolio\n                    </p>\n                  </div>\n                ) : (\n                  <div className=\"space-y-3\">\n                    {holdings.map((holding) => {\n                      const currentPrice = marketData?.[holding.symbol]?.price || holding.current_price || holding.purchase_price;\n                      const totalValue = holding.shares * currentPrice;\n                      const totalCost = holding.shares * holding.purchase_price;\n                      const gainLoss = totalValue - totalCost;\n                      const gainLossPercent = (gainLoss / totalCost) * 100;\n\n                      return (\n                        <div\n                          key={holding.id}\n                          className=\"bg-white/10 rounded-lg p-4 hover:bg-white/15 transition-colors\"\n                        >\n                          <div className=\"flex items-center justify-between\">\n                            <div className=\"flex items-center space-x-4\">\n                              <div>\n                                <p className=\"text-white font-bold text-lg\">{holding.symbol}</p>\n                                <p className=\"text-white/60 text-sm\">\n                                  {holding.shares} shares @ ${holding.purchase_price.toFixed(2)}\n                                </p>\n                              </div>\n                            </div>\n                            <div className=\"text-right\">\n                              <p className=\"text-white font-semibold\">\n                                ${totalValue.toFixed(2)}\n                              </p>\n                              <p className={`text-sm ${gainLoss >= 0 ? 'text-green-400' : 'text-red-400'}`}>\n                                {gainLoss >= 0 ? '+' : ''}{gainLossPercent.toFixed(2)}%\n                              </p>\n                            </div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </div>\n                )}\n              </GlassCard>\n            </div>\n          )}\n\n          {activeTab === 'history' && (\n            <TransactionHistory transactions={transactions} />\n          )}\n        </motion.div>\n\n        {/* Reset Confirmation Modal */}\n        {showResetConfirm && (\n          <div className=\"fixed inset-0 bg-black/50 flex items-center justify-center z-50\">\n            <motion.div\n              initial={{ opacity: 0, scale: 0.9 }}\n              animate={{ opacity: 1, scale: 1 }}\n              className=\"max-w-md w-full mx-4\"\n            >\n              <GlassCard variant=\"floating\" padding=\"large\">\n                <h3 className=\"text-xl font-semibold text-white mb-4\">\n                  Reset Simulation?\n                </h3>\n                <p className=\"text-white/70 mb-6\">\n                  This will delete all your holdings and transactions, and reset your balance to $10,000. This action cannot be undone.\n                </p>\n                <div className=\"flex space-x-3\">\n                  <GlassButton\n                    variant=\"secondary\"\n                    size=\"medium\"\n                    onClick={() => setShowResetConfirm(false)}\n                    className=\"flex-1\"\n                  >\n                    Cancel\n                  </GlassButton>\n                  <GlassButton\n                    variant=\"danger\"\n                    size=\"medium\"\n                    onClick={async () => {\n                      await resetSimulation();\n                      setShowResetConfirm(false);\n                    }}\n                    className=\"flex-1\"\n                  >\n                    Reset\n                  </GlassButton>\n                </div>\n              </GlassCard>\n            </motion.div>\n          </div>\n        )}\n\n        {error && (\n          <motion.div\n            initial={{ opacity: 0, y: 20 }}\n            animate={{ opacity: 1, y: 0 }}\n            className=\"mt-6\"\n          >\n            <GlassCard variant=\"solid\" padding=\"medium\" className=\"bg-red-500/20 border-red-400/30\">\n              <p className=\"text-white\">‚ö†Ô∏è {error}</p>\n            </GlassCard>\n          </motion.div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default SimulationPage;\n\n","import { useState, useEffect, useCallback, useMemo } from 'react';\nimport { getQuote, getMultipleQuotes, calculateLivePortfolioMetrics } from '../services/market/marketService';\nimport { getBatchMarketData } from '../services/api/marketService';\nimport { useApp } from '../contexts/AppContext';\n\n/**\n * useAlphaVantageData\n *\n * Handles retrieval of live market pricing for a set of holdings using the Alpha Vantage API,\n * automatically falls back to cached Supabase batch quotes when the upstream API is unavailable,\n * and derives portfolio-level metrics so dashboard/portfolio views stay reactive.\n *\n * @param {Array} holdings - Portfolio holdings used to determine which symbols to quote.\n * @returns {Object} Market data, computed metrics, loading/error state, and refresh helpers.\n */\nexport const useAlphaVantageData = (holdings = []) => {\n  console.log('üöÄ [useAlphaVantageData] Hook initialized with', holdings.length, 'holdings');\n  \n  const { queueToast } = useApp();\n\n  const [marketData, setMarketData] = useState({});\n  const [portfolioMetrics, setPortfolioMetrics] = useState(null);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [lastUpdated, setLastUpdated] = useState(null);\n\n  const uniqueSymbols = useMemo(() => {\n    const symbols = holdings.map((holding) => holding.symbol).filter(Boolean);\n    const deduped = [...new Set(symbols)];\n    console.log('üöÄ [useAlphaVantageData] Extracted symbols:', deduped);\n    return deduped;\n  }, [holdings]);\n\n  console.log('üöÄ [useAlphaVantageData] Holdings snapshot:', holdings.length);\n\n  // Fetch market data for portfolio symbols\n  const fetchMarketData = useCallback(async () => {\n    console.log('üöÄ [useAlphaVantageData] fetchMarketData triggered for', uniqueSymbols.length, 'symbols');\n    \n    if (uniqueSymbols.length === 0) {\n      console.log('üöÄ [useAlphaVantageData] ‚ö†Ô∏è No symbols to fetch - empty portfolio detected');\n      setMarketData({});\n      setPortfolioMetrics(calculateLivePortfolioMetrics([], {}));\n      setLoading(false);\n      return;\n    }\n\n    try {\n      setLoading(true);\n      setError(null);\n      \n      console.log('üöÄ [useAlphaVantageData] üì∂ Fetching market data for symbols:', uniqueSymbols);\n\n      const quotes = await getMultipleQuotes(uniqueSymbols);\n      \n      console.log('üöÄ [useAlphaVantageData] üì• Market data received:', Object.keys(quotes).length, 'quotes');\n      console.log('üöÄ [useAlphaVantageData] üìä Quote summary:', Object.entries(quotes).map(([symbol, quote]) => \n        `${symbol}: $${quote?.price || 'N/A'}`\n      ));\n      \n      setMarketData(quotes);\n\n      // Calculate portfolio metrics with live data\n      console.log('üöÄ [useAlphaVantageData] üßÆ Calculating live portfolio metrics...');\n      const metrics = calculateLivePortfolioMetrics(holdings, quotes);\n      \n      console.log('üöÄ [useAlphaVantageData] ‚úÖ Live metrics calculated:', {\n        totalValue: metrics.totalValue,\n        totalGainLoss: metrics.totalGainLoss,\n        dayChange: metrics.dayChange,\n        holdingsCount: metrics.holdings.length\n      });\n      \n      setPortfolioMetrics(metrics);\n      setLastUpdated(new Date().toISOString());\n\n    } catch (err) {\n      console.error('üöÄ [useAlphaVantageData] ‚ùå Error fetching market data:', err);\n      setError(err.message || 'Failed to fetch market data');\n\n      try {\n        console.log('üöÄ [useAlphaVantageData] üîÑ Attempting Supabase fallback for market data.');\n        const fallbackQuotes = await getBatchMarketData(uniqueSymbols);\n\n        if (fallbackQuotes && Object.keys(fallbackQuotes).length > 0) {\n          setMarketData(fallbackQuotes);\n          const fallbackMetrics = calculateLivePortfolioMetrics(holdings, fallbackQuotes);\n          setPortfolioMetrics(fallbackMetrics);\n          setLastUpdated(new Date().toISOString());\n          queueToast('Live price feed unavailable. Showing cached market data.', 'warning');\n          return;\n        }\n      } catch (fallbackError) {\n        console.error('üöÄ [useAlphaVantageData] ‚ùå Supabase fallback failed:', fallbackError);\n      }\n\n      console.log('üöÄ [useAlphaVantageData] üîÑ Using static portfolio calculations due to market data failure');\n      const fallbackMetrics = calculateLivePortfolioMetrics(holdings, {});\n      setPortfolioMetrics(fallbackMetrics);\n    } finally {\n      setLoading(false);\n    }\n  }, [uniqueSymbols, holdings, queueToast]);\n\n  // Fetch single quote\n  const fetchQuote = useCallback(async (symbol) => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const quote = await getQuote(symbol);\n      if (quote) {\n        setMarketData(prev => ({\n          ...prev,\n          [symbol]: quote\n        }));\n      }\n      return quote;\n    } catch (err) {\n      console.error('Error fetching quote for', symbol, ':', err);\n      setError(err.message || `Failed to fetch quote for ${symbol}`);\n      return null;\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  // Auto-fetch data when holdings change\n  useEffect(() => {\n    console.log('üöÄ [useAlphaVantageData] üîÑ Holdings changed, triggering market data fetch');\n    fetchMarketData();\n  }, [fetchMarketData]);\n\n  // Refresh data manually\n  const refreshData = useCallback(() => {\n    return fetchMarketData();\n  }, [fetchMarketData]);\n\n  // Get quote for specific symbol\n  const getQuoteBySymbol = useCallback((symbol) => {\n    return marketData[symbol] || null;\n  }, [marketData]);\n\n  // Check if data is stale (older than 5 minutes)\n  const isDataStale = useCallback(() => {\n    if (!lastUpdated) return true;\n    const fiveMinutesAgo = Date.now() - (5 * 60 * 1000);\n    const stale = new Date(lastUpdated).getTime() < fiveMinutesAgo;\n    if (stale) {\n      console.log('üöÄ [useAlphaVantageData] ‚è∞ Data is stale - last updated:', lastUpdated);\n    }\n    return stale;\n  }, [lastUpdated]);\n\n  return {\n    marketData,\n    portfolioMetrics,\n    loading,\n    error,\n    lastUpdated,\n    fetchMarketData,\n    fetchQuote,\n    refreshData,\n    getQuoteBySymbol,\n    isDataStale,\n    hasData: Object.keys(marketData).length > 0\n  };\n};\n"],"names":["ALPHA_VANTAGE_BASE_URL","process","REACT_APP_ALPHA_VANTAGE_BASE_URL","API_KEY","REACT_APP_ALPHA_VANTAGE_API_KEY","priceCache","Map","STORAGE_CACHE_KEY","getQuote","async","console","log","symbol","warn","cacheKey","toUpperCase","cached","get","cacheAge","Date","now","timestamp","Math","round","data","storedCache","localStorage","getItem","cachedQuote","JSON","parse","set","storageError","_quote$10ChangePer","url","concat","encodeURIComponent","replace","response","fetch","ok","Error","status","json","Object","keys","error","quote","transformedQuote","open","parseFloat","high","low","price","volume","parseInt","latestTradingDay","previousClose","change","changePercent","cacheEntry","cacheData","length","sort","a","b","slice","forEach","key","setItem","stringify","size","_objectSpread","_stale","_staleWarning","getMultipleQuotes","symbols","results","i","batch","batchNumber","floor","totalBatches","ceil","promises","map","batchResults","Promise","all","filter","r","index","resolve","setTimeout","successCount","values","calculateLivePortfolioMetrics","holdings","marketData","totalValue","totalCostBasis","totalGainLoss","totalGainLossPercentage","dayChange","dayChangePercentage","totalDayChange","enrichedHoldings","holding","currentPrice","purchasePrice","value","shares","costBasis","gainLoss","gainLossPercentage","lastUpdated","toISOString","_ref","virtualBalance","buyStock","sellStock","loading","useSimulation","setSymbol","useState","setShares","tradeType","setTradeType","setCurrentPrice","searching","setSearching","message","setMessage","aiCoaching","setAiCoaching","handleSearch","generateAICoaching","type","text","stockSymbol","find","h","purchase_price","gainLossPercent","toFixed","abs","totalCost","canAfford","_jsxs","className","children","GlassCard","variant","padding","_jsx","onClick","placeholder","onChange","e","target","onKeyPress","GlassButton","disabled","motion","div","initial","opacity","y","animate","min","step","numShares","isNaN","result","success","x","stock","portfolioMetrics","allocationData","_marketData$holding$s","current_price","name","COLORS","ResponsiveContainer","width","height","PieChart","Pie","cx","cy","labelLine","label","_ref2","percent","outerRadius","fill","dataKey","entry","Cell","Tooltip","contentStyle","background","border","borderRadius","color","formatter","Legend","wrapperStyle","payload","transactions","transaction","_transaction$price","transition","delay","transaction_type","transaction_date","toLocaleString","total_amount","fees","id","SimulationPage","portfolio","resetSimulation","useAlphaVantageData","activeTab","setActiveTab","showResetConfirm","setShowResetConfirm","fadeIn","hidden","visible","duration","ease","portfolioValue","totalInvested","totalReturn","totalReturnPercent","LoadingSpinner","variants","exit","TradingInterface","SimulationPortfolioChart","TransactionHistory","scale","arguments","undefined","queueToast","useApp","setMarketData","setPortfolioMetrics","setLoading","setError","setLastUpdated","uniqueSymbols","useMemo","Boolean","deduped","Set","fetchMarketData","useCallback","quotes","entries","metrics","holdingsCount","err","fallbackQuotes","getBatchMarketData","fallbackMetrics","fallbackError","fetchQuote","prev","useEffect","refreshData","getQuoteBySymbol","isDataStale","fiveMinutesAgo","stale","getTime","hasData"],"sourceRoot":""}