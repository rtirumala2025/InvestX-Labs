"use strict";(self.webpackChunkinvestx_labs=self.webpackChunkinvestx_labs||[]).push([[847],{1761:(e,t,a)=>{a.d(t,{WI:()=>d,c2:()=>c,fn:()=>o});var s=a(7405);const l={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALPHA_VANTAGE_BASE_URL||"https://www.alphavantage.co/query",r={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_ALPHA_VANTAGE_API_KEY,i=new Map,n="investx_market_cache",o=async e=>{if(console.log("\ud83d\udcc8 [MarketService] getQuote() called for symbol:",e),!e)return console.warn("\ud83d\udcc8 [MarketService] \u274c No symbol provided"),null;if(!r)return console.warn("\ud83d\udcc8 [MarketService] \u274c Alpha Vantage API key not found in environment variables"),null;const t=e.toUpperCase(),a=i.get(t),o=a?Date.now()-a.timestamp:null;if(a&&o<6e4)return console.log("\ud83d\udcc8 [MarketService] \ud83c\udfaf Cache HIT for",e,"- age:",Math.round(o/1e3),"seconds"),a.data;a?console.log("\ud83d\udcc8 [MarketService] \u23f0 Cache MISS for",e,"- stale data, age:",Math.round(o/1e3),"seconds"):console.log("\ud83d\udcc8 [MarketService] \ud83c\udd95 Cache MISS for",e,"- no cached data");try{const a=localStorage.getItem(n);if(a){const s=JSON.parse(a)[t];if(s&&Date.now()-s.timestamp<3e5)return console.log("\ud83d\udcc8 [MarketService] \ud83d\udcbe localStorage Cache HIT for",e),i.set(t,s),s.data}}catch(d){console.warn("\ud83d\udcc8 [MarketService] Error reading localStorage cache:",d)}try{var c;const a="".concat(l,"?function=GLOBAL_QUOTE&symbol=").concat(encodeURIComponent(e),"&apikey=").concat(r);console.log("\ud83d\udcc8 [MarketService] \ud83c\udf10 Sending API request to Alpha Vantage:",a.replace(r,"API_KEY_HIDDEN"));const s=await fetch(a);if(!s.ok)throw new Error("HTTP error! status: ".concat(s.status));const o=await s.json();if(console.log("\ud83d\udcc8 [MarketService] \ud83d\udce5 Raw API response received for",e,":",Object.keys(o)),o["Error Message"])return console.error("\ud83d\udcc8 [MarketService] \u274c Alpha Vantage API Error:",o["Error Message"]),null;if(o.Note)return console.warn("\ud83d\udcc8 [MarketService] \u26a0\ufe0f Alpha Vantage API Note (rate limit):",o.Note),null;const h=o["Global Quote"];if(!h)return console.error("\ud83d\udcc8 [MarketService] \u274c No quote data found for symbol:",e),null;console.log("\ud83d\udcc8 [MarketService] \ud83d\udcca Raw quote data for",e,":",h);const x={symbol:h["01. symbol"],open:parseFloat(h["02. open"])||0,high:parseFloat(h["03. high"])||0,low:parseFloat(h["04. low"])||0,price:parseFloat(h["05. price"])||0,volume:parseInt(h["06. volume"])||0,latestTradingDay:h["07. latest trading day"],previousClose:parseFloat(h["08. previous close"])||0,change:parseFloat(h["09. change"])||0,changePercent:parseFloat(null===(c=h["10. change percent"])||void 0===c?void 0:c.replace("%",""))||0};console.log("\ud83d\udcc8 [MarketService] \u2705 Transformed quote for",e,":",{price:x.price,change:x.change,changePercent:x.changePercent,previousClose:x.previousClose});const m={data:x,timestamp:Date.now()};i.set(t,m);try{const e=localStorage.getItem(n),a=e?JSON.parse(e):{};a[t]=m;const s=Object.keys(a);if(s.length>50){s.sort((e,t)=>(a[e].timestamp||0)-(a[t].timestamp||0)).slice(0,s.length-50).forEach(e=>delete a[e])}localStorage.setItem(n,JSON.stringify(a))}catch(d){console.warn("\ud83d\udcc8 [MarketService] Error writing to localStorage cache:",d)}return console.log("\ud83d\udcc8 [MarketService] \ud83d\udcbe Cached quote for",e,"- cache size:",i.size),x}catch(h){console.error("\ud83d\udcc8 [MarketService] \u274c Error fetching quote for",e,":",h);const a=i.get(t);if(a)return console.log("\ud83d\udcc8 [MarketService] \ud83d\udd04 Returning stale in-memory cached data as fallback for",e),a.data;try{const a=localStorage.getItem(n);if(a){const l=JSON.parse(a)[t];if(l)return console.log("\ud83d\udcc8 [MarketService] \ud83d\udd04 Returning stale localStorage cached data as fallback for",e,"(may be outdated)"),(0,s.A)((0,s.A)({},l.data),{},{_stale:!0,_staleWarning:"Market data may be outdated. Please refresh."})}}catch(d){console.warn("\ud83d\udcc8 [MarketService] Error reading localStorage cache on error fallback:",d)}return null}},c=async e=>{if(console.log("\ud83d\udcc8 [MarketService] getMultipleQuotes() called for",e.length,"symbols:",e),!e||0===e.length)return console.log("\ud83d\udcc8 [MarketService] \u26a0\ufe0f No symbols provided to getMultipleQuotes"),{};const t={};console.log("\ud83d\udcc8 [MarketService] \ud83d\udd04 Processing",e.length,"symbols in batches of",5);for(let l=0;l<e.length;l+=5){const a=e.slice(l,l+5),r=Math.floor(l/5)+1,i=Math.ceil(e.length/5);console.log("\ud83d\udcc8 [MarketService] \ud83d\udce6 Processing batch",r,"of",i,":",a);try{const s=a.map(e=>o(e)),i=await Promise.all(s);console.log("\ud83d\udcc8 [MarketService] \u2705 Batch",r,"completed - received",i.filter(e=>null!==e).length,"valid quotes"),a.forEach((e,a)=>{t[e]=i[a]}),l+5<e.length&&(console.log("\ud83d\udcc8 [MarketService] \u23f3 Waiting 12 seconds before next batch to respect rate limits..."),await new Promise(e=>setTimeout(e,12e3)),console.log("\ud83d\udcc8 [MarketService] \u23f0 Delay complete, proceeding to next batch"))}catch(s){console.error("\ud83d\udcc8 [MarketService] \u274c Error fetching batch",r,":",s)}}const a=Object.values(t).filter(e=>null!==e).length;return console.log("\ud83d\udcc8 [MarketService] \ud83c\udfaf getMultipleQuotes completed:",a,"successful out of",e.length,"requested"),t},d=(e,t)=>{if(!e||0===e.length)return{totalValue:0,totalCostBasis:0,totalGainLoss:0,totalGainLossPercentage:0,dayChange:0,dayChangePercentage:0,holdings:[]};let a=0,l=0,r=0;const i=e.map(e=>{const i=t[e.symbol],n=(null===i||void 0===i?void 0:i.price)||e.purchasePrice||0,o=(null===i||void 0===i?void 0:i.previousClose)||e.purchasePrice||0,c=e.shares*n,d=e.shares*e.purchasePrice,h=c-d,x=d>0?h/d*100:0,m=e.shares*(n-o),u=o>0?(n-o)/o*100:0;return a+=c,l+=d,r+=m,(0,s.A)((0,s.A)({},e),{},{currentPrice:n,previousClose:o,value:c,gainLoss:h,gainLossPercentage:x,dayChange:m,dayChangePercentage:u,lastUpdated:(new Date).toISOString()})}),n=a-l;return{totalValue:a,totalCostBasis:l,totalGainLoss:n,totalGainLossPercentage:l>0?n/l*100:0,dayChange:r,dayChangePercentage:a-r>0?r/(a-r)*100:0,holdings:i,lastUpdated:(new Date).toISOString()}}},7847:(e,t,a)=>{a.r(t),a.d(t,{default:()=>j});var s=a(9643),l=a(7626),r=a(3777),i=a(8814),n=a(9738),o=a(1672),c=a(334),d=a(1761),h=a(6507);const x=e=>{let{virtualBalance:t,holdings:a}=e;const{buyStock:i,sellStock:c,loading:x}=(0,r.$g)(),[m,u]=(0,s.useState)(""),[g,p]=(0,s.useState)(""),[f,b]=(0,s.useState)("buy"),[y,v]=(0,s.useState)(null),[j,w]=(0,s.useState)(!1),[N,S]=(0,s.useState)(null),[k,A]=(0,s.useState)(null),C=async()=>{if(m){w(!0),S(null),v(null);try{const e=await(0,d.fn)(m.toUpperCase());e&&e.price?(v(e.price),P(m.toUpperCase(),e.price)):S({type:"error",text:"Stock not found. Please check the symbol and try again."})}catch(e){console.error("Error fetching quote:",e),S({type:"error",text:"Failed to fetch stock data. Please try again."})}finally{w(!1)}}},P=(e,t)=>{const s=a.find(t=>t.symbol===e);if("buy"===f)A(s?{type:"info",text:"\ud83d\udcda You already own ".concat(s.shares," shares of ").concat(e,". Consider: Is this adding to your diversification or over-concentrating your portfolio?")}:{type:"success",text:"\ud83d\udca1 This would be a new position. Remember to research the company's fundamentals, industry trends, and consider how it fits your overall portfolio strategy."});else if(s){const e=(t-s.purchase_price)*g,a=(t-s.purchase_price)/s.purchase_price*100;A(e>0?{type:"success",text:"\ud83d\udcc8 This trade would result in a ".concat(a.toFixed(2),"% gain! Remember: realizing profits is part of good portfolio management, but also consider tax implications and long-term goals.")}:{type:"warning",text:"\ud83d\udcc9 This trade would result in a ".concat(Math.abs(a).toFixed(2),"% loss. Consider: Is this a strategic decision to cut losses, or could holding longer align with your investment thesis?")})}},M=y&&g?(parseFloat(g)*y*("buy"===f?1.001:.999)).toFixed(2):0,_="buy"!==f||parseFloat(M)<=t;return(0,h.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-2xl font-semibold text-white mb-6",children:"buy"===f?"\ud83d\udcc8 Buy Stock":"\ud83d\udcc9 Sell Stock"}),(0,h.jsxs)("div",{className:"flex space-x-2 mb-6 bg-white/5 rounded-lg p-1",children:[(0,h.jsx)("button",{onClick:()=>{b("buy"),A(null)},className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("buy"===f?"bg-green-500/30 text-green-300":"text-white/60 hover:text-white"),children:"Buy"}),(0,h.jsx)("button",{onClick:()=>{b("sell"),A(null)},className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("sell"===f?"bg-red-500/30 text-red-300":"text-white/60 hover:text-white"),children:"Sell"})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Stock Symbol"}),(0,h.jsxs)("div",{className:"flex space-x-2",children:[(0,h.jsx)("input",{type:"text",placeholder:"e.g., AAPL",value:m,onChange:e=>u(e.target.value.toUpperCase()),className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-white/40",onKeyPress:e=>"Enter"===e.key&&C()}),(0,h.jsx)(o.A,{variant:"primary",size:"medium",onClick:C,disabled:j||!m,children:j?"...":"Search"})]})]}),y&&(0,h.jsxs)(l.P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4 bg-blue-500/20 border border-blue-400/30 rounded-lg p-4",children:[(0,h.jsx)("p",{className:"text-white/70 text-sm mb-1",children:"Current Price"}),(0,h.jsxs)("p",{className:"text-white text-3xl font-bold",children:["$",y.toFixed(2)]})]}),(0,h.jsxs)("div",{className:"mb-4",children:[(0,h.jsx)("label",{className:"block text-white/70 text-sm mb-2",children:"Number of Shares"}),(0,h.jsx)("input",{type:"number",placeholder:"e.g., 10",value:g,onChange:e=>p(e.target.value),min:"0.01",step:"0.01",className:"w-full bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:border-white/40"})]}),y&&g&&(0,h.jsxs)("div",{className:"mb-6 bg-white/5 rounded-lg p-4 space-y-2",children:[(0,h.jsxs)("div",{className:"flex justify-between text-white/70",children:[(0,h.jsx)("span",{children:"Shares:"}),(0,h.jsx)("span",{children:g})]}),(0,h.jsxs)("div",{className:"flex justify-between text-white/70",children:[(0,h.jsx)("span",{children:"Price per share:"}),(0,h.jsxs)("span",{children:["$",y.toFixed(2)]})]}),(0,h.jsxs)("div",{className:"flex justify-between text-white/70",children:[(0,h.jsx)("span",{children:"Trading fee (0.1%):"}),(0,h.jsxs)("span",{children:["$",(parseFloat(g)*y*.001).toFixed(2)]})]}),(0,h.jsxs)("div",{className:"border-t border-white/20 pt-2 flex justify-between text-white font-semibold text-lg",children:[(0,h.jsx)("span",{children:"Total:"}),(0,h.jsxs)("span",{className:"buy"===f?"text-red-400":"text-green-400",children:["buy"===f?"-":"+","$",M]})]}),"buy"===f&&!_&&(0,h.jsxs)("p",{className:"text-red-400 text-sm mt-2",children:["\u26a0\ufe0f Insufficient funds. You need $",(parseFloat(M)-t).toFixed(2)," more."]})]}),(0,h.jsx)(o.A,{variant:"buy"===f?"primary":"danger",size:"large",onClick:async()=>{if(!m||!g||!y)return void S({type:"error",text:"Please fill in all fields and search for a stock first."});const e=parseFloat(g);if(isNaN(e)||e<=0)S({type:"error",text:"Please enter a valid number of shares."});else{S(null);try{let t;t="buy"===f?await i(m.toUpperCase(),e,y):await c(m.toUpperCase(),e,y),t.success?(S({type:"success",text:"\u2705 Successfully ".concat("buy"===f?"bought":"sold"," ").concat(e," shares of ").concat(m.toUpperCase(),"!")}),u(""),p(""),v(null),A(null)):S({type:"error",text:t.error||"Trade failed. Please try again."})}catch(t){console.error("Trade error:",t),S({type:"error",text:"An error occurred. Please try again."})}}},disabled:x||!y||!g||!_,className:"w-full",children:x?"Processing...":"buy"===f?"Buy Now":"Sell Now"}),N&&(0,h.jsx)(l.P.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-4 p-4 rounded-lg ".concat("success"===N.type?"bg-green-500/20 border border-green-400/30":"bg-red-500/20 border border-red-400/30"),children:(0,h.jsx)("p",{className:"text-white text-sm",children:N.text})})]}),(0,h.jsxs)("div",{className:"space-y-6",children:[k&&(0,h.jsx)(l.P.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},children:(0,h.jsx)(n.A,{variant:"floating",padding:"large",className:"success"===k.type?"bg-green-500/10 border-green-400/20":"warning"===k.type?"bg-yellow-500/10 border-yellow-400/20":"bg-blue-500/10 border-blue-400/20",children:(0,h.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,h.jsx)("span",{className:"text-3xl",children:"\ud83e\udd16"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("h4",{className:"text-white font-semibold mb-2",children:"AI Trading Coach"}),(0,h.jsx)("p",{className:"text-white/80 text-sm",children:k.text})]})]})})}),(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsxs)("h4",{className:"text-white font-semibold mb-4 flex items-center",children:[(0,h.jsx)("span",{className:"text-2xl mr-2",children:"\ud83d\udca1"}),"Trading Tips"]}),(0,h.jsxs)("div",{className:"space-y-3 text-white/70 text-sm",children:[(0,h.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,h.jsx)("span",{className:"text-green-400",children:"\u2022"}),(0,h.jsx)("p",{children:"Always research a company before buying its stock"})]}),(0,h.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,h.jsx)("span",{className:"text-green-400",children:"\u2022"}),(0,h.jsx)("p",{children:"Diversify across different sectors to reduce risk"})]}),(0,h.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,h.jsx)("span",{className:"text-green-400",children:"\u2022"}),(0,h.jsx)("p",{children:"Consider long-term trends rather than short-term fluctuations"})]}),(0,h.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,h.jsx)("span",{className:"text-green-400",children:"\u2022"}),(0,h.jsx)("p",{children:"Don't invest more than you can afford to lose"})]}),(0,h.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,h.jsx)("span",{className:"text-green-400",children:"\u2022"}),(0,h.jsx)("p",{children:"Keep emotions in check - stick to your strategy"})]})]})]}),(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h4",{className:"text-white font-semibold mb-4",children:"Popular Stocks"}),(0,h.jsx)("div",{className:"grid grid-cols-2 gap-2",children:["AAPL","MSFT","GOOGL","AMZN","TSLA","META"].map(e=>(0,h.jsx)("button",{onClick:()=>{u(e),C()},className:"bg-white/10 hover:bg-white/20 rounded-lg px-4 py-2 text-white transition-colors",children:e},e))})]})]})]})};var m=a(5668),u=a(4794),g=a(9815),p=a(5685),f=a(9150),b=a(7895);const y=e=>{let{holdings:t,portfolioMetrics:a,marketData:s}=e;if(!t||0===t.length)return(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Portfolio Allocation"}),(0,h.jsx)("div",{className:"text-center py-12",children:(0,h.jsx)("p",{className:"text-white/60",children:"No holdings to display"})})]});const l=t.map(e=>{var t;const a=(null===s||void 0===s||null===(t=s[e.symbol])||void 0===t?void 0:t.price)||e.current_price||e.purchase_price,l=e.shares*a;return{name:e.symbol,value:l,shares:e.shares}}),r=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899","#14b8a6","#f97316"];return(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:"Portfolio Allocation"}),(0,h.jsx)("div",{className:"h-80",children:(0,h.jsx)(m.u,{width:"100%",height:"100%",children:(0,h.jsxs)(u.r,{children:[(0,h.jsx)(g.F,{data:l,cx:"50%",cy:"50%",labelLine:!1,label:e=>{let{name:t,percent:a}=e;return"".concat(t," ").concat((100*a).toFixed(0),"%")},outerRadius:80,fill:"#8884d8",dataKey:"value",children:l.map((e,t)=>(0,h.jsx)(p.f,{fill:r[t%r.length]},"cell-".concat(t)))}),(0,h.jsx)(f.m,{contentStyle:{background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"8px",color:"#fff"},formatter:e=>"$".concat(e.toFixed(2))}),(0,h.jsx)(b.s,{wrapperStyle:{color:"#fff"},formatter:(e,t)=>"".concat(e,": ").concat(t.payload.shares.toFixed(2)," shares")})]})})})]})},v=e=>{let{transactions:t}=e;return t&&0!==t.length?(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-6",children:"Transaction History"}),(0,h.jsx)("div",{className:"space-y-3",children:t.map((e,t)=>{var a;return(0,h.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"bg-white/10 rounded-lg p-4 hover:bg-white/15 transition-colors",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,h.jsx)("div",{className:"w-10 h-10 rounded-full flex items-center justify-center ".concat("buy"===e.transaction_type?"bg-green-500/20 text-green-400":"bg-red-500/20 text-red-400"),children:"buy"===e.transaction_type?"\u2191":"\u2193"}),(0,h.jsxs)("div",{children:[(0,h.jsxs)("p",{className:"text-white font-semibold",children:["buy"===e.transaction_type?"Bought":"Sold"," ",e.symbol]}),(0,h.jsxs)("p",{className:"text-white/60 text-sm",children:[e.shares," shares @ $",null===(a=e.price)||void 0===a?void 0:a.toFixed(2)]}),(0,h.jsx)("p",{className:"text-white/40 text-xs",children:new Date(e.transaction_date).toLocaleString()})]})]}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("p",{className:"font-semibold ".concat("buy"===e.transaction_type?"text-red-400":"text-green-400"),children:["buy"===e.transaction_type?"-":"+","$",Math.abs(e.total_amount).toFixed(2)]}),e.fees>0&&(0,h.jsxs)("p",{className:"text-white/40 text-xs",children:["Fee: $",e.fees.toFixed(2)]})]})]})},e.id)})})]}):(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Transaction History"}),(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("p",{className:"text-white/60 text-lg mb-2",children:"No transactions yet"}),(0,h.jsx)("p",{className:"text-white/40 text-sm",children:"Your trading history will appear here"})]})]})},j=()=>{const{portfolio:e,virtualBalance:t,holdings:a,transactions:d,loading:m,error:u,resetSimulation:g}=(0,r.$g)(),{portfolioMetrics:p,marketData:f}=(0,i.y)(a||[]),[b,j]=(0,s.useState)("trade"),[w,N]=(0,s.useState)(!1),S={hidden:{opacity:0,y:16},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},k=(null===p||void 0===p?void 0:p.totalValue)||0,A=k+t-1e4,C=A-1e4,P=A>0?C/1e4*100:0;return m&&!e?(0,h.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,h.jsx)(c.Ay,{size:"large"})}):(0,h.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900 py-4 lg:py-6",children:(0,h.jsxs)("div",{className:"w-full max-w-[1920px] mx-auto px-3 lg:px-4 xl:px-6",children:[(0,h.jsxs)(l.P.div,{variants:S,initial:"hidden",animate:"visible",className:"mb-4 lg:mb-6",children:[(0,h.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,h.jsxs)("div",{children:[(0,h.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-2",children:"\ud83c\udfae Simulation Mode"}),(0,h.jsx)("p",{className:"text-white/70",children:"Practice trading with $10,000 virtual money"})]}),(0,h.jsx)(o.A,{variant:"secondary",size:"small",onClick:()=>N(!0),children:"Reset Simulation"})]}),(0,h.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mt-6",children:[(0,h.jsxs)(n.A,{variant:"floating",padding:"medium",children:[(0,h.jsx)("p",{className:"text-white/70 text-sm mb-1",children:"Virtual Cash"}),(0,h.jsxs)("p",{className:"text-white text-2xl font-bold",children:["$",t.toFixed(2)]})]}),(0,h.jsxs)(n.A,{variant:"floating",padding:"medium",children:[(0,h.jsx)("p",{className:"text-white/70 text-sm mb-1",children:"Portfolio Value"}),(0,h.jsxs)("p",{className:"text-white text-2xl font-bold",children:["$",k.toFixed(2)]})]}),(0,h.jsxs)(n.A,{variant:"floating",padding:"medium",children:[(0,h.jsx)("p",{className:"text-white/70 text-sm mb-1",children:"Total Return"}),(0,h.jsxs)("p",{className:"text-2xl font-bold ".concat(C>=0?"text-green-400":"text-red-400"),children:[C>=0?"+":"","$",C.toFixed(2)]})]}),(0,h.jsxs)(n.A,{variant:"floating",padding:"medium",children:[(0,h.jsx)("p",{className:"text-white/70 text-sm mb-1",children:"Return %"}),(0,h.jsxs)("p",{className:"text-2xl font-bold ".concat(P>=0?"text-green-400":"text-red-400"),children:[P>=0?"+":"",P.toFixed(2),"%"]})]})]})]}),(0,h.jsx)(l.P.div,{variants:S,initial:"hidden",animate:"visible",className:"mb-6",children:(0,h.jsx)(n.A,{variant:"solid",padding:"medium",className:"bg-blue-500/20 border-blue-400/30",children:(0,h.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,h.jsx)("span",{className:"text-2xl",children:"\ud83d\udca1"}),(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-white font-medium mb-1",children:"Educational Simulation"}),(0,h.jsx)("p",{className:"text-white/80 text-sm",children:"This is a learning environment using real market data but virtual money. All trades are simulated and no real money is involved. Use this to practice strategies before investing real money."})]})]})})}),(0,h.jsx)(l.P.div,{variants:S,initial:"hidden",animate:"visible",className:"mb-6",children:(0,h.jsxs)("div",{className:"flex space-x-2 bg-white/5 rounded-lg p-1",children:[(0,h.jsx)("button",{onClick:()=>j("trade"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("trade"===b?"bg-white/20 text-white":"text-white/60 hover:text-white"),children:"\ud83d\udcc8 Trade"}),(0,h.jsx)("button",{onClick:()=>j("portfolio"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("portfolio"===b?"bg-white/20 text-white":"text-white/60 hover:text-white"),children:"\ud83d\udcbc Portfolio"}),(0,h.jsx)("button",{onClick:()=>j("history"),className:"flex-1 px-4 py-2 rounded-lg font-medium transition-all ".concat("history"===b?"bg-white/20 text-white":"text-white/60 hover:text-white"),children:"\ud83d\udccb History"})]})}),(0,h.jsxs)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:["trade"===b&&(0,h.jsx)(x,{virtualBalance:t,holdings:a}),"portfolio"===b&&(0,h.jsxs)("div",{className:"space-y-6",children:[(0,h.jsx)(y,{holdings:a,portfolioMetrics:p,marketData:f}),(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Your Holdings"}),0===a.length?(0,h.jsxs)("div",{className:"text-center py-12",children:[(0,h.jsx)("p",{className:"text-white/60 text-lg mb-4",children:"No holdings yet"}),(0,h.jsx)("p",{className:"text-white/40 text-sm",children:"Start trading to build your simulated portfolio"})]}):(0,h.jsx)("div",{className:"space-y-3",children:a.map(e=>{var t;const a=(null===f||void 0===f||null===(t=f[e.symbol])||void 0===t?void 0:t.price)||e.current_price||e.purchase_price,s=e.shares*a,l=e.shares*e.purchase_price,r=s-l,i=r/l*100;return(0,h.jsx)("div",{className:"bg-white/10 rounded-lg p-4 hover:bg-white/15 transition-colors",children:(0,h.jsxs)("div",{className:"flex items-center justify-between",children:[(0,h.jsx)("div",{className:"flex items-center space-x-4",children:(0,h.jsxs)("div",{children:[(0,h.jsx)("p",{className:"text-white font-bold text-lg",children:e.symbol}),(0,h.jsxs)("p",{className:"text-white/60 text-sm",children:[e.shares," shares @ $",e.purchase_price.toFixed(2)]})]})}),(0,h.jsxs)("div",{className:"text-right",children:[(0,h.jsxs)("p",{className:"text-white font-semibold",children:["$",s.toFixed(2)]}),(0,h.jsxs)("p",{className:"text-sm ".concat(r>=0?"text-green-400":"text-red-400"),children:[r>=0?"+":"",i.toFixed(2),"%"]})]})]})},e.id)})})]})]}),"history"===b&&(0,h.jsx)(v,{transactions:d})]},b),w&&(0,h.jsx)("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:(0,h.jsx)(l.P.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"max-w-md w-full mx-4",children:(0,h.jsxs)(n.A,{variant:"floating",padding:"large",children:[(0,h.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Reset Simulation?"}),(0,h.jsx)("p",{className:"text-white/70 mb-6",children:"This will delete all your holdings and transactions, and reset your balance to $10,000. This action cannot be undone."}),(0,h.jsxs)("div",{className:"flex space-x-3",children:[(0,h.jsx)(o.A,{variant:"secondary",size:"medium",onClick:()=>N(!1),className:"flex-1",children:"Cancel"}),(0,h.jsx)(o.A,{variant:"danger",size:"medium",onClick:async()=>{await g(),N(!1)},className:"flex-1",children:"Reset"})]})]})})}),u&&(0,h.jsx)(l.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mt-6",children:(0,h.jsx)(n.A,{variant:"solid",padding:"medium",className:"bg-red-500/20 border-red-400/30",children:(0,h.jsxs)("p",{className:"text-white",children:["\u26a0\ufe0f ",u]})})})]})})}},8814:(e,t,a)=>{a.d(t,{y:()=>o});var s=a(7405),l=a(9643),r=a(1761),i=a(4685),n=a(581);const o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];console.log("\ud83d\ude80 [useAlphaVantageData] Hook initialized with",e.length,"holdings");const{queueToast:t}=(0,n.nm)(),[a,o]=(0,l.useState)({}),[c,d]=(0,l.useState)(null),[h,x]=(0,l.useState)(!1),[m,u]=(0,l.useState)(null),[g,p]=(0,l.useState)(null),f=(0,l.useMemo)(()=>{const t=e.map(e=>e.symbol).filter(Boolean),a=[...new Set(t)];return console.log("\ud83d\ude80 [useAlphaVantageData] Extracted symbols:",a),a},[e]);console.log("\ud83d\ude80 [useAlphaVantageData] Holdings snapshot:",e.length);const b=(0,l.useCallback)(async()=>{if(console.log("\ud83d\ude80 [useAlphaVantageData] fetchMarketData triggered for",f.length,"symbols"),0===f.length)return console.log("\ud83d\ude80 [useAlphaVantageData] \u26a0\ufe0f No symbols to fetch - empty portfolio detected"),o({}),d((0,r.WI)([],{})),void x(!1);try{x(!0),u(null),console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udcf6 Fetching market data for symbols:",f);const t=await(0,r.c2)(f);console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udce5 Market data received:",Object.keys(t).length,"quotes"),console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udcca Quote summary:",Object.entries(t).map(e=>{let[t,a]=e;return"".concat(t,": $").concat((null===a||void 0===a?void 0:a.price)||"N/A")})),o(t),console.log("\ud83d\ude80 [useAlphaVantageData] \ud83e\uddee Calculating live portfolio metrics...");const a=(0,r.WI)(e,t);console.log("\ud83d\ude80 [useAlphaVantageData] \u2705 Live metrics calculated:",{totalValue:a.totalValue,totalGainLoss:a.totalGainLoss,dayChange:a.dayChange,holdingsCount:a.holdings.length}),d(a),p((new Date).toISOString())}catch(a){console.error("\ud83d\ude80 [useAlphaVantageData] \u274c Error fetching market data:",a),u(a.message||"Failed to fetch market data");try{console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udd04 Attempting Supabase fallback for market data.");const a=await(0,i.ls)(f);if(a&&Object.keys(a).length>0){o(a);const s=(0,r.WI)(e,a);return d(s),p((new Date).toISOString()),void t("Live price feed unavailable. Showing cached market data.","warning")}}catch(s){console.error("\ud83d\ude80 [useAlphaVantageData] \u274c Supabase fallback failed:",s)}console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udd04 Using static portfolio calculations due to market data failure");const l=(0,r.WI)(e,{});d(l)}finally{x(!1)}},[f,e,t]),y=(0,l.useCallback)(async e=>{try{x(!0),u(null);const t=await(0,r.fn)(e);return t&&o(a=>(0,s.A)((0,s.A)({},a),{},{[e]:t})),t}catch(t){return console.error("Error fetching quote for",e,":",t),u(t.message||"Failed to fetch quote for ".concat(e)),null}finally{x(!1)}},[]);(0,l.useEffect)(()=>{console.log("\ud83d\ude80 [useAlphaVantageData] \ud83d\udd04 Holdings changed, triggering market data fetch"),b()},[b]);const v=(0,l.useCallback)(()=>b(),[b]),j=(0,l.useCallback)(e=>a[e]||null,[a]),w=(0,l.useCallback)(()=>{if(!g)return!0;const e=Date.now()-3e5,t=new Date(g).getTime()<e;return t&&console.log("\ud83d\ude80 [useAlphaVantageData] \u23f0 Data is stale - last updated:",g),t},[g]);return{marketData:a,portfolioMetrics:c,loading:h,error:m,lastUpdated:g,fetchMarketData:b,fetchQuote:y,refreshData:v,getQuoteBySymbol:j,isDataStale:w,hasData:Object.keys(a).length>0}}}}]);
//# sourceMappingURL=847.1c40a233.chunk.js.map