{"version":3,"file":"static/js/69.064c456b.chunk.js","mappings":"kNAEA,MAAMA,EAAiBC,IAMhB,IAADC,EAAAC,EAAAC,EAAAC,EAAA,IANkB,WACtBC,EAAU,cACVC,EAAa,UACbC,EAAS,mBACTC,EAAkB,oBAClBC,GACDT,EACC,MAuBMU,EAAkBC,OAA4B,QAAtBV,EAACI,EAAWO,kBAAU,IAAAX,EAAAA,EAAI,GAClDY,EAAsC,QAA3BX,EAAGG,EAAWS,qBAAa,IAAAZ,OAAA,EAAxBA,EAA0Ba,cACxCC,EACJH,GAAe,EACX,mBACAA,IAAgB,IACd,gBACA,gBAEFI,EAAyBA,CAACC,EAAOC,KACrC,IAAKX,EAAoB,OACzB,MAAMY,EAAUT,OAAOU,SAASX,GAAmBA,EAAkB,EAC/DY,EAAOC,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAKL,EAAUF,IACjDV,EAAmBH,EAAWqB,GAAIJ,EAAMH,IAO1C,OACEQ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qIAAoIC,SAAA,EACjJF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCC,SAAA,EACpDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yEAAwEC,UACrFC,EAAAA,EAAAA,KAAA,OACEF,UAAU,wBACVG,KAAK,OACLC,OAAO,eACPC,QAAQ,YAAWJ,UAEnBC,EAAAA,EAAAA,KAAA,QACEI,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,0NAIRV,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAChDxB,EAAWiC,OACVjC,EAAWkC,SACXlC,EAAWmC,QACX,mBAEJb,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBC,SAAA,CAAC,sBACpB,IACd,IAAIY,KAAKpC,EAAWqC,WAAWC,+BAKtChB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,QACEF,UAAS,qDAAAgB,OA9EaC,KAC9B,OAAQA,GACN,IAAK,MACH,MAAO,+CACT,IAAK,OACH,MAAO,yCACT,IAAK,OACH,MAAO,kDACT,IAAK,YACH,MAAO,4CACT,IAAK,YACH,MAAO,kDACT,QACE,MAAO,8CAiE6DC,CAAuBzC,EAAWwC,OAAQhB,SAEzGxB,EAAWwC,KAAKE,gBAElBpC,OAAOU,SAAShB,EAAW2C,gBAC1BrB,EAAAA,EAAAA,MAAA,QAAMC,UAAU,oGAAmGC,SAAA,CAAC,iBACnGxB,EAAW2C,aAAa,QAG3ClB,EAAAA,EAAAA,KAAA,UACEmB,QAASA,IAAM1C,EAAUF,EAAWqB,IACpCE,UAAU,oCAAmCC,UAE7CC,EAAAA,EAAAA,KAAA,OACEF,UAAU,UACVG,KAAK,OACLC,OAAO,eACPC,QAAQ,YAAWJ,UAEnBC,EAAAA,EAAAA,KAAA,QACEI,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,oCAOZP,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SAAExB,EAAW6C,eAE9CvB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,oCAAmCC,SAAC,gBACjDF,EAAAA,EAAAA,MAAA,KACEC,UAAS,yBAAAgB,QAjGShC,EAiGqCF,EAhG3DE,GAAc,GAAW,iBACzBA,GAAc,GAAW,kBACtB,iBA8F2EiB,SAAA,CAEzElB,OAAOU,SAASX,GAAmBA,EAAkB,SAAI,OAE3DL,EAAW8C,sBACVxB,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uCAAsCC,SAAA,EACnDF,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,eACY,IACZN,KAAK6B,MAAM/C,EAAW8C,oBAAoBH,cAAgB,GAAG,QAEhErB,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,iBACc,IACdN,KAAK6B,MAAM/C,EAAW8C,oBAAoBE,cAAgB,GAAG,QAEhE1B,EAAAA,EAAAA,MAAA,KAAAE,SAAA,CAAG,QACK,IACLN,KAAK6B,MAAM/C,EAAW8C,oBAAoBG,WAAa,GAAG,cAKnE3B,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,oCAAmCC,SAAC,qBACjDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,sCAAqCC,SAC/CxB,EAAWkD,gBAAkBlD,EAAWmD,gBAAkB,iBAKhEnD,EAAWmC,SACVb,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mEAAkEC,SAAA,EAC/EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iCAAgCC,SAC1CxB,EAAWmC,UAEdV,EAAAA,EAAAA,KAAA,KAAGF,UAAU,wBAAuBC,SACjCxB,EAAWkC,SAAWlC,EAAWoD,kBAGtC9B,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,CACW,kBAA5BxB,EAAWqD,eACjB/B,EAAAA,EAAAA,MAAA,KAAGC,UAAU,mCAAkCC,SAAA,CAAC,IAC5ClB,OAAON,EAAWqD,cAAcC,QAAQ,MAGtB,kBAAhB9C,IACNc,EAAAA,EAAAA,MAAA,KAAGC,UAAS,uBAAAgB,OAAyB5B,GAAmBa,SAAA,CACrDhB,GAAe,EAAI,IAAM,GACd,OAAXA,QAAW,IAAXA,OAAW,EAAXA,EAAa8C,QAAQ,GAAG,cAKR,QAAxBxD,EAAAE,EAAWS,qBAAa,IAAAX,OAAA,EAAxBA,EAA0ByD,iBACzBjC,EAAAA,EAAAA,MAAA,KAAGC,UAAU,6BAA4BC,SAAA,CAAC,eAEvClB,OAAON,EAAWS,cAAc8C,eAAeD,QAAQ,UAMhD,QAAfvD,EAAAC,EAAWwD,YAAI,IAAAzD,OAAA,EAAfA,EAAiB0D,WAChBnC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qFAAoFC,SAAA,EACjGC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gCAA+BC,SAAC,kBAC7CC,EAAAA,EAAAA,KAAA,KAAAD,SAAIxB,EAAWwD,KAAKC,UACnBzD,EAAWwD,KAAKE,iBACfpC,EAAAA,EAAAA,MAAA,KAAGC,UAAU,qDAAoDC,SAAA,CAAC,cACpDxB,EAAWwD,KAAKE,sBAMpCpC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oCAAmCC,SAAA,EAChDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,UACEmB,QAASA,IAAM3C,EAAcD,EAAWqB,IACxCE,UAAU,wDAAuDC,SAClE,kBAGDC,EAAAA,EAAAA,KAAA,UACEF,UAAU,qDACVqB,QAASA,IAhKa,SAAC9B,GAAmC,IAAlB6C,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxC,OAAnBxD,QAAmB,IAAnBA,GAAAA,EAAsBJ,EAAWqB,GAAIP,EAAiB6C,EACxD,CA8JyBI,CAAwB,cAAcvC,SACtD,mBAKHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,UACEF,UAAU,yFACVqB,QAASA,IAAMhC,GAAwB,GAAI,kBAAkBY,SAC9D,oBAGDC,EAAAA,EAAAA,KAAA,UACEF,UAAU,sFACVqB,QAASA,IAAMhC,EAAuB,GAAI,YAAYY,SACvD,sBAtMmBjB,OA+M9B,EAAeyD,EAAAA,KAAWtE,G,aCrO1B,MAAMuE,EAAkBtE,IASjB,IATkB,YACvBuE,EAAW,QACXC,EAAO,MACPC,EAAK,UACLlE,EAAS,UACTmE,EAAS,cACTpE,EAAa,mBACbE,EAAkB,oBAClBC,GACDT,EACC,MAAO2E,EAAQC,IAAaC,EAAAA,EAAAA,UAAS,QAC9BC,EAAQC,IAAaF,EAAAA,EAAAA,UAAS,cAiB/BG,GAAsBC,EAAAA,EAAAA,SAAQ,IAC7BC,MAAMC,QAAQZ,GACJ,QAAXI,EAAyBJ,EACtBA,EAAYI,OAAQtE,GAAeA,EAAWwC,OAAS8B,GAFtB,GAGvC,CAACJ,EAAaI,IAEXS,GAAoBH,EAAAA,EAAAA,SAAQ,KAChC,MAAMI,EAAO,IAAIL,GACjB,OAAQF,GACN,IAAK,aACH,OAAOO,EAAKC,KAAK,CAACC,EAAGC,KAAC,IAAAC,EAAAC,EAAA,OAAkB,QAAbD,EAACD,EAAE5E,kBAAU,IAAA6E,EAAAA,EAAI,IAAkB,QAAjBC,EAAKH,EAAE3E,kBAAU,IAAA8E,EAAAA,EAAI,KACpE,IAAK,OACH,OAAOL,EAAKC,KACV,CAACC,EAAGC,IACF,IAAI/C,KAAK+C,EAAE9C,WAAWiD,UAAY,IAAIlD,KAAK8C,EAAE7C,WAAWiD,WAE9D,IAAK,SACH,OAAON,EAAKC,KAAK,CAACC,EAAGC,KACnB,MAAMI,GACJL,EAAEhC,gBACFgC,EAAE/B,gBACF,IACAqC,WAMF,OAJEL,EAAEjC,gBACFiC,EAAEhC,gBACF,IACAqC,WACaC,cAAcF,KAEjC,QACE,OAAOP,IAEV,CAACL,EAAqBF,IAEnBiB,EAAqBC,IACI,oBAAlB1F,GACTA,EAAc0F,IAIZC,EAAgBC,UACK,oBAAd3F,SACHA,EAAUyF,IAIpB,OAAIxB,GACK1C,EAAAA,EAAAA,KAACqE,EAAAA,GAAc,CAACC,KAAK,UAG1B3B,GAEA9C,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sCAAqCC,SAAA,EAClDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAC,mCAGtDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SAAE4C,IAClCC,IACC5C,EAAAA,EAAAA,KAAA,UACEmB,QAASyB,EACT9C,UAAU,2GAA0GC,SACrH,cASPF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8CAA6CC,SAAA,EAC1DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,OAAMC,SAAA,EACnBC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAC,+BAGtDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,iFAO/BC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,gDAA+CC,UAC5DF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,sFAAqFC,SAAA,EAClGF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,oCAAmCC,SAAC,gBAGrDC,EAAAA,EAAAA,KAAA,UACEuE,MAAO1B,EACP2B,SAAWC,GAAM3B,EAAU2B,EAAEC,OAAOH,OACpCzE,UAAU,gIAA+HC,SA3G/H,CACpB,CAAEwE,MAAO,MAAOI,MAAO,mBACvB,CAAEJ,MAAO,MAAOI,MAAO,uBACvB,CAAEJ,MAAO,OAAQI,MAAO,wBACxB,CAAEJ,MAAO,OAAQI,MAAO,wBACxB,CAAEJ,MAAO,YAAaI,MAAO,mBAC7B,CAAEJ,MAAO,YAAaI,MAAO,gBAuGJC,IAAKC,IAClB7E,EAAAA,EAAAA,KAAA,UAA2BuE,MAAOM,EAAON,MAAMxE,SAC5C8E,EAAOF,OADGE,EAAON,cAO1B1E,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,SAAOF,UAAU,oCAAmCC,SAAC,cAGrDC,EAAAA,EAAAA,KAAA,UACEuE,MAAOvB,EACPwB,SAAWC,GAAMxB,EAAUwB,EAAEC,OAAOH,OACpCzE,UAAU,gIAA+HC,SAnHjI,CAClB,CAAEwE,MAAO,aAAcI,MAAO,cAC9B,CAAEJ,MAAO,OAAQI,MAAO,QACxB,CAAEJ,MAAO,SAAUI,MAAO,oBAkHHC,IAAKC,IAChB7E,EAAAA,EAAAA,KAAA,UAA2BuE,MAAOM,EAAON,MAAMxE,SAC5C8E,EAAOF,OADGE,EAAON,mBAU9BvE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,OAAMC,UACnBF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBC,SAAA,CAAC,WAC1BuD,EAAkBlB,OAAO,QAAgB,OAAXK,QAAW,IAAXA,OAAW,EAAXA,EAAaL,SAAU,EAAG,IAAI,mBAMxEkB,EAAkBlB,OAAS,GAC1BpC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,wCAAuCC,SACnDuD,EAAkBsB,IAAKrG,IACtByB,EAAAA,EAAAA,KAAC/B,EAAc,CAEbM,WAAYA,EACZC,cAAeyF,EACfxF,UAAW0F,EACXzF,mBAAoBA,EACpBC,oBAAqBA,GALhBJ,EAAWqB,QAUtBC,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oBAAmBC,SAAA,EAChCC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mFAAkFC,UAC/FC,EAAAA,EAAAA,KAAA,OACEF,UAAU,wBACVG,KAAK,OACLC,OAAO,eACPC,QAAQ,YAAWJ,UAEnBC,EAAAA,EAAAA,KAAA,QACEI,cAAc,QACdC,eAAe,QACfC,YAAa,EACbC,EAAE,0NAIRP,EAAAA,EAAAA,KAAA,MAAIF,UAAU,yCAAwCC,SAAC,8BAGvDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SACnB,QAAX8C,EACG,6FAA4F,MAAA/B,OACtF+B,EAAM,2CAEjBD,IACC5C,EAAAA,EAAAA,KAAA,UACEmB,QAASyB,EACT9C,UAAU,gDAA+CC,SAC1D,2BAQNuD,EAAkBlB,OAAS,IAC1BpC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,mBAAkBC,UAC/BC,EAAAA,EAAAA,KAAA,UACEmB,QAASyB,EACT9C,UAAU,iIAAgIC,SAC3I,8BASX,EAAewC,EAAAA,KAAWC,G,kFC3N1B,MAAMsC,EAAY,CAChBC,MAAO,IACPC,OAAQ,IACRC,KAAM,MAIFC,EAAQ,IAAIC,IAoBZC,EAlBmBC,MACvB,MAAMC,EAAWC,CAAAA,SAAAA,aAAAA,WAAAA,GAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,qBAAAA,EAAAA,cAAAA,GAAYC,uBAC7B,GAAIF,EACF,OAAOA,EAASG,QAAQ,MAAO,IAGjC,MAAMC,EAAuB,OAAVC,EAAAA,SAAU,IAAVA,EAAAA,QAAU,EAAVA,EAAAA,GAAYC,SAC/B,OAAIF,GAA6B,gCAAfA,EACTA,EAAWD,QAAQ,MAAO,IAO5B,QAGYJ,GAEfQ,EAAYC,EAAAA,EAAMC,OAAO,CAC7BC,QAAQ,GAADlF,OAAKsE,EAAY,OACxBa,SAAmB,OAAVN,EAAAA,SAAU,IAAVA,EAAAA,QAAU,EAAVA,EAAAA,GAAYO,UAAW,IAChCC,QAAS,CACP,eAAgB,sBASdC,EAAiBC,IACrB,MAAMC,EAASpB,EAAMqB,IAAIF,GACzB,IAAKC,EAAQ,OAAO,KAEpB,MAAM,KAAEE,EAAI,UAAEC,EAAS,IAAEC,GAAQJ,EACjC,OAAI3F,KAAKgG,MAAQF,EAAYC,GAC3BxB,EAAM0B,OAAOP,GACN,MAGFG,GASHK,EAAgB,SAACR,EAAKG,GAAkC,IAA5BE,EAAGvE,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG2C,EAAUE,OAChDE,EAAM4B,IAAIT,EAAK,CACbG,OACAC,UAAW9F,KAAKgG,MAChBD,OAEJ,EAGMK,EAAc,EAqWdC,EAAiC5C,eAAO6C,EAAkB5H,GAAoC,IAAnB6H,EAAQ/E,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC3F,IACwB,IAADgF,EAAAC,EAArB,OAAY,OAARF,QAAQ,IAARA,GAAAA,EAAUG,aACNxB,EAAUyB,KAAK,gBAADxG,OAAiBoG,EAASG,MAAK,iBAAiB,CAClEE,OAAQL,EAASK,SAAsB,QAAhBJ,GAAIK,EAAAA,EAAAA,aAAY,IAAAL,GAAM,QAANC,EAAZD,EAAcM,YAAI,IAAAL,OAAN,EAAZA,EAAoBxH,IAC/CP,kBACA6C,SAAOwF,EAAAA,EAAAA,GAAA,CACLT,oBACGC,MAGPS,EAAAA,EAAAA,IAAQ,WAAD7G,OAAYzB,EAAe,oCAAAyB,OAAmCmG,IAC9D,CAAEW,SAAS,MAGpBD,EAAAA,EAAAA,IAAQ,iEAAkE,CACxEV,mBACA5H,oBAEK,CAAEuI,SAAS,EAAOC,OAAQ,iBACnC,CAAE,MAAOlF,GAGP,OADAmF,EAAAA,EAAAA,IAAS,6CAA8CnF,GAChD,CAAEiF,SAAS,EAAOjF,MAAOA,EAAMoF,QACxC,CACF,EAiBMC,EAA2B5D,UAA6D,IAAtD,MAAEiD,EAAK,gBAAEhI,EAAe,OAAEkI,EAAM,QAAErF,EAAU,CAAC,GAAG+F,EACtF,IAAK,IAADC,EAAAC,EAAAC,EAAAC,EAMF,OAAoB,QAApBD,SALuBvC,EAAUyB,KAAK,gBAADxG,OAAiBuG,EAAK,iBAAiB,CAC1EE,OAAQA,IAAsB,QAAhBW,GAAIV,EAAAA,EAAAA,aAAY,IAAAU,GAAM,QAANC,EAAZD,EAAcT,YAAI,IAAAU,OAAN,EAAZA,EAAoBvI,IACtCP,kBACA6C,aAEcsE,YAAI,IAAA4B,GAAM,QAANC,EAAbD,EAAe5B,YAAI,IAAA6B,OAAN,EAAbA,EAAqBC,GAC9B,CAAE,MAAO3F,GAEP,MADAmF,EAAAA,EAAAA,IAAS,wCAAyCnF,GAC5CA,CACR,GC5dI4F,EAAgB,SAAChK,GAA2B,IAADiK,EAAAC,EAAAvK,EAAAwK,EAAAC,EAAAV,EAAAW,EAAAxK,EAAAyK,EAAAC,EAAAzK,EAAA,IAAd0K,EAAK5G,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACzC,OAAK5D,EAEE,CACLqB,GAAIrB,EAAWqB,IAAMrB,EAAWyK,mBAAiB,cAAAlI,OAAkBiI,GACnE1B,MAAO9I,EAAW8I,OAAS9I,EAAW0K,SAA6B,QAAvBT,EAAIjK,EAAW2I,gBAAQ,IAAAsB,OAAA,EAAnBA,EAAqBnB,QAAS,KAC9EtG,KAAMxC,EAAWwC,MAAQxC,EAAW2K,QAAU3K,EAAW4K,UAAY,UACrEzI,OAAQnC,EAAWmC,QAAUnC,EAAW6K,QAAU7K,EAAW8K,aAC7D5I,QAASlC,EAAWkC,SAAWlC,EAAW+K,YAAc/K,EAAWiC,OAAS,kBAC5EmB,YAAapD,EAAWkC,SAAWlC,EAAW+K,YAAc/K,EAAWiC,OAAS,kBAChF1B,WAAYD,OAAON,EAAWO,YAAcP,EAAWgL,kBAAoB,GAC3ElI,oBAAqB9C,EAAW8C,sBAA0C,QAAvBoH,EAAIlK,EAAW2I,gBAAQ,IAAAuB,OAAA,EAAnBA,EAAqBpH,sBAAuB,KACnGH,aAAiE,QAArDhD,EAAyB,QAAzBwK,EAAEnK,EAAW2C,oBAAY,IAAAwH,EAAAA,EAAInK,EAAWiL,qBAAa,IAAAtL,EAAAA,EAAI,KACrE2J,OAAQtJ,EAAWsJ,QAAUtJ,EAAWyD,SAAW,uBACnDyH,UAAWlL,EAAWsJ,QAAUtJ,EAAWyD,UAAiC,QAA1B2G,EAAIpK,EAAWmL,mBAAW,IAAAf,OAAA,EAAtBA,EAAwBgB,mBAAoB,GAClGvI,YAAa7C,EAAW6C,aAAe7C,EAAWqL,SAAWrL,EAAWsL,UAAY,GACpFnI,eAAgBnD,EAAWuL,iBAAmBvL,EAAWwL,kBAAoB,SAC7EC,UAAWzL,EAAW0L,YAAc1L,EAAWyL,WAAa,WAC5DE,UAAW3L,EAAW2L,WAAa3L,EAAW4L,SAAW,cACzDC,WAAY7L,EAAW6L,YAAc7L,EAAW8L,wBAA0B,SAC1ElB,SAAU5K,EAAW4K,UAAY5K,EAAW+L,SAAW,UACvDC,YAAahM,EAAWiM,cAAgBjM,EAAWmL,aAAenL,EAAWsL,UAAY,GACzFY,KAAMlM,EAAWkM,MAAQlM,EAAWmM,YAAc,GAClDC,KAAMpM,EAAWoM,MAAQpM,EAAWqM,OAAS,GAC7ChK,UAAWrC,EAAWsM,YAActM,EAAWqC,YAAa,IAAID,MAAOmK,cACvE9L,cAAeT,EAAWS,eAAiBT,EAAWwM,gBAAkB,KACxEnJ,aAA+E,QAAnEqG,EAAyB,QAAzBW,EAAErK,EAAWqD,oBAAY,IAAAgH,EAAAA,EAA4B,QAA5BxK,EAAIG,EAAWS,qBAAa,IAAAZ,OAAA,EAAxBA,EAA0BwD,oBAAY,IAAAqG,EAAAA,EAAI,KACnFlJ,YAA8E,QAAnE8J,EAAwB,QAAxBC,EAAEvK,EAAWQ,mBAAW,IAAA+J,EAAAA,EAA4B,QAA5BzK,EAAIE,EAAWS,qBAAa,IAAAX,OAAA,EAAxBA,EAA0BY,qBAAa,IAAA4J,EAAAA,EAAI,KAClF9G,KAAMxD,EAAWwD,MAAQ,CAAC,EAC1B2H,YAAanL,EAAWmL,aAAenL,EAAWgM,aAAehM,EAAWiM,cAAgB,KAC5FtD,SAAU3I,EAAW2I,UAAY,CAAC,GA7BZ,IA+B1B,EAsBa8D,EAAmBA,KAC9B,MAAM,YAAEC,IAAgBC,EAAAA,EAAAA,KAClB3D,EAAoB,OAAX0D,QAAW,IAAXA,OAAW,EAAXA,EAAarL,GACtBuL,GAAchI,EAAAA,EAAAA,SAAQ,KAAiB,OAAX8H,QAAW,IAAXA,OAAW,EAAXA,EAAaG,UAAW,CAAC,EAAG,CAACH,KACzD,WAAEI,IAAeC,EAAAA,EAAAA,OAEhB7I,EAAa8I,IAAkBxI,EAAAA,EAAAA,UAAS,KACxCL,EAAS8I,IAAczI,EAAAA,EAAAA,WAAS,IAChCJ,EAAO8I,IAAY1I,EAAAA,EAAAA,UAAS,OAC5B2I,EAAcC,IAAmB5I,EAAAA,EAAAA,UAAS,CAAC,GAE5C6I,GAAsBC,EAAAA,EAAAA,aAAY,KAAO,IAADC,EAC5C,OAAKvE,EAEE,CACLA,SACAwE,MAAkB,OAAXd,QAAW,IAAXA,OAAW,EAAXA,EAAac,MACpBC,WAAsB,OAAXb,QAAW,IAAXA,OAAW,EAAXA,EAAaa,aAAwB,OAAXf,QAAW,IAAXA,GAA0B,QAAfa,EAAXb,EAAagB,qBAAa,IAAAH,OAAf,EAAXA,EAA4BE,WACjEE,eAA0B,OAAXf,QAAW,IAAXA,OAAW,EAAXA,EAAagB,kBAA6B,OAAXhB,QAAW,IAAXA,OAAW,EAAXA,EAAae,eAC3DE,iBAA4B,OAAXjB,QAAW,IAAXA,OAAW,EAAXA,EAAakB,oBAA+B,OAAXlB,QAAW,IAAXA,OAAW,EAAXA,EAAaiB,kBAAmB,GAClFE,sBAAiC,OAAXnB,QAAW,IAAXA,OAAW,EAAXA,EAAaoB,yBAAoC,OAAXpB,QAAW,IAAXA,OAAW,EAAXA,EAAamB,sBACzEE,WAAsB,OAAXrB,QAAW,IAAXA,OAAW,EAAXA,EAAaqB,YAAa,GACrCC,yBAAoC,OAAXtB,QAAW,IAAXA,OAAW,EAAXA,EAAasB,0BAA2B,EACjEvF,UAAqB,OAAXiE,QAAW,IAAXA,OAAW,EAAXA,EAAajE,WAAY,CAAC,GAXlB,MAanB,CAAC+D,EAAa1D,EAAQ4D,IAEnBuB,GAAkBb,EAAAA,EAAAA,aAAYzH,UAClC,IAAKmD,EAEH,YADAgE,EAAe,IAIjB,MAAMoB,EAAiBf,IACvB,GAAKe,EAAL,CAEAnB,GAAW,GACXC,EAAS,MAET,IACE,MAAMjF,QDZiBpC,eAAO+G,GAA+B,IAADyB,EAAAC,EAAA,IAAjBC,EAAO3K,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC1D,MAAM,SACJ4K,GAAW,EAAI,SACfC,EAAWlI,EAAUE,QACnB8H,EAEEvF,GACO,OAAX4D,QAAW,IAAXA,OAAW,EAAXA,EAAa5D,UACF,OAAX4D,QAAW,IAAXA,OAAW,EAAXA,EAAavL,MACF,OAAXuL,QAAW,IAAXA,OAAW,EAAXA,EAAa8B,WACD,QADQL,GACpBpF,EAAAA,EAAAA,aAAY,IAAAoF,GAAM,QAANC,EAAZD,EAAcnF,YAAI,IAAAoF,OAAN,EAAZA,EAAoBjN,KACpB,YAEIsN,EAAQ,sBAAApM,OAAyByG,GAEvC,GAAIwF,EAAU,CACZ,MAAMzG,EAASF,EAAc8G,GAC7B,GAAI5G,EAEF,OADAqB,EAAAA,EAAAA,IAAQ,wCACRD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYpB,GAAM,IAAE6G,SAAS,GAEjC,CAEA,IAAK,IAADC,EAAAC,EAAAC,EAAAC,EAAAC,GACF7F,EAAAA,EAAAA,IAAQ,iDAAD7G,OAAkDyG,IAEzD,MAAMkG,QAAiB5H,EAAUyB,KAAK,eAAgB,CACpDC,SACA6D,QAASD,EACT2B,QAAS,CACPY,MAAOZ,EAAQY,OAASZ,EAAQa,OAAS,KAIvCzL,GAAuB,QAAbkL,EAAAK,EAASjH,YAAI,IAAA4G,OAAA,EAAbA,EAAe5G,OAAQ,CAAC,EAClC/D,EAAcP,EAAQO,aAAe,GAErCmL,EAAS,CACbnL,cACAyE,SAAU,CACRwG,MAAoB,QAAfL,EAAEnL,EAAQwL,aAAK,IAAAL,EAAAA,EAAI5K,EAAYL,OACpCqE,UAAwB,QAAf6G,EAAEG,EAASjH,YAAI,IAAA8G,OAAA,EAAbA,EAAe7G,UAC1BsB,SAAsB,QAAbwF,EAAAE,EAASjH,YAAI,IAAA+G,OAAA,EAAbA,EAAexF,WAAwB,QAAjByF,EAAIC,EAASjH,YAAI,IAAAgH,OAAA,EAAbA,EAAeK,UAQtD,OAJId,GACFlG,EAAcqG,EAAUU,EAAQZ,GAG3BY,CACT,CAAE,MAAOjL,IACPmF,EAAAA,EAAAA,IAAS,qCAAsCnF,GAE/C,MAAM2D,EAASF,EAAc8G,GAC7B,GAAI5G,EAEF,OADAqB,EAAAA,EAAAA,IAAQ,8CACRD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYpB,GAAM,IAAEwH,QAAQ,IAqC9B,MAAMnL,CACR,CACF,CCpFyBoL,CAAqBpB,EAAgB,CAAEI,UAAU,IAC9DiB,EA7DkB9L,KAC5B,IAAKA,EAAS,MAAO,GAErB,IAAI+L,EAAW,GAYf,OAVI7K,MAAMC,QAAQnB,GAChB+L,EAAW/L,EACFkB,MAAMC,QAAe,OAAPnB,QAAO,IAAPA,OAAO,EAAPA,EAASO,aAChCwL,EAAW/L,EAAQO,YACVW,MAAMC,QAAe,OAAPnB,QAAO,IAAPA,OAAO,EAAPA,EAASgM,iBAChCD,EAAW/L,EAAQgM,gBACV9K,MAAMC,QAAe,OAAPnB,QAAO,IAAPA,OAAO,EAAPA,EAASiM,UAChCF,EAAW/L,EAAQiM,QAGdF,EACJrJ,IAAI2D,GACJ1F,OAAOuL,UA4CaC,CAAqB7H,GAExC,GADA+E,EAAeyC,GACXA,EAAW5L,OAAQ,CACrB,MAAMkM,EAAiBN,EAAWO,OAAO,CAACC,EAAKC,KACzCA,EAAK/E,cACP8E,EAAIC,EAAK7O,IAAM6O,EAAK/E,aAEf8E,GACN,CAAC,GACAE,OAAOC,KAAKL,GAAgBlM,QAC9BuJ,EAAiBiD,IAAIlH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWkH,GAASN,GAE7C,CACKN,EAAW5L,QACdiJ,EAAW,wFAA+E,OAE9F,CAAE,MAAOwD,GACPC,QAAQnM,MAAM,gCAAiCkM,GAC/CpD,EAASoD,EAAI9G,SAAW,kCACxBsD,EAAWwD,EAAI9G,SAAW,iCAAkC,QAC9D,CAAC,QACCyD,GAAW,EACb,CA7B2B,GA8B1B,CAACI,EAAqBP,EAAY9D,KAErCwH,EAAAA,EAAAA,WAAU,KACRrC,KACC,CAACA,IAEJ,MAAMsC,GAAUnD,EAAAA,EAAAA,aAAY,IACnBa,IACN,CAACA,IAEEuC,GAAoBpD,EAAAA,EAAAA,aACxBzH,UACE,IAAKF,EAAc,OAEnB,MAAMQ,EAASjC,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GACtDqH,EAAgBqD,GAASA,EAAK/L,OAAQ4L,GAASA,EAAK7O,KAAOsE,IAE3D,IACY,OAANQ,QAAM,IAANA,GAAAA,EAAQ2C,YACJW,EAAyB,CAC7BX,MAAO3C,EAAO2C,MACdhI,gBAAiB,UACjBkI,SACArF,QAAS,CAAEgC,wBAGP8C,EAA+B9C,EAAc,UAEvD,CAAE,MAAO2K,GAAM,IAADM,EAAAC,EACC,QAAbD,GAAAC,EAAAN,SAAQO,aAAK,IAAAF,GAAbA,EAAAG,KAAAF,EAAgB,oCAAqCP,EACvD,CAEAxD,EAAW,2CAA6B,SAE1C,CAACA,EAAY5I,EAAa8E,IAGtBgI,GAAiB1D,EAAAA,EAAAA,aACrBzH,UACE,IAAKF,EAAc,OACnB,MAAMQ,EAASjC,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GACtD,IACY,OAANQ,QAAM,IAANA,GAAAA,EAAQ2C,YACJW,EAAyB,CAC7BX,MAAO3C,EAAO2C,MACdhI,gBAAiB,OACjBkI,SACArF,QAAS,CAAEgC,wBAGP8C,EAA+B9C,EAAc,OAEvD,CAAE,MAAO2K,GAAM,IAADW,EAAAC,EACC,QAAbD,GAAAC,EAAAX,SAAQO,aAAK,IAAAG,GAAbA,EAAAF,KAAAG,EAAgB,iCAAkCZ,EACpD,GAEF,CAACpM,EAAa8E,IAGVmI,GAAoB7D,EAAAA,EAAAA,aACxBzH,eAAOF,EAAc7E,GAAmC,IAAlB6C,EAAOC,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAC/C,IAAK+B,IAAiB7E,EAAiB,OACvC,MAAMqF,EAASjC,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GACtD,GAAW,OAANQ,QAAM,IAANA,GAAAA,EAAQ2C,MACb,UACQW,EAAyB,CAC7BX,MAAO3C,EAAO2C,MACdhI,kBACAkI,SACArF,SAAOwF,EAAAA,EAAAA,GAAA,CACLxD,gBACGhC,IAGT,CAAE,MAAOS,GAAQ,IAADgN,EAAAC,EACD,QAAbD,GAAAC,EAAAd,SAAQO,aAAK,IAAAM,GAAbA,EAAAL,KAAAM,EAAgB,wCAAyCjN,EAC3D,CACF,EACA,CAACF,EAAa8E,IAGVsI,GAAmBhE,EAAAA,EAAAA,aACvBzH,MAAOF,EAAcpF,KACnB,IAAKoF,QAA+B7B,IAAfvD,EAA0B,MAAO,CAAE8I,SAAS,GACjE,MAAMlD,EAASjC,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GACtD,GAAW,OAANQ,QAAM,IAANA,IAAAA,EAAQ2C,MAEX,OADAgE,EAAW,iEAAkE,WACtE,CAAEzD,SAAS,GAGpB,MAAMkI,EAAiBrQ,KAAKC,IAAI,EAAGD,KAAKE,IAAI,IAAKd,OAAOC,KAExD,IAaE,YDmOgCsF,WAA0C,IAAnC,MAAEiD,EAAK,WAAEvI,EAAU,OAAEyI,GAAQrJ,EAC1E,IAAK,IAAD6R,EAAAC,EAAAC,EAAAC,EACF,MAAMhO,EAAU,CACdpD,aACAyI,OAAQA,IAAsB,QAAhBwI,GAAIvI,EAAAA,EAAAA,aAAY,IAAAuI,GAAM,QAANC,EAAZD,EAActI,YAAI,IAAAuI,OAAN,EAAZA,EAAoBpQ,KAIxC,OAAoB,QAApBqQ,SADuBpK,EAAUsK,MAAM,gBAADrP,OAAiBuG,EAAK,eAAenF,IAC3DsE,YAAI,IAAAyJ,GAAM,QAANC,EAAbD,EAAezJ,YAAI,IAAA0J,OAAN,EAAbA,EAAqB5H,GAC9B,CAAE,MAAO3F,GAEP,MADAmF,EAAAA,EAAAA,IAAS,wCAAyCnF,GAC5CA,CACR,GC3PYyN,CAAgC,CACpC/I,MAAO3C,EAAO2C,MACdvI,WAAYgR,EACZvI,WAGFgE,EAAgBqD,GACdA,EAAKhK,IAAK6J,GACRA,EAAK7O,KAAOsE,GAAYwD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAQ+G,GAAI,IAAE3P,WAAYgR,IAAmBrB,IAGzEpD,EAAW,0CAA2C,WAC/C,CAAEzD,SAAS,EACpB,CAAE,MAAOjF,GAEP,OADA0I,EAAW1I,EAAMoF,SAAW,+BAAgC,SACrD,CAAEH,SAAS,EAAOjF,QAC3B,GAEF,CAAC0I,EAAY5I,EAAa8E,IAGtB8I,GAAiBxE,EAAAA,EAAAA,aACrBzH,MAAOF,EAAcoM,EAAQC,KAC3B,GAAKrM,GAAiBoM,EACtB,UD6IiBlM,eAAO6C,EAAkBuJ,GAA4B,IAADC,EAAAC,EACzE,MAAMnJ,EAASiJ,EAASjJ,SAAsB,QAAhBkJ,GAAIjJ,EAAAA,EAAAA,aAAY,IAAAiJ,GAAM,QAANC,EAAZD,EAAchJ,YAAI,IAAAiJ,OAAN,EAAZA,EAAoB9Q,KAAM,YAE5D,IAAK,IAAD+Q,GACFhJ,EAAAA,EAAAA,IAAQ,0CAAD7G,OAA2CmG,IAGlD,MAAM,KAAET,EAAI,MAAE7D,SAAgBiO,EAAAA,EAC3BC,IAAI,iCAAkC,CACrC7H,kBAAmB/B,EACnBgG,QAAS1F,EACT+I,OAAQE,EAASF,OACjBC,QAASC,EAASD,SAAW,KAC7BrJ,SAAU,CACR4J,WAA8B,qBAAXC,OAAyC,QAAnBJ,EAAGI,OAAOC,iBAAS,IAAAL,OAAA,EAAhBA,EAAkBM,UAAY,SAC1ExK,WAAW,IAAI9F,MAAOmK,iBAI5B,GAAInI,EAAO,MAAMA,EAGjB,OADAgF,EAAAA,EAAAA,IAAQ,sDAAD7G,OAAuDmG,IACvDT,CACT,CAAE,MAAO7D,GAaP,MAZAmF,EAAAA,EAAAA,IAAS,gDAADhH,OAAiDmG,EAAgB,KAAKtE,GAYxEA,CACR,CACF,CClLcuO,CAAehN,EAAc,CAAEoM,SAAQC,UAAShJ,WACtD8D,EAAW,4BAA6B,iBAClCqE,EAAkBxL,EAAc,WAAY,CAAEoM,SAAQC,WAC9D,CAAE,MAAO1B,GACPC,QAAQnM,MAAM,6BAA8BkM,GAC5CxD,EAAWwD,EAAI9G,SAAW,6BAA8B,QAC1D,GAEF,CAACsD,EAAYqE,EAAmBnI,IAG5B4J,GAAiBtF,EAAAA,EAAAA,aACrBzH,UACE,GAAIsH,EAAaxH,GACf,OAAOwH,EAAaxH,GAEtB,MAAM3F,EAAakE,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GAC1D,IAAK3F,EACH,MAAM,IAAI6S,MAAM,yBAElB,MAAM1H,EAAcnL,EAAWmL,aAAenL,EAAWsJ,QAAU,8BAEnE,OADA8D,EAAiBiD,IAAIlH,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAWkH,GAAI,IAAE,CAAC1K,GAAewF,KAC/CA,GAET,CAACgC,EAAcjJ,IAGjB,MAAO,CACLA,cACAC,UACAC,QACAqM,UACAC,oBACAM,iBACAM,mBACAsB,iBACAd,iBACAX,sBCjRE2B,EAAS,CACbC,OAAQ,CAAEC,QAAS,EAAGC,EAAG,IACzBC,QAAS,CAAEF,QAAS,EAAGC,EAAG,EAAGE,WAAY,CAAEC,SAAU,GAAKC,KAAM,aAwiBlE,EA7hBwBC,KAAO,IAADC,EAAAC,EAAAC,EAAAC,EAC5B,MAAM,YACJxP,EAAW,QACXC,EAAO,MACPC,EAAK,QACLqM,EAAO,kBACPC,EAAiB,eACjBM,EAAc,eACd4B,EAAc,eACdd,EAAc,iBACdR,EAAgB,kBAChBH,GACE1E,KAEGkH,EAAoBC,IAAyBpP,EAAAA,EAAAA,UAAS,OACtD2G,EAAa0I,IAAkBrP,EAAAA,EAAAA,UAAS,OACxCsP,EAAsBC,IAA2BvP,EAAAA,EAAAA,WAAS,IAE1DwP,EAAgBC,IAAqBzP,EAAAA,EAAAA,UAAS,KAC9C0P,EAAuBC,IAA4B3P,EAAAA,EAAAA,WAAS,IAC5D4P,EAAqBC,IAA0B7P,EAAAA,EAAAA,UAAS,MAEzD8P,GAAoB1P,EAAAA,EAAAA,SAAQ,KAChC,IAAKV,EAAYL,OAAQ,OAAO,KAChC,MAAM0Q,EAAQrQ,EAAY8L,OACxB,CAACwE,EAAKxU,IAAewU,GAAOlU,OAAON,EAAWO,aAAe,GAC7D,GAEF,OAAOW,KAAK6B,MAAMwR,EAAQrQ,EAAYL,SACrC,CAACK,IAEEuQ,GAAkB7P,EAAAA,EAAAA,SAAQ,IACJ,OAAtB0P,EAAmC,mBACnCA,GAAqB,GAAW,kBAChCA,GAAqB,GAAW,sBAC7B,wBACN,CAACA,IAEEI,EAAwC,OAAtBJ,EAA0B,GAAA/R,OAC3CrB,KAAKE,IAAIF,KAAKC,IAAImT,EAAmB,GAAI,KAAI,KAChD,KAEEK,GAAsB/P,EAAAA,EAAAA,SAAQ,KAClC,GAAuB,OAAlB+O,QAAkB,IAAlBA,IAAAA,EAAoBlT,cAAe,OAAO,KAC/C,MAAM,aAAE4C,EAAY,cAAE3C,EAAa,cAAE6C,EAAa,aAAEP,GAAiB2Q,EAAmBlT,cAClFmU,EAAc,SAAC5O,GAAuB,IAAhB6O,EAAMjR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,EACnC,MAAMkR,EAAUxU,OAAO0F,GACvB,OAAO1F,OAAOU,SAAS8T,GAAWA,EAAQxR,QAAQuR,GAAU,QAC9D,EAEA,MAAO,CACLxR,aAAcuR,EAAYvR,GAC1B3C,cAAekU,EAAYlU,GAC3B6C,cAAeqR,EAAYrR,GAC3BP,aAAc1C,OAAOU,SAASV,OAAO0C,IAAiB9B,KAAK6B,MAAMzC,OAAO0C,IAAiB,KACzF+R,iBAAkBzU,OAAOI,IAAkB,IAE5C,CAAmB,OAAlBiT,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBlT,iBAExB+P,EAAAA,EAAAA,WAAU,KACR,IAAIwE,GAAY,EAwDhB,MAvDqBnP,WACnBsO,GAAyB,GACzBE,EAAuB,MACvB,IACE,MAAMpM,QFkLYpC,iBAAuC,IAAhCoP,EAAOrR,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EAAG2K,EAAO3K,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAG,CAAC,EACxD,MAAM,SAAE4K,GAAW,EAAI,QAAE0G,EAAU1M,GAAgB+F,GAC7C,QACJ4G,EAAU,GAAE,UACZxJ,EAAY,KAAI,OAChByJ,EAAS,KAAI,iBACbC,GAAmB,EAAI,mBACvBC,GAAqB,EAAI,iBACzBC,GAAmB,GACjBN,EAEEtG,EAAQ,mBAAApM,OAAsB4S,EAAQlQ,OAAOuQ,KAAK,KAAI,KAAAjT,OAAIoJ,EAAS,KAAApJ,OAAI6S,GAG7E,GAAI5G,EAAU,CACZ,MAAMzG,EAASF,EAAc8G,GAC7B,GAAI5G,EAEF,OADAqB,EAAAA,EAAAA,IAAQ,qCACRD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYpB,GAAM,IAAE6G,SAAS,GAEjC,CAGA,MAAM6G,EAAU5P,iBAAmC,IAA5B6P,EAAY9R,UAAAC,OAAA,QAAAC,IAAAF,UAAA,GAAAA,UAAA,GAAGsR,EACpC,KACE9L,EAAAA,EAAAA,IAAQ,yCAA0C,CAChD+L,UACAxJ,YACAyJ,SACAC,mBACAC,qBACAC,qBAIF,MAAM,KAAEtN,EAAI,MAAE7D,SAAgBiO,EAAAA,EAC3BC,IAAI,sBAAuB,CAC1BqD,UAAWR,EACXS,YAAajK,EACbkK,SAAUT,EACVU,oBAAqBT,EACrBU,sBAAuBT,EACvBU,oBAAqBT,IAGzB,GAAInR,EAAO,MAAMA,EAOjB,OAJIoK,GAAYvG,GACdK,EAAcqG,EAAU1G,EAAM1B,EAAUC,OAGnCyB,CACT,CAAE,MAAO7D,GAIP,IAHAmF,EAAAA,EAAAA,IAAS,kCAAmCnF,GAGxCsR,EAAe,EAAG,CACpB,MAAMO,EArPM,KAqPiBf,EAAUQ,EAAe,GAGtD,OAFAtM,EAAAA,EAAAA,IAAQ,qCAAD7G,OAAsC0T,EAAK,WAAA1T,OAAUmT,EAAY,0BAClE,IAAIQ,QAAQC,GAAWC,WAAWD,EAASF,IAC1CR,EAAQC,EAAe,EAChC,CAGA,MAAM3N,EAASF,EAAc8G,GAC7B,GAAI5G,EAEF,OADAqB,EAAAA,EAAAA,IAAQ,2CACRD,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAYpB,GAAM,IAAEwH,QAAQ,IAkC9B,MAAMnL,CACR,CACF,EAEA,OAAOqR,GACT,CE7R2BY,CAAkB,CAAC,EAAG,CAAE7H,UAAU,IACrD,IAAKwG,EAAW,OAEhB,MAeMvF,EAfa9L,IACZA,EACDkB,MAAMC,QAAQnB,GAAiBA,EAC/BkB,MAAMC,QAAe,OAAPnB,QAAO,IAAPA,OAAO,EAAPA,EAAS2S,UAAkB3S,EAAQ2S,SAC9CnG,OAAOoG,QAAQ5S,GAAS0C,IAAI1G,IAAA,IAAEmI,EAAK9B,GAAMrG,EAAA,MAAM,CACpDsC,MAAO6F,EAAIZ,QAAQ,KAAM,KAAKA,QAAQ,QAAUsP,GAAMA,EAAE9T,eACxDG,YACmB,kBAAVmD,EACHA,EACAyQ,KAAKC,UAAU1Q,EAAO,KAAM,GAClC2Q,OAAQ,SACRC,KAAM,kBAVa,GAcJC,CAAU5O,GAC1B5B,IAAKyQ,IAAO,CACX7U,MAAO6U,EAAQ7U,OAAS,aACxBY,YACEiU,EAAQjU,aACRiU,EAAQrT,SACR,kCACFkT,OACEG,EAAQH,SACPG,EAAQC,MACLD,EAAQC,MAAQ,GACd,OACAD,EAAQC,MAAQ,GAChB,SACA,MACF,UACNH,KAAME,EAAQF,MAAQ,kBAEvBI,MAAM,EAAG,GAEZ/C,EAAkBxE,EACpB,CAAE,MAAOa,GACP,IAAK0E,EAAW,OAChBX,EAAuB/D,EAAI9G,SAAW,qCACxC,CAAC,QACKwL,GACFb,GAAyB,EAE7B,GAGF8C,GAEO,KACLjC,GAAY,IAEb,IAEH,MAoBMpP,EAAgBC,gBACd6K,EAAkB/K,IACF,OAAlBgO,QAAkB,IAAlBA,OAAkB,EAAlBA,EAAoBtS,MAAOsE,IAC7BiO,EAAsB,MACtBC,EAAe,QAIbqD,EAAmBA,KACvBtD,EAAsB,MACtBC,EAAe,OAGXsD,EAAiBtR,UAChB8N,SACC7B,EAAe6B,EAAmBtS,GAAI0Q,IAW9C,OACEzQ,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2GAA0GC,SAAA,EACvHC,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CACT9V,UAAU,+GACV+V,QAAS,CAAErE,EAAG,CAAC,EAAG,GAAI,GAAIsE,EAAG,CAAC,EAAG,GAAI,IACrCpE,WAAY,CAAEqE,OAAQC,IAAUrE,SAAU,GAAIC,KAAM,gBAEtD5R,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CACT9V,UAAU,6HACV+V,QAAS,CAAErE,EAAG,CAAC,GAAI,GAAI,GAAIsE,EAAG,CAAC,GAAI,GAAI,IACvCpE,WAAY,CAAEqE,OAAQC,IAAUrE,SAAU,GAAIC,KAAM,gBAEtD5R,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CACT9V,UAAU,iHACV+V,QAAS,CAAErE,EAAG,CAAC,EAAG,GAAI,GAAIsE,EAAG,CAAC,EAAG,GAAI,IACrCpE,WAAY,CAAEqE,OAAQC,IAAUrE,SAAU,GAAIC,KAAM,YAAa4C,MAAO,MAG1E3U,EAAAA,EAAAA,MAAA,QAAMC,UAAU,gFAA+EC,SAAA,EAC7FC,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CACTK,SAAU5E,EACV6E,QAAQ,SACRL,QAAQ,UACR/V,UAAU,eAAcC,UAExBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,+DAA8DC,SAAA,EAC3EF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,+IAA8IC,SAAC,wCAG7JC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qCAAoCC,SAAC,6EAIpDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8BAA6BC,SAAA,EAC1CC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CAACC,QAAQ,QAAQ9R,KAAK,UAAU+R,GAAIC,EAAAA,GAAMC,GAAG,aAAYxW,SAAC,mCAGtEC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CAACC,QAAQ,UAAU9R,KAAK,UAAUnD,QAAS6N,EAASwH,SAAU9T,EAAQ3C,SAC/E2C,EAAU,mBAAgB,2CAMnC1C,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CAACK,SAAU5E,EAAQ6E,QAAQ,SAASL,QAAQ,UAAU/V,UAAU,eAAcC,UACvFF,EAAAA,EAAAA,MAAC4W,EAAAA,EAAS,CAACL,QAAQ,SAASM,QAAQ,QAAQC,MAAI,EAAA5W,SAAA,EAC9CF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qEAAoEC,SAAA,EACjFF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAC,yBACtDC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gBAAeC,SAAC,oFAI/BF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yCAAwCC,SAC9B,OAAtB8S,EAA0B,GAAA/R,OAAM+R,EAAiB,KAAM,YAE1D7S,EAAAA,EAAAA,KAAA,OAAKF,UAAU,yBAAwBC,SAAEiT,WAG7ChT,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2DAA0DC,UACvEC,EAAAA,EAAAA,KAAA,OACEF,UAAU,8FACV8W,MAAO,CAAEC,MAAO5D,aAMxBpT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wCAAuCC,SAAA,EACpDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0BAAyBC,UACtCC,EAAAA,EAAAA,KAACwC,EAAe,CACdC,YAAaA,EACbC,QAASA,EACTC,MAAOA,EACPlE,UAAW0F,EACXvB,UAAWoM,EACXxQ,cA5HiB4F,UAC3B,MAAM7F,EAAakE,EAAYyM,KAAMT,GAASA,EAAK7O,KAAOsE,GAC1D,GAAK3F,EAAL,CAEA4T,EAAsB5T,GACtB6T,EAAe,MACfE,GAAwB,GAExB,UACQ/C,EAAerL,SACfwL,EAAkBxL,EAAc,gBACtC,MAAM0J,QAAeuD,EAAejN,GACpCkO,EAAexE,GAAU,oCAC3B,CAAE,MAAOiB,GACPuD,EAAevD,EAAI9G,SAAW,iCAChC,CAAC,QACCuK,GAAwB,EAC1B,CAfuB,GA2Hb5T,mBAvFmB0F,MAAOF,EAAc4S,EAAgBzX,KAClE,IAAK6E,QAAmC7B,IAAnByU,EAA8B,OACnD,MAAMlJ,QAAeiC,EAAiB3L,EAAc4S,GAC1C,OAANlJ,QAAM,IAANA,GAAAA,EAAQhG,SAAWvI,SACfqQ,EAAkBxL,EAAc7E,EAAiB,CAAEyX,oBAoFjDnY,oBAAqB+Q,OAIzB7P,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CAACK,SAAU5E,EAAQ6E,QAAQ,SAASL,QAAQ,UAAS9V,UAC9DF,EAAAA,EAAAA,MAAC4W,EAAAA,EAAS,CAACL,QAAQ,WAAWM,QAAQ,QAAQK,aAAW,EAAAhX,SAAA,EACvDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,mCAAkCC,SAAC,wBACjDC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gEAA+DC,SAC5E0S,EAAwB,UAAY,YAGxCA,IACCzS,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCC,EAAAA,EAAAA,KAACqE,EAAAA,GAAc,CAACC,KAAK,aAGvBmO,GAAyBE,IACzB3S,EAAAA,EAAAA,KAAA,OAAKF,UAAU,uBAAsBC,SAClC4S,KAGHF,IAA0BE,IAC1B9S,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,CACvBwS,EAAe3N,IAAI,CAACyQ,EAAStM,KAC5BlJ,EAAAA,EAAAA,MAAA,OAAiBC,UAAU,mDAAkDC,SAAA,EAC3EF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,yCAAwCC,SAAA,EACrDC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,UAASC,SAAEsV,EAAQF,QACnCnV,EAAAA,EAAAA,KAAA,QACEF,UAAS,kCAAAgB,OACY,SAAnBuU,EAAQH,OACJ,6BACmB,QAAnBG,EAAQH,OACR,iCACA,oCACHnV,SAEFsV,EAAQH,aAGblV,EAAAA,EAAAA,KAAA,MAAIF,UAAU,sCAAqCC,SAAEsV,EAAQ7U,SAC7DR,EAAAA,EAAAA,KAAA,KAAGF,UAAU,4CAA2CC,SACrDsV,EAAQjU,gBAjBH2H,KAqBVwJ,EAAenQ,SACfpC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,wBAAuBC,SAAC,mFAS/CC,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CAACK,SAAU5E,EAAQ6E,QAAQ,SAASL,QAAQ,UAAS9V,UAC9DF,EAAAA,EAAAA,MAAC4W,EAAAA,EAAS,CAACL,QAAQ,SAASM,QAAQ,QAAQC,MAAI,EAAA5W,SAAA,EAC9CC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAC,kBACtDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,UACxBF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,oCAAmCC,SAAA,EAChDC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,gBAAeC,SAAC,wBAChCC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,aAAYC,SACzB0C,EAAYL,OAAM,GAAAtB,OAAMrB,KAAKE,IAAI,IAA0B,GAArB8C,EAAYL,QAAY,KAAM,eAGzEpC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,sCAAqCC,UAClDC,EAAAA,EAAAA,KAAA,OACEF,UAAU,gEACV8W,MAAO,CAAEC,MAAOpU,EAAYL,OAAM,GAAAtB,OAAMrB,KAAKE,IAAI,IAA0B,GAArB8C,EAAYL,QAAY,KAAM,gBAK5FpC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CAACE,GAAIC,EAAAA,GAAMC,GAAG,aAAaH,QAAQ,QAAQtW,UAAU,cAAaC,SAAC,8CAMnFC,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CAACK,SAAU5E,EAAQ6E,QAAQ,SAASL,QAAQ,UAAS9V,UAC9DF,EAAAA,EAAAA,MAAC4W,EAAAA,EAAS,CAACL,QAAQ,UAAUM,QAAQ,QAAO3W,SAAA,EAC1CC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,wCAAuCC,SAAC,mBACtDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,MAACsW,EAAAA,EAAW,CAACC,QAAQ,QAAQtW,UAAU,uBAAuBuW,GAAIC,EAAAA,GAAMC,GAAG,cAAaxW,SAAA,EACtFC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,OAAMC,SAAC,iBAAS,iCAGlCF,EAAAA,EAAAA,MAACsW,EAAAA,EAAW,CAACC,QAAQ,QAAQtW,UAAU,uBAAuBuW,GAAIC,EAAAA,GAAMC,GAAG,cAAaxW,SAAA,EACtFC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,OAAMC,SAAC,iBAAS,6BAGlCF,EAAAA,EAAAA,MAACsW,EAAAA,EAAW,CAACC,QAAQ,QAAQtW,UAAU,uBAAuBuW,GAAIC,EAAAA,GAAMC,GAAG,aAAYxW,SAAA,EACrFC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,OAAMC,SAAC,iBAAS,uBAGlCF,EAAAA,EAAAA,MAACsW,EAAAA,EAAW,CAACC,QAAQ,QAAQtW,UAAU,uBAAuBuW,GAAIC,EAAAA,GAAMC,GAAG,QAAOxW,SAAA,EAChFC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,OAAMC,SAAC,iBAAS,6CAU9CC,EAAAA,EAAAA,KAACgX,EAAAA,EAAK,CACJC,OAAQ7I,QAAQ8D,GAChBgF,QAASzB,EACTnR,KAAK,QACL9D,MAAO0R,EAAkB,GAAApR,OAAMoR,EAAmBxR,QAAUwR,EAAmB1R,MAAK,sBAAkB,GAAGT,SAExGmS,IACCrS,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,qEAAoEC,SAAA,EACjFF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,yBAC7DC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,mCAAkCC,SAAEmS,EAAmBnR,WAEtElB,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,gBAC7DF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,uCAAsCC,SAAA,CAChDlB,OAAOqT,EAAmBpT,aAAe,EAAE,WAGhDe,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,eAC7DC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,wBAAuBC,SACjCmS,EAAmBhI,WAAagI,EAAmB/H,SAAW,uBAKrEtK,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2CAA0CC,SAAC,oBACzDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iEAAgEC,SAC5EsS,GACCrS,EAAAA,EAAAA,KAAA,OAAKF,UAAU,2BAA0BC,UACvCC,EAAAA,EAAAA,KAACqE,EAAAA,GAAc,CAACC,KAAK,aAGvBtE,EAAAA,EAAAA,KAAAmX,EAAAA,SAAA,CAAApX,SACG2J,GAAsC,kBAAhBA,GACrB7J,EAAAA,EAAAA,MAAA,OAAKC,UAAU,kCAAiCC,SAAA,CAC7C2J,EAAY0N,WACXpX,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qCAAoCC,SAC9C2J,EAAY0N,WAGhB1N,EAAYC,mBACX9J,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4BAA2BC,SAAC,mBAAsB,IACjE2J,EAAYC,oBAGhBD,EAAY2N,uBACXxX,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4BAA2BC,SAAC,sBAAyB,IACpE2J,EAAY2N,wBAGhB3N,EAAY4N,sBACXzX,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4BAA2BC,SAAC,oBAAuB,IAClE2J,EAAY4N,uBAGhB5N,EAAY1K,gBACXa,EAAAA,EAAAA,MAAA,KAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,QAAMF,UAAU,4BAA2BC,SAAC,oBAAuB,IAClE2J,EAAY1K,iBAGhB0K,EAAY6N,cACX1X,EAAAA,EAAAA,MAAA,OAAKC,UAAU,2DAA0DC,SAAA,EACvEF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,yBAAwBC,SAAA,CAAC,sBACrB2J,EAAY8N,oBAAsB,cAEnDxX,EAAAA,EAAAA,KAAA,KAAGF,UAAU,qBAAoBC,SAC9B2J,EAAY6N,qBAMrBvX,EAAAA,EAAAA,KAAA,KAAGF,UAAU,4DAA2DC,SACrE2J,GAAe,6CAQ3BwJ,IACCrT,EAAAA,EAAAA,MAAA,OAAKC,UAAU,mDAAkDC,SAAA,EAC/DC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2CAA0CC,SAAC,yBACzDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,8DAA6DC,SAAA,EAC1EF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,mBAC7DF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,qCAAoCC,SAAA,CAAC,IAAEmT,EAAoBtR,oBAE1E/B,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,YAC7DF,EAAAA,EAAAA,MAAA,KAAGC,UAAS,2BAAAgB,OAA6BoS,EAAoBI,iBAAmB,mBAAqB,iBAAkBvT,SAAA,CACpHmT,EAAoBI,iBAAmB,IAAM,GAC7CJ,EAAoBjU,cAAc,WAGvCY,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,oBAC7DF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,qCAAoCC,SAAA,CAAC,IAAEmT,EAAoBpR,qBAE1EjC,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,gDAA+CC,SAAC,kBAC7DF,EAAAA,EAAAA,MAAA,KAAGC,UAAU,qCAAoCC,SAAA,CACd,QADc+R,EAC9CoB,EAAoB3R,oBAAY,IAAAuQ,EAAAA,EAAI,SAAI,sBAOnDjS,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2CAA0CC,SAAC,0BACzDF,EAAAA,EAAAA,MAAA,MAAIC,UAAU,wDAAuDC,SAAA,EACjEmS,EAAmBzH,MAAQ,IAAI7F,IAAI,CAAC6S,EAAK1O,KACzClJ,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAyB,UAAG0X,IAAG,OAAA3W,OAAfiI,MAEhBmJ,EAAmBvH,MAAQ,IAAI/F,IAAI,CAAC8S,EAAK3O,KACzClJ,EAAAA,EAAAA,MAAA,MAAAE,SAAA,CAAyB,gBAAI2X,IAAG,OAAA5W,OAAhBiI,OAEO,QAAxBgJ,EAACG,EAAmBzH,YAAI,IAAAsH,GAAvBA,EAAyB3P,WAAkC,QAAxB4P,EAACE,EAAmBvH,YAAI,IAAAqH,GAAvBA,EAAyB5P,UAC7DpC,EAAAA,EAAAA,KAAA,MAAAD,SAAI,oEAKTqD,MAAMC,QAA+B,QAAxB4O,EAACC,EAAmBnQ,YAAI,IAAAkQ,OAAA,EAAvBA,EAAyB0F,QAAUzF,EAAmBnQ,KAAK4V,MAAMvV,OAAS,IACvFvC,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,2CAA0CC,SAAC,sBACzDC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,YAAWC,SACvBmS,EAAmBnQ,KAAK4V,MAAMpC,MAAM,EAAG,GAAG3Q,IAAI,CAAC6J,EAAMmJ,KACpD/X,EAAAA,EAAAA,MAAA,KAEEgY,KAAMpJ,EAAKqJ,IACXpT,OAAO,SACPqT,IAAI,sBACJjY,UAAU,iGAAgGC,SAAA,EAE1GC,EAAAA,EAAAA,KAAA,KAAGF,UAAU,wCAAuCC,SAAE0O,EAAK2I,YAC3DvX,EAAAA,EAAAA,MAAA,KAAGC,UAAU,wBAAuBC,SAAA,CACjC0O,EAAKuJ,QAAU,OAAO,WAAIvJ,EAAKwJ,YAAc,IAAItX,KAAK8N,EAAKwJ,aAAaC,iBAAmB,cAC1F,GAAApX,OATI2N,EAAKqJ,IAAG,KAAAhX,OAAI8W,WAgB9B/X,EAAAA,EAAAA,MAAA,OAAKC,UAAU,uCAAsCC,SAAA,EACnDF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CACVC,QAAQ,QACRjV,QAASA,IAAMuU,EAAe,WAAW3V,SAC1C,0BAGDC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CACVC,QAAQ,QACRjV,QAASA,IAAMuU,EAAe,eAAe3V,SAC9C,iCAIHF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,aAAYC,SAAA,EACzBC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CAACC,QAAQ,QAAQjV,QAASA,IAAMgD,EAAc+N,EAAmBtS,IAAIG,SAAC,oBAGlFC,EAAAA,EAAAA,KAACmW,EAAAA,EAAW,CAACC,QAAQ,UAAUjV,QAASsU,EAAiB1V,SAAC,uB,sFCriB1E,MAiGA,EAjGc7B,IAOP,IAPQ,OACb+Y,EAAM,QACNC,EAAO,MACP1W,EAAK,SACLT,EAAQ,KACRuE,EAAO,UAAS,UAChBxE,EAAY,IACb5B,EAuCC,OACE8B,EAAAA,EAAAA,KAACmY,EAAAA,EAAe,CAAApY,SACbkX,IACCpX,EAAAA,EAAAA,MAAC8V,EAAAA,EAAOC,IAAG,CACT9V,UAAU,0DACVmW,SApCiB,CACvB3E,OAAQ,CAAEC,QAAS,GACnBE,QAAS,CAAEF,QAAS,IAmCd2E,QAAQ,SACRL,QAAQ,UACRuC,KAAK,SACLjX,QAAS+V,EAAQnX,SAAA,EAGjBC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,0EAEfE,EAAAA,EAAAA,KAAC2V,EAAAA,EAAOC,IAAG,CACT9V,UAAS,mBAAAgB,OArDC,CAClBuX,MAAO,WACPC,QAAS,WACTC,MAAO,YACPC,OAAQ,aAiD0ClU,GAAK,KAAAxD,OAAIhB,GACnDmW,SA1CY,CACpB3E,OAAQ,CACNC,QAAS,EACTkH,MAAO,GACPjH,EAAG,IAELC,QAAS,CACPF,QAAS,EACTkH,MAAO,EACPjH,EAAG,EACHE,WAAY,CACV3Q,KAAM,SACN2X,QAAS,GACTC,UAAW,MAGfP,KAAM,CACJ7G,QAAS,EACTkH,MAAO,GACPjH,EAAG,GACHE,WAAY,CACVC,SAAU,MAsBNxQ,QAAUsD,GAAMA,EAAEmU,kBAAkB7Y,UAEpCF,EAAAA,EAAAA,MAAC4W,EAAAA,EAAS,CACRL,QAAQ,OACRM,QAAQ,OACRmC,OAAO,KACP/Y,UAAU,kBAAiBC,SAAA,CAE1BS,IACCX,EAAAA,EAAAA,MAAA,OAAKC,UAAU,6FAA4FC,SAAA,EACzGC,EAAAA,EAAAA,KAAA,MAAIF,UAAU,8GAA6GC,SACxHS,KAEHR,EAAAA,EAAAA,KAAA,UACEmB,QAAS+V,EACTpX,UAAU,+GAA8GC,UAExHC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,UAAUG,KAAK,OAAOC,OAAO,eAAeC,QAAQ,YAAWJ,UAC5EC,EAAAA,EAAAA,KAAA,QAAMI,cAAc,QAAQC,eAAe,QAAQC,YAAa,EAAGC,EAAE,iCAK7EP,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,SAC5BA,c","sources":["components/ai-suggestions/SuggestionCard.jsx","components/ai-suggestions/SuggestionsList.jsx","services/api/aiService.js","hooks/useAISuggestions.js","pages/SuggestionsPage.jsx","components/ui/Modal.jsx"],"sourcesContent":["import React from \"react\";\n\nconst SuggestionCard = ({\n  suggestion,\n  onViewDetails,\n  onDismiss,\n  onAdjustConfidence,\n  onRecordInteraction,\n}) => {\n  const getSuggestionTypeColor = (type) => {\n    switch (type) {\n      case \"buy\":\n        return \"bg-green-100 text-green-800 border-green-200\";\n      case \"sell\":\n        return \"bg-red-100 text-red-800 border-red-200\";\n      case \"hold\":\n        return \"bg-yellow-100 text-yellow-800 border-yellow-200\";\n      case \"diversify\":\n        return \"bg-blue-100 text-blue-800 border-blue-200\";\n      case \"rebalance\":\n        return \"bg-purple-100 text-purple-800 border-purple-200\";\n      default:\n        return \"bg-gray-100 text-gray-800 border-gray-200\";\n    }\n  };\n\n  const getConfidenceColor = (confidence) => {\n    if (confidence >= 80) return \"text-green-600\";\n    if (confidence >= 60) return \"text-yellow-600\";\n    return \"text-red-600\";\n  };\n\n  const confidenceValue = Number(suggestion.confidence ?? 0);\n  const priceChange = suggestion.marketContext?.changePercent;\n  const priceChangeClass =\n    priceChange >= 0\n      ? \"text-emerald-400\"\n      : priceChange <= -0.01\n        ? \"text-rose-400\"\n        : \"text-white/70\";\n\n  const handleConfidenceAdjust = (delta, interactionType) => {\n    if (!onAdjustConfidence) return;\n    const current = Number.isFinite(confidenceValue) ? confidenceValue : 0;\n    const next = Math.max(0, Math.min(100, current + delta));\n    onAdjustConfidence(suggestion.id, next, interactionType);\n  };\n\n  const handleRecordInteraction = (interactionType, payload = {}) => {\n    onRecordInteraction?.(suggestion.id, interactionType, payload);\n  };\n\n  return (\n    <div className=\"bg-white/10 backdrop-blur-md border border-white/10 rounded-2xl p-6 shadow-lg shadow-black/10 hover:border-white/20 transition-all\">\n      <div className=\"flex items-start justify-between mb-4\">\n        <div className=\"flex items-center\">\n          <div className=\"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center mr-3\">\n            <svg\n              className=\"w-5 h-5 text-blue-600\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n              />\n            </svg>\n          </div>\n          <div>\n            <h3 className=\"text-lg font-semibold text-gray-900\">\n              {suggestion.title ||\n                suggestion.company ||\n                suggestion.symbol ||\n                \"AI Suggestion\"}\n            </h3>\n            <p className=\"text-sm text-gray-500\">\n              AI Generated •{\" \"}\n              {new Date(suggestion.createdAt).toLocaleDateString()}\n            </p>\n          </div>\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          <span\n            className={`px-2 py-1 rounded-full text-xs font-medium border ${getSuggestionTypeColor(suggestion.type)}`}\n          >\n            {suggestion.type.toUpperCase()}\n          </span>\n          {Number.isFinite(suggestion.profileMatch) && (\n            <span className=\"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium border border-purple-200\">\n              Profile Match {suggestion.profileMatch}%\n            </span>\n          )}\n          <button\n            onClick={() => onDismiss(suggestion.id)}\n            className=\"text-gray-400 hover:text-gray-600\"\n          >\n            <svg\n              className=\"w-5 h-5\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M6 18L18 6M6 6l12 12\"\n              />\n            </svg>\n          </button>\n        </div>\n      </div>\n\n      <p className=\"text-gray-700 mb-4\">{suggestion.description}</p>\n\n      <div className=\"grid grid-cols-2 gap-4 mb-4\">\n        <div>\n          <p className=\"text-sm font-medium text-gray-600\">Confidence</p>\n          <p\n            className={`text-lg font-semibold ${getConfidenceColor(confidenceValue)}`}\n          >\n            {Number.isFinite(confidenceValue) ? confidenceValue : \"—\"}%\n          </p>\n          {suggestion.confidenceBreakdown && (\n            <div className=\"mt-2 space-y-1 text-xs text-gray-600\">\n              <p>\n                Profile fit:{\" \"}\n                {Math.round(suggestion.confidenceBreakdown.profileMatch || 0)}%\n              </p>\n              <p>\n                Market signal:{\" \"}\n                {Math.round(suggestion.confidenceBreakdown.marketSignal || 0)}%\n              </p>\n              <p>\n                News:{\" \"}\n                {Math.round(suggestion.confidenceBreakdown.newsScore || 0)}%\n              </p>\n            </div>\n          )}\n        </div>\n        <div>\n          <p className=\"text-sm font-medium text-gray-600\">Expected Impact</p>\n          <p className=\"text-lg font-semibold text-gray-900\">\n            {suggestion.expectedImpact || suggestion.expectedReturn || \"—\"}\n          </p>\n        </div>\n      </div>\n\n      {suggestion.symbol && (\n        <div className=\"mb-4 p-3 bg-white/5 border border-white/10 rounded-xl text-white\">\n          <div className=\"flex items-center justify-between\">\n            <div>\n              <p className=\"text-sm font-medium text-white\">\n                {suggestion.symbol}\n              </p>\n              <p className=\"text-sm text-white/70\">\n                {suggestion.company || suggestion.companyName}\n              </p>\n            </div>\n            <div className=\"text-right\">\n              {typeof suggestion.currentPrice === \"number\" && (\n                <p className=\"text-sm font-semibold text-white\">\n                  ${Number(suggestion.currentPrice).toFixed(2)}\n                </p>\n              )}\n              {typeof priceChange === \"number\" && (\n                <p className={`text-sm font-medium ${priceChangeClass}`}>\n                  {priceChange >= 0 ? \"+\" : \"\"}\n                  {priceChange?.toFixed(2)}%\n                </p>\n              )}\n            </div>\n          </div>\n          {suggestion.marketContext?.previousClose && (\n            <p className=\"mt-2 text-xs text-white/60\">\n              Prev close $\n              {Number(suggestion.marketContext.previousClose).toFixed(2)}\n            </p>\n          )}\n        </div>\n      )}\n\n      {suggestion.news?.summary && (\n        <div className=\"mb-4 p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl text-sm text-white/80\">\n          <p className=\"font-semibold text-white mb-1\">Market pulse</p>\n          <p>{suggestion.news.summary}</p>\n          {suggestion.news.sentimentLabel && (\n            <p className=\"mt-2 text-xs uppercase tracking-wide text-white/60\">\n              Sentiment: {suggestion.news.sentimentLabel}\n            </p>\n          )}\n        </div>\n      )}\n\n      <div className=\"flex items-center justify-between\">\n        <div className=\"flex items-center space-x-4\">\n          <button\n            onClick={() => onViewDetails(suggestion.id)}\n            className=\"text-blue-600 hover:text-blue-700 text-sm font-medium\"\n          >\n            View Details\n          </button>\n          <button\n            className=\"text-gray-300 hover:text-white text-sm font-medium\"\n            onClick={() => handleRecordInteraction(\"learn_more\")}\n          >\n            Learn More\n          </button>\n        </div>\n\n        <div className=\"flex items-center space-x-2\">\n          <button\n            className=\"px-3 py-1 text-xs font-medium text-white/80 bg-white/10 rounded-full hover:bg-white/20\"\n            onClick={() => handleConfidenceAdjust(-15, \"not_interested\")}\n          >\n            Not Interested\n          </button>\n          <button\n            className=\"px-3 py-1 text-xs font-medium text-white bg-blue-600 rounded-full hover:bg-blue-700\"\n            onClick={() => handleConfidenceAdjust(10, \"consider\")}\n          >\n            Consider\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default React.memo(SuggestionCard);\n","import React, { useMemo, useState } from \"react\";\nimport SuggestionCard from \"./SuggestionCard\";\nimport LoadingSpinner from \"../common/LoadingSpinner\";\n\nconst SuggestionsList = ({\n  suggestions,\n  loading,\n  error,\n  onDismiss,\n  onRefresh,\n  onViewDetails,\n  onAdjustConfidence,\n  onRecordInteraction,\n}) => {\n  const [filter, setFilter] = useState(\"all\");\n  const [sortBy, setSortBy] = useState(\"confidence\");\n\n  const filterOptions = [\n    { value: \"all\", label: \"All Suggestions\" },\n    { value: \"buy\", label: \"Buy Recommendations\" },\n    { value: \"sell\", label: \"Sell Recommendations\" },\n    { value: \"hold\", label: \"Hold Recommendations\" },\n    { value: \"diversify\", label: \"Diversification\" },\n    { value: \"rebalance\", label: \"Rebalancing\" },\n  ];\n\n  const sortOptions = [\n    { value: \"confidence\", label: \"Confidence\" },\n    { value: \"date\", label: \"Date\" },\n    { value: \"impact\", label: \"Expected Impact\" },\n  ];\n\n  const filteredSuggestions = useMemo(() => {\n    if (!Array.isArray(suggestions)) return [];\n    if (filter === \"all\") return suggestions;\n    return suggestions.filter((suggestion) => suggestion.type === filter);\n  }, [suggestions, filter]);\n\n  const sortedSuggestions = useMemo(() => {\n    const list = [...filteredSuggestions];\n    switch (sortBy) {\n      case \"confidence\":\n        return list.sort((a, b) => (b.confidence ?? 0) - (a.confidence ?? 0));\n      case \"date\":\n        return list.sort(\n          (a, b) =>\n            new Date(b.createdAt).getTime() - new Date(a.createdAt).getTime(),\n        );\n      case \"impact\":\n        return list.sort((a, b) => {\n          const impactA = (\n            a.expectedImpact ||\n            a.expectedReturn ||\n            \"\"\n          ).toString();\n          const impactB = (\n            b.expectedImpact ||\n            b.expectedReturn ||\n            \"\"\n          ).toString();\n          return impactB.localeCompare(impactA);\n        });\n      default:\n        return list;\n    }\n  }, [filteredSuggestions, sortBy]);\n\n  const handleViewDetails = (suggestionId) => {\n    if (typeof onViewDetails === \"function\") {\n      onViewDetails(suggestionId);\n    }\n  };\n\n  const handleDismiss = async (suggestionId) => {\n    if (typeof onDismiss === \"function\") {\n      await onDismiss(suggestionId);\n    }\n  };\n\n  if (loading) {\n    return <LoadingSpinner size=\"large\" />;\n  }\n\n  if (error) {\n    return (\n      <div className=\"max-w-4xl mx-auto py-10 text-center\">\n        <h2 className=\"text-xl font-semibold text-white mb-2\">\n          Unable to load AI suggestions\n        </h2>\n        <p className=\"text-white/70 mb-6\">{error}</p>\n        {onRefresh && (\n          <button\n            onClick={onRefresh}\n            className=\"inline-flex items-center px-4 py-2 rounded-lg bg-blue-600 text-white hover:bg-blue-500 transition-colors\"\n          >\n            Retry\n          </button>\n        )}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n      <div className=\"mb-8\">\n        <h1 className=\"text-3xl font-bold text-gray-900 mb-2\">\n          AI Investment Suggestions\n        </h1>\n        <p className=\"text-gray-600\">\n          Personalized recommendations based on your portfolio and market\n          analysis\n        </p>\n      </div>\n\n      {/* Filters and Sorting */}\n      <div className=\"bg-white rounded-lg shadow-sm border p-6 mb-8\">\n        <div className=\"flex flex-col md:flex-row md:items-center md:justify-between space-y-4 md:space-y-0\">\n          <div className=\"flex flex-wrap items-center space-x-4\">\n            <label className=\"text-sm font-medium text-gray-700\">\n              Filter by:\n            </label>\n            <select\n              value={filter}\n              onChange={(e) => setFilter(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              {filterOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </div>\n\n          <div className=\"flex flex-wrap items-center space-x-4\">\n            <label className=\"text-sm font-medium text-gray-700\">\n              Sort by:\n            </label>\n            <select\n              value={sortBy}\n              onChange={(e) => setSortBy(e.target.value)}\n              className=\"px-3 py-2 border border-gray-300 rounded-md text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500\"\n            >\n              {sortOptions.map((option) => (\n                <option key={option.value} value={option.value}>\n                  {option.label}\n                </option>\n              ))}\n            </select>\n          </div>\n        </div>\n      </div>\n\n      {/* Suggestions Count */}\n      <div className=\"mb-6\">\n        <p className=\"text-sm text-gray-600\">\n          Showing {sortedSuggestions.length} of {suggestions?.length || 0}{\" \"}\n          suggestions\n        </p>\n      </div>\n\n      {/* Suggestions Grid */}\n      {sortedSuggestions.length > 0 ? (\n        <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n          {sortedSuggestions.map((suggestion) => (\n            <SuggestionCard\n              key={suggestion.id}\n              suggestion={suggestion}\n              onViewDetails={handleViewDetails}\n              onDismiss={handleDismiss}\n              onAdjustConfidence={onAdjustConfidence}\n              onRecordInteraction={onRecordInteraction}\n            />\n          ))}\n        </div>\n      ) : (\n        <div className=\"text-center py-12\">\n          <div className=\"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-4\">\n            <svg\n              className=\"w-8 h-8 text-gray-400\"\n              fill=\"none\"\n              stroke=\"currentColor\"\n              viewBox=\"0 0 24 24\"\n            >\n              <path\n                strokeLinecap=\"round\"\n                strokeLinejoin=\"round\"\n                strokeWidth={2}\n                d=\"M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z\"\n              />\n            </svg>\n          </div>\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">\n            No suggestions available\n          </h3>\n          <p className=\"text-gray-600 mb-4\">\n            {filter === \"all\"\n              ? \"We're analyzing your portfolio and market conditions to generate personalized suggestions.\"\n              : `No ${filter} suggestions available at the moment.`}\n          </p>\n          {onRefresh && (\n            <button\n              onClick={onRefresh}\n              className=\"text-blue-600 hover:text-blue-700 font-medium\"\n            >\n              Refresh Suggestions\n            </button>\n          )}\n        </div>\n      )}\n\n      {/* Load More Button */}\n      {sortedSuggestions.length > 0 && (\n        <div className=\"text-center mt-8\">\n          <button\n            onClick={onRefresh}\n            className=\"px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500\"\n          >\n            Refresh Suggestions\n          </button>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default React.memo(SuggestionsList);\n","import axios from 'axios';\nimport { supabase } from '../supabase/config';\nimport { getSession } from './auth';\nimport { logError, logInfo } from '../../utils/logger';\nimport { API_CONFIG } from '../../utils/constants';\n\n// Cache configuration\nconst CACHE_TTL = {\n  SHORT: 5 * 60 * 1000, // 5 minutes\n  MEDIUM: 15 * 60 * 1000, // 15 minutes\n  LONG: 60 * 60 * 1000, // 1 hour\n};\n\n// Cache storage\nconst cache = new Map();\n\nconst deriveApiBaseUrl = () => {\n  const explicit = process.env.REACT_APP_API_BASE_URL;\n  if (explicit) {\n    return explicit.replace(/\\/$/, '');\n  }\n\n  const configured = API_CONFIG?.BASE_URL;\n  if (configured && configured !== 'https://api.investxlabs.com') {\n    return configured.replace(/\\/$/, '');\n  }\n\n  if (process.env.NODE_ENV === 'development') {\n    return 'http://localhost:5001/api';\n  }\n\n  return '/api';\n};\n\nconst API_BASE_URL = deriveApiBaseUrl();\n\nconst apiClient = axios.create({\n  baseURL: `${API_BASE_URL}/ai`,\n  timeout: API_CONFIG?.TIMEOUT || 10000,\n  headers: {\n    'Content-Type': 'application/json'\n  }\n});\n\n/**\n * Get cached data if available and not expired\n * @param {string} key - Cache key\n * @returns {any|null} Cached data or null if not found/expired\n */\nconst getCachedData = (key) => {\n  const cached = cache.get(key);\n  if (!cached) return null;\n  \n  const { data, timestamp, ttl } = cached;\n  if (Date.now() - timestamp > ttl) {\n    cache.delete(key);\n    return null;\n  }\n  \n  return data;\n};\n\n/**\n * Set data in cache\n * @param {string} key - Cache key\n * @param {any} data - Data to cache\n * @param {number} [ttl=CACHE_TTL.MEDIUM] - Time to live in ms\n */\nconst setCachedData = (key, data, ttl = CACHE_TTL.MEDIUM) => {\n  cache.set(key, {\n    data,\n    timestamp: Date.now(),\n    ttl\n  });\n};\n\n// Maximum retry attempts for API calls\nconst MAX_RETRIES = 3;\n\n// Base delay between retries (ms)\nconst RETRY_DELAY = 1000;\n\n/**\n * Get AI investment recommendations with retry logic\n * @param {Object} userProfile - User profile data\n * @param {Object} options - Additional options\n * @param {Object} userProfile - User profile data\n * @param {Object} [options] - Options\n * @param {boolean} [options.useCache=true] - Whether to use cache\n * @param {number} [options.cacheTtl=CACHE_TTL.MEDIUM] - Cache TTL in ms\n * @param {number} [options.retries=3] - Number of retry attempts\n * @returns {Promise<Object>} AI recommendations\n */\nconst getAIRecommendations = async (userProfile, options = {}) => {\n  const {\n    useCache = true,\n    cacheTtl = CACHE_TTL.MEDIUM\n  } = options;\n\n  const userId =\n    userProfile?.userId ||\n    userProfile?.id ||\n    userProfile?.user_id ||\n    getSession()?.user?.id ||\n    'anonymous';\n\n  const cacheKey = `ai:recommendations:${userId}`;\n\n  if (useCache) {\n    const cached = getCachedData(cacheKey);\n    if (cached) {\n      logInfo('Returning cached AI recommendations');\n      return { ...cached, _cached: true };\n    }\n  }\n\n  try {\n    logInfo(`Fetching AI recommendations via API for user: ${userId}`);\n\n    const response = await apiClient.post('/suggestions', {\n      userId,\n      profile: userProfile,\n      options: {\n        count: options.count || options.limit || 4\n      }\n    });\n\n    const payload = response.data?.data || {};\n    const suggestions = payload.suggestions || [];\n\n    const result = {\n      suggestions,\n      metadata: {\n        count: payload.count ?? suggestions.length,\n        timestamp: response.data?.timestamp,\n        message: response.data?.message || response.data?.status\n      }\n    };\n\n    if (useCache) {\n      setCachedData(cacheKey, result, cacheTtl);\n    }\n\n    return result;\n  } catch (error) {\n    logError('Error fetching AI recommendations:', error);\n\n    const cached = getCachedData(cacheKey);\n    if (cached) {\n      logInfo('Returning stale cached AI recommendations');\n      return { ...cached, _stale: true };\n    }\n\n    if (process.env.NODE_ENV !== 'production') {\n      logInfo('Using mock AI recommendations in development');\n      const mockSuggestions = [\n        {\n          id: 'rec1',\n          strategyId: 'mock_growth',\n          symbol: 'AAPL',\n          type: 'buy',\n          title: 'Apple Momentum',\n          confidence: 78,\n          explanation: {\n            headline: 'Sample explanation',\n            profileAlignment: 'Matches your growth interests.',\n            learningOpportunity: 'Teaches momentum tracking.'\n          }\n        },\n        {\n          id: 'rec2',\n          strategyId: 'mock_income',\n          symbol: 'VIG',\n          type: 'buy',\n          title: 'Dividend Steady',\n          confidence: 65\n        }\n      ];\n      return {\n        suggestions: mockSuggestions,\n        metadata: {\n          count: mockSuggestions.length,\n          _mock: true\n        }\n      };\n    }\n\n    throw error;\n  }\n};\n\n/**\n * Get explanation for a specific recommendation.\n * Tries backend endpoint first; falls back to Supabase RPC if backend unavailable.\n * @param {string} recommendationId - ID of the recommendation\n * @param {string} userId - ID of the user (default: 'anonymous')\n * @param {Object} options - Additional options\n * @param {boolean} options.useCache - Whether to use cache (default: true)\n * @param {number} options.retries - Number of retry attempts (default: MAX_RETRIES)\n * @returns {Promise<string|Object>} - Explanation payload or text\n */\nconst getRecommendationExplanation = async (recommendationId, userId = 'anonymous', options = {}) => {\n  const { \n    useCache = true, \n    cacheTtl = CACHE_TTL.MEDIUM\n  } = options;\n  \n  const cacheKey = `ai:explanation:${recommendationId}:${userId}`;\n  \n  if (useCache) {\n    const cached = getCachedData(cacheKey);\n    if (cached) {\n      logInfo(`Returning cached explanation for recommendation ${recommendationId}`);\n      return cached;\n    }\n  }\n  \n  // Attempt 1: Backend API\n  try {\n    const { data } = await apiClient.get(`/recommendations/${encodeURIComponent(recommendationId)}/explanation`, {\n      params: { userId }\n    });\n    const explanation = data?.data || data?.explanation || data;\n    if (useCache && explanation) {\n      setCachedData(cacheKey, explanation, cacheTtl);\n    }\n    return explanation;\n  } catch (backendErr) {\n    logError('Backend explanation fetch failed, falling back to Supabase RPC', backendErr);\n  }\n\n  // Attempt 2: Direct Supabase RPC fallback\n  try {\n    const { data, error } = await supabase\n      .rpc('get_recommendation_explanation', { \n        recommendation_id: recommendationId,\n        user_id: userId \n      });\n    \n    if (error) throw error;\n    const explanation = data?.explanation || data || 'No explanation available';\n    if (useCache) {\n      setCachedData(cacheKey, explanation, cacheTtl);\n    }\n    return explanation;\n  } catch (error) {\n    logError(`Error fetching explanation for recommendation ${recommendationId}:`, error);\n    const cached = getCachedData(cacheKey);\n    if (cached) {\n      logInfo(`Returning stale cached explanation for recommendation ${recommendationId}`);\n      return cached;\n    }\n    return 'Unable to load explanation at this time. Please try again later.';\n  }\n};\n\n/**\n * Get market insights and analysis using Supabase RPC\n * @param {Object} filters - Filters for market data\n * @param {string[]} filters.sectors - Sectors to include\n * @param {string} filters.timeframe - Timeframe for analysis (default: '1m')\n * @param {string} filters.region - Region filter (default: 'US')\n * @param {Object} options - Additional options\n * @param {boolean} options.useCache - Whether to use cache (default: true)\n * @param {number} options.retries - Number of retry attempts (default: MAX_RETRIES)\n * @returns {Promise<Object>} - Market insights\n */\nconst getMarketInsights = async (filters = {}, options = {}) => {\n  const { useCache = true, retries = MAX_RETRIES } = options;\n  const { \n    sectors = [], \n    timeframe = '1m',\n    region = 'US',\n    includeTechnical = true,\n    includeFundamental = true,\n    includeSentiment = true\n  } = filters;\n  \n  const cacheKey = `market:insights:${sectors.sort().join(',')}:${timeframe}:${region}`;\n  \n  // Return cached insights if available and cache is enabled\n  if (useCache) {\n    const cached = getCachedData(cacheKey);\n    if (cached) {\n      logInfo('Returning cached market insights');\n      return { ...cached, _cached: true };\n    }\n  }\n  \n  // Simple retry mechanism\n  const attempt = async (attemptsLeft = retries) => {\n    try {\n      logInfo('Fetching market insights with filters:', { \n        sectors, \n        timeframe, \n        region,\n        includeTechnical,\n        includeFundamental,\n        includeSentiment\n      });\n      \n      // Call the Supabase RPC function\n      const { data, error } = await supabase\n        .rpc('get_market_insights', {\n          p_sectors: sectors,\n          p_timeframe: timeframe,\n          p_region: region,\n          p_include_technical: includeTechnical,\n          p_include_fundamental: includeFundamental,\n          p_include_sentiment: includeSentiment\n        });\n      \n      if (error) throw error;\n      \n      // Cache the successful response\n      if (useCache && data) {\n        setCachedData(cacheKey, data, CACHE_TTL.SHORT);\n      }\n      \n      return data;\n    } catch (error) {\n      logError('Error fetching market insights:', error);\n      \n      // If we have retries left, wait and try again\n      if (attemptsLeft > 0) {\n        const delay = RETRY_DELAY * (retries - attemptsLeft + 1);\n        logInfo(`Retrying market insights fetch in ${delay}ms... (${attemptsLeft} attempts left)`);\n        await new Promise(resolve => setTimeout(resolve, delay));\n        return attempt(attemptsLeft - 1);\n      }\n      \n      // Return cached insights if available, even if stale\n      const cached = getCachedData(cacheKey);\n      if (cached) {\n        logInfo('Returning stale cached market insights');\n        return { ...cached, _stale: true };\n      }\n      \n      // In development, return mock data if API fails\n      if (process.env.NODE_ENV !== 'production') {\n        logInfo('Using mock market insights in development');\n        return {\n          technical: {\n            rsi: 62.4,\n            macd: 1.23,\n            bollinger: {\n              upper: 152.34,\n              middle: 148.76,\n              lower: 145.18\n            }\n          },\n          fundamental: {\n            peRatio: 28.5,\n            dividendYield: 0.6,\n            marketCap: 2500000000000,\n            beta: 1.2\n          },\n          sentiment: {\n            score: 0.75,\n            positive: 65,\n            neutral: 25,\n            negative: 10,\n            sources: ['news', 'social', 'analysts']\n          },\n          _mock: true\n        };\n      }\n      \n      // In production, rethrow the error to be handled by the caller\n      throw error;\n    }\n  };\n  \n  return attempt();\n};\n\n/**\n * Submit feedback on AI recommendations using Supabase RPC\n * @param {string} recommendationId - ID of the recommendation\n * @param {Object} feedback - Feedback data\n * @param {string} feedback.rating - User rating (e.g., 'helpful', 'not_helpful')\n * @param {string} [feedback.comment] - Optional comment\n * @param {string} [feedback.userId] - Optional user ID (will use current session if not provided)\n * @param {Object} options - Additional options\n * @param {number} options.retries - Number of retry attempts (default: MAX_RETRIES)\n * @returns {Promise<Object>} - Confirmation of feedback submission\n */\nconst submitFeedback = async (recommendationId, feedback, options = {}) => {\n  const userId = feedback.userId || getSession()?.user?.id || 'anonymous';\n  \n  try {\n    logInfo(`Submitting feedback for recommendation ${recommendationId}`);\n    \n    // Call the Supabase RPC function\n    const { data, error } = await supabase\n      .rpc('submit_recommendation_feedback', {\n        recommendation_id: recommendationId,\n        user_id: userId,\n        rating: feedback.rating,\n        comment: feedback.comment || null,\n        metadata: {\n          user_agent: typeof window !== 'undefined' ? window.navigator?.userAgent : 'server',\n          timestamp: new Date().toISOString()\n        }\n      });\n    \n    if (error) throw error;\n    \n    logInfo(`Successfully submitted feedback for recommendation ${recommendationId}`);\n    return data;\n  } catch (error) {\n    logError(`Error submitting feedback for recommendation ${recommendationId}:`, error);\n    \n    // In development, simulate a successful response\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Using mock feedback submission in development');\n      return {\n        success: true,\n        feedbackId: `feedback-${Date.now()}`,\n        _mock: true\n      };\n    }\n    \n    throw error;\n  }\n};\n\n/**\n * Track AI recommendation interaction using Supabase RPC\n * @param {string} recommendationId - ID of the recommendation\n * @param {string} interactionType - Type of interaction (e.g., 'view', 'click', 'dismiss')\n * @param {Object} [metadata] - Additional metadata about the interaction\n * @returns {Promise<Object>} - Confirmation of interaction tracking\n */\nconst trackRecommendationInteraction = async (recommendationId, interactionType, metadata = {}) => {\n  try {\n    if (metadata?.logId) {\n      await apiClient.post(`/suggestions/${metadata.logId}/interactions`, {\n        userId: metadata.userId || getSession()?.user?.id,\n        interactionType,\n        payload: {\n          recommendationId,\n          ...metadata\n        }\n      });\n      logInfo(`Tracked ${interactionType} interaction for recommendation ${recommendationId}`);\n      return { success: true };\n    }\n\n    logInfo('Interaction logged without backend persistence (missing logId)', {\n      recommendationId,\n      interactionType\n    });\n    return { success: false, reason: 'logId missing' };\n  } catch (error) {\n    // Log the error but don't throw - we don't want to break the UI for tracking\n    logError('Error tracking recommendation interaction:', error);\n    return { success: false, error: error.message };\n  }\n};\n\nconst updateSuggestionConfidenceScore = async ({ logId, confidence, userId }) => {\n  try {\n    const payload = {\n      confidence,\n      userId: userId || getSession()?.user?.id\n    };\n\n    const response = await apiClient.patch(`/suggestions/${logId}/confidence`, payload);\n    return response.data?.data?.log;\n  } catch (error) {\n    logError('Error updating suggestion confidence:', error);\n    throw error;\n  }\n};\n\nconst logSuggestionInteraction = async ({ logId, interactionType, userId, payload = {} }) => {\n  try {\n    const response = await apiClient.post(`/suggestions/${logId}/interactions`, {\n      userId: userId || getSession()?.user?.id,\n      interactionType,\n      payload\n    });\n    return response.data?.data?.log;\n  } catch (error) {\n    logError('Error logging suggestion interaction:', error);\n    throw error;\n  }\n};\n\nconst fetchSuggestionLogs = async ({ userId, limit = 25 }) => {\n  try {\n    const response = await apiClient.get(`/suggestions/logs/${userId}`, {\n      params: { limit }\n    });\n    return response.data?.data?.logs || [];\n  } catch (error) {\n    logError('Error fetching suggestion logs:', error);\n    throw error;\n  }\n};\n\n/**\n * Test connection to the AI service\n * @returns {Promise<Object>} Service status\n */\nconst testConnection = async () => {\n  try {\n    // Test Supabase connection by calling the health check RPC\n    const { data, error } = await supabase\n      .rpc('get_ai_health')\n      .single();\n    \n    if (error) throw error;\n    \n    return { \n      success: true, \n      data: {\n        ...data,\n        supabase_connected: true\n      } \n    };\n  } catch (error) {\n    logError('AI Service connection test failed', error);\n    \n    // In development, return a mock success response\n    if (process.env.NODE_ENV !== 'production') {\n      console.warn('Using mock AI service connection in development');\n      return { \n        success: true, \n        data: { \n          status: 'ok', \n          version: '1.0.0',\n          services: {\n            database: true,\n            cache: true,\n            models: ['recommendation', 'sentiment', 'forecasting']\n          },\n          supabase_connected: true,\n          _mock: true\n        } \n      };\n    }\n    \n    return { \n      success: false, \n      error: error.message || 'Failed to connect to AI service',\n      _error: true\n    };\n  }\n};\n\nexport {\n  getAIRecommendations,\n  getRecommendationExplanation,\n  getMarketInsights,\n  submitFeedback,\n  trackRecommendationInteraction,\n  updateSuggestionConfidenceScore,\n  logSuggestionInteraction,\n  fetchSuggestionLogs,\n  testConnection\n};","import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { useAuth } from '../hooks/useAuth';\nimport { useApp } from '../contexts/AppContext';\nimport {\n  getAIRecommendations,\n  logSuggestionInteraction,\n  submitFeedback,\n  trackRecommendationInteraction,\n  updateSuggestionConfidenceScore\n} from '../services/api/aiService';\n\nconst mapSuggestion = (suggestion, index = 0) => {\n  if (!suggestion) return null;\n\n  return {\n    id: suggestion.id || suggestion.recommendation_id || `suggestion-${index}`,\n    logId: suggestion.logId || suggestion.log_id || suggestion.metadata?.logId || null,\n    type: suggestion.type || suggestion.action || suggestion.category || 'insight',\n    symbol: suggestion.symbol || suggestion.ticker || suggestion.asset_symbol,\n    company: suggestion.company || suggestion.asset_name || suggestion.title || 'Suggested Asset',\n    companyName: suggestion.company || suggestion.asset_name || suggestion.title || 'Suggested Asset',\n    confidence: Number(suggestion.confidence || suggestion.confidence_score || 0),\n    confidenceBreakdown: suggestion.confidenceBreakdown || suggestion.metadata?.confidenceBreakdown || null,\n    profileMatch: suggestion.profileMatch ?? suggestion.profile_match ?? null,\n    reason: suggestion.reason || suggestion.summary || 'AI generated insight',\n    reasoning: suggestion.reason || suggestion.summary || suggestion.explanation?.profileAlignment || '',\n    description: suggestion.description || suggestion.details || suggestion.analysis || '',\n    expectedReturn: suggestion.expected_return || suggestion.projected_return || '—',\n    riskLevel: suggestion.risk_level || suggestion.riskLevel || 'Moderate',\n    timeframe: suggestion.timeframe || suggestion.horizon || 'Medium term',\n    allocation: suggestion.allocation || suggestion.recommended_allocation || '—',\n    category: suggestion.category || suggestion.segment || 'general',\n    aiReasoning: suggestion.ai_reasoning || suggestion.explanation || suggestion.analysis || '',\n    pros: suggestion.pros || suggestion.advantages || [],\n    cons: suggestion.cons || suggestion.risks || [],\n    createdAt: suggestion.created_at || suggestion.createdAt || new Date().toISOString(),\n    marketContext: suggestion.marketContext || suggestion.market_context || null,\n    currentPrice: suggestion.currentPrice ?? suggestion.marketContext?.currentPrice ?? null,\n    priceChange: suggestion.priceChange ?? suggestion.marketContext?.changePercent ?? null,\n    news: suggestion.news || {},\n    explanation: suggestion.explanation || suggestion.aiReasoning || suggestion.ai_reasoning || null,\n    metadata: suggestion.metadata || {},\n  };\n};\n\nconst normalizeSuggestions = (payload) => {\n  if (!payload) return [];\n\n  let rawItems = [];\n\n  if (Array.isArray(payload)) {\n    rawItems = payload;\n  } else if (Array.isArray(payload?.suggestions)) {\n    rawItems = payload.suggestions;\n  } else if (Array.isArray(payload?.recommendations)) {\n    rawItems = payload.recommendations;\n  } else if (Array.isArray(payload?.stocks)) {\n    rawItems = payload.stocks;\n  }\n\n  return rawItems\n    .map(mapSuggestion)\n    .filter(Boolean);\n};\n\nexport const useAISuggestions = () => {\n  const { currentUser } = useAuth();\n  const userId = currentUser?.id;\n  const userProfile = useMemo(() => currentUser?.profile || {}, [currentUser]);\n  const { queueToast } = useApp();\n\n  const [suggestions, setSuggestions] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState(null);\n  const [explanations, setExplanations] = useState({});\n\n  const buildProfilePayload = useCallback(() => {\n    if (!userId) return null;\n\n    return {\n      userId,\n      email: currentUser?.email,\n      full_name: userProfile?.full_name || currentUser?.user_metadata?.full_name,\n      riskTolerance: userProfile?.risk_tolerance || userProfile?.riskTolerance,\n      investmentGoals: userProfile?.investment_goals || userProfile?.investmentGoals || [],\n      investmentExperience: userProfile?.investment_experience || userProfile?.investmentExperience,\n      interests: userProfile?.interests || [],\n      virtual_portfolio_value: userProfile?.virtual_portfolio_value || 0,\n      metadata: userProfile?.metadata || {}\n    };\n  }, [currentUser, userId, userProfile]);\n\n  const loadSuggestions = useCallback(async () => {\n    if (!userId) {\n      setSuggestions([]);\n      return;\n    }\n\n    const profilePayload = buildProfilePayload();\n    if (!profilePayload) return;\n\n    setLoading(true);\n    setError(null);\n\n    try {\n      const data = await getAIRecommendations(profilePayload, { useCache: true });\n      const normalized = normalizeSuggestions(data);\n      setSuggestions(normalized);\n      if (normalized.length) {\n        const explanationMap = normalized.reduce((acc, item) => {\n          if (item.explanation) {\n            acc[item.id] = item.explanation;\n          }\n          return acc;\n        }, {});\n        if (Object.keys(explanationMap).length) {\n          setExplanations((prev) => ({ ...prev, ...explanationMap }));\n        }\n      }\n      if (!normalized.length) {\n        queueToast('🤖 No AI suggestions available yet. Add portfolio data to receive insights.', 'info');\n      }\n    } catch (err) {\n      console.error('Error loading AI suggestions:', err);\n      setError(err.message || 'Unable to load AI suggestions.');\n      queueToast(err.message || 'Failed to load AI suggestions.', 'error');\n    } finally {\n      setLoading(false);\n    }\n  }, [buildProfilePayload, queueToast, userId]);\n\n  useEffect(() => {\n    loadSuggestions();\n  }, [loadSuggestions]);\n\n  const refresh = useCallback(() => {\n    return loadSuggestions();\n  }, [loadSuggestions]);\n\n  const dismissSuggestion = useCallback(\n    async (suggestionId) => {\n      if (!suggestionId) return;\n\n      const target = suggestions.find((item) => item.id === suggestionId);\n      setSuggestions((prev) => prev.filter((item) => item.id !== suggestionId));\n\n      try {\n        if (target?.logId) {\n          await logSuggestionInteraction({\n            logId: target.logId,\n            interactionType: 'dismiss',\n            userId,\n            payload: { suggestionId }\n          });\n        } else {\n          await trackRecommendationInteraction(suggestionId, 'dismiss');\n        }\n      } catch (err) {\n        console.debug?.('useAISuggestions dismiss fallback', err);\n      }\n\n      queueToast('🗑️ Suggestion dismissed.', 'info');\n    },\n    [queueToast, suggestions, userId]\n  );\n\n  const viewSuggestion = useCallback(\n    async (suggestionId) => {\n      if (!suggestionId) return;\n      const target = suggestions.find((item) => item.id === suggestionId);\n      try {\n        if (target?.logId) {\n          await logSuggestionInteraction({\n            logId: target.logId,\n            interactionType: 'view',\n            userId,\n            payload: { suggestionId }\n          });\n        } else {\n          await trackRecommendationInteraction(suggestionId, 'view');\n        }\n      } catch (err) {\n        console.debug?.('useAISuggestions view fallback', err);\n      }\n    },\n    [suggestions, userId]\n  );\n\n  const recordInteraction = useCallback(\n    async (suggestionId, interactionType, payload = {}) => {\n      if (!suggestionId || !interactionType) return;\n      const target = suggestions.find((item) => item.id === suggestionId);\n      if (!target?.logId) return;\n      try {\n        await logSuggestionInteraction({\n          logId: target.logId,\n          interactionType,\n          userId,\n          payload: {\n            suggestionId,\n            ...payload\n          }\n        });\n      } catch (error) {\n        console.debug?.('useAISuggestions interaction fallback', error);\n      }\n    },\n    [suggestions, userId]\n  );\n\n  const updateConfidence = useCallback(\n    async (suggestionId, confidence) => {\n      if (!suggestionId || confidence === undefined) return { success: false };\n      const target = suggestions.find((item) => item.id === suggestionId);\n      if (!target?.logId) {\n        queueToast('Unable to update confidence right now. Please try again later.', 'warning');\n        return { success: false };\n      }\n\n      const safeConfidence = Math.max(0, Math.min(100, Number(confidence)));\n\n      try {\n        await updateSuggestionConfidenceScore({\n          logId: target.logId,\n          confidence: safeConfidence,\n          userId\n        });\n\n        setSuggestions((prev) =>\n          prev.map((item) =>\n            item.id === suggestionId ? { ...item, confidence: safeConfidence } : item\n          )\n        );\n        queueToast('Confidence updated for this suggestion.', 'success');\n        return { success: true };\n      } catch (error) {\n        queueToast(error.message || 'Unable to update confidence.', 'error');\n        return { success: false, error };\n      }\n    },\n    [queueToast, suggestions, userId]\n  );\n\n  const recordFeedback = useCallback(\n    async (suggestionId, rating, comment) => {\n      if (!suggestionId || !rating) return;\n      try {\n        await submitFeedback(suggestionId, { rating, comment, userId });\n        queueToast('Thanks for your feedback!', 'success');\n        await recordInteraction(suggestionId, 'feedback', { rating, comment });\n      } catch (err) {\n        console.error('Error submitting feedback:', err);\n        queueToast(err.message || 'Unable to submit feedback.', 'error');\n      }\n    },\n    [queueToast, recordInteraction, userId]\n  );\n\n  const getExplanation = useCallback(\n    async (suggestionId) => {\n      if (explanations[suggestionId]) {\n        return explanations[suggestionId];\n      }\n      const suggestion = suggestions.find((item) => item.id === suggestionId);\n      if (!suggestion) {\n        throw new Error('Suggestion not found.');\n      }\n      const explanation = suggestion.explanation || suggestion.reason || 'AI explanation unavailable.';\n      setExplanations((prev) => ({ ...prev, [suggestionId]: explanation }));\n      return explanation;\n    },\n    [explanations, suggestions]\n  );\n\n  return {\n    suggestions,\n    loading,\n    error,\n    refresh,\n    dismissSuggestion,\n    viewSuggestion,\n    updateConfidence,\n    getExplanation,\n    recordFeedback,\n    recordInteraction,\n  };\n};\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { motion } from 'framer-motion';\nimport { Link } from 'react-router-dom';\nimport GlassCard from '../components/ui/GlassCard';\nimport GlassButton from '../components/ui/GlassButton';\nimport Modal from '../components/ui/Modal';\nimport SuggestionsList from '../components/ai-suggestions/SuggestionsList';\nimport LoadingSpinner from '../components/common/LoadingSpinner';\nimport { useAISuggestions } from '../hooks/useAISuggestions';\nimport { getMarketInsights } from '../services/api/aiService';\n\nconst fadeIn = {\n  hidden: { opacity: 0, y: 16 },\n  visible: { opacity: 1, y: 0, transition: { duration: 0.6, ease: 'easeOut' } },\n};\n\nconst staggerChildren = {\n  visible: {\n    transition: {\n      staggerChildren: 0.1,\n    },\n  },\n};\n\nconst SuggestionsPage = () => {\n  const {\n    suggestions,\n    loading,\n    error,\n    refresh,\n    dismissSuggestion,\n    viewSuggestion,\n    getExplanation,\n    recordFeedback,\n    updateConfidence,\n    recordInteraction,\n  } = useAISuggestions();\n\n  const [selectedSuggestion, setSelectedSuggestion] = useState(null);\n  const [explanation, setExplanation] = useState(null);\n  const [isExplanationLoading, setIsExplanationLoading] = useState(false);\n\n  const [marketInsights, setMarketInsights] = useState([]);\n  const [marketInsightsLoading, setMarketInsightsLoading] = useState(false);\n  const [marketInsightsError, setMarketInsightsError] = useState(null);\n\n  const averageConfidence = useMemo(() => {\n    if (!suggestions.length) return null;\n    const total = suggestions.reduce(\n      (sum, suggestion) => sum + (Number(suggestion.confidence) || 0),\n      0\n    );\n    return Math.round(total / suggestions.length);\n  }, [suggestions]);\n\n  const confidenceLabel = useMemo(() => {\n    if (averageConfidence === null) return 'Waiting for data';\n    if (averageConfidence >= 80) return 'High Confidence';\n    if (averageConfidence >= 60) return 'Moderate Confidence';\n    return 'Developing Confidence';\n  }, [averageConfidence]);\n\n  const confidenceWidth = averageConfidence !== null\n    ? `${Math.min(Math.max(averageConfidence, 0), 100)}%`\n    : '0%';\n\n  const selectedMarketStats = useMemo(() => {\n    if (!selectedSuggestion?.marketContext) return null;\n    const { currentPrice, changePercent, previousClose, marketSignal } = selectedSuggestion.marketContext;\n    const formatValue = (value, digits = 2) => {\n      const numeric = Number(value);\n      return Number.isFinite(numeric) ? numeric.toFixed(digits) : '—';\n    };\n\n    return {\n      currentPrice: formatValue(currentPrice),\n      changePercent: formatValue(changePercent),\n      previousClose: formatValue(previousClose),\n      marketSignal: Number.isFinite(Number(marketSignal)) ? Math.round(Number(marketSignal)) : null,\n      changeIsPositive: Number(changePercent) >= 0\n    };\n  }, [selectedSuggestion?.marketContext]);\n\n  useEffect(() => {\n    let isMounted = true;\n    const loadInsights = async () => {\n      setMarketInsightsLoading(true);\n      setMarketInsightsError(null);\n      try {\n        const data = await getMarketInsights({}, { useCache: true });\n        if (!isMounted) return;\n\n        const normalize = (payload) => {\n          if (!payload) return [];\n          if (Array.isArray(payload)) return payload;\n          if (Array.isArray(payload?.insights)) return payload.insights;\n          return Object.entries(payload).map(([key, value]) => ({\n            title: key.replace(/_/g, ' ').replace(/\\b\\w/g, (c) => c.toUpperCase()),\n            description:\n              typeof value === 'string'\n                ? value\n                : JSON.stringify(value, null, 2),\n            impact: 'Medium',\n            icon: '📈',\n          }));\n        };\n\n        const normalized = normalize(data)\n          .map((insight) => ({\n            title: insight.title || 'AI Insight',\n            description:\n              insight.description ||\n              insight.summary ||\n              'Additional context unavailable.',\n            impact:\n              insight.impact ||\n              (insight.score\n                ? insight.score > 0.6\n                  ? 'High'\n                  : insight.score > 0.3\n                  ? 'Medium'\n                  : 'Low'\n                : 'Medium'),\n            icon: insight.icon || '🤖',\n          }))\n          .slice(0, 6);\n\n        setMarketInsights(normalized);\n      } catch (err) {\n        if (!isMounted) return;\n        setMarketInsightsError(err.message || 'Unable to load AI market insights.');\n      } finally {\n        if (isMounted) {\n          setMarketInsightsLoading(false);\n        }\n      }\n    };\n\n    loadInsights();\n\n    return () => {\n      isMounted = false;\n    };\n  }, []);\n\n  const handleOpenSuggestion = async (suggestionId) => {\n    const suggestion = suggestions.find((item) => item.id === suggestionId);\n    if (!suggestion) return;\n\n    setSelectedSuggestion(suggestion);\n    setExplanation(null);\n    setIsExplanationLoading(true);\n\n    try {\n      await viewSuggestion(suggestionId);\n      await recordInteraction(suggestionId, 'open_details');\n      const result = await getExplanation(suggestionId);\n      setExplanation(result || 'AI explanation not available yet.');\n    } catch (err) {\n      setExplanation(err.message || 'Unable to load AI explanation.');\n    } finally {\n      setIsExplanationLoading(false);\n    }\n  };\n\n  const handleDismiss = async (suggestionId) => {\n    await dismissSuggestion(suggestionId);\n    if (selectedSuggestion?.id === suggestionId) {\n      setSelectedSuggestion(null);\n      setExplanation(null);\n    }\n  };\n\n  const handleCloseModal = () => {\n    setSelectedSuggestion(null);\n    setExplanation(null);\n  };\n\n  const handleFeedback = async (rating) => {\n    if (!selectedSuggestion) return;\n    await recordFeedback(selectedSuggestion.id, rating);\n  };\n\n  const handleConfidenceChange = async (suggestionId, nextConfidence, interactionType) => {\n    if (!suggestionId || nextConfidence === undefined) return;\n    const result = await updateConfidence(suggestionId, nextConfidence);\n    if (result?.success && interactionType) {\n      await recordInteraction(suggestionId, interactionType, { nextConfidence });\n    }\n  };\n\n  return (\n    <div className=\"relative min-h-screen bg-gradient-to-b from-gray-950 via-gray-900 to-gray-950 text-white overflow-hidden\">\n      <motion.div\n        className=\"absolute -top-32 -left-32 w-96 h-96 bg-gradient-to-r from-purple-500/30 to-blue-500/20 rounded-full blur-3xl\"\n        animate={{ y: [0, 20, 0], x: [0, 10, 0] }}\n        transition={{ repeat: Infinity, duration: 15, ease: 'easeInOut' }}\n      />\n      <motion.div\n        className=\"absolute -bottom-40 -right-32 w-[28rem] h-[28rem] bg-gradient-to-r from-orange-400/25 to-pink-400/15 rounded-full blur-3xl\"\n        animate={{ y: [0, -25, 0], x: [0, -15, 0] }}\n        transition={{ repeat: Infinity, duration: 20, ease: 'easeInOut' }}\n      />\n      <motion.div\n        className=\"absolute top-1/3 left-1/4 w-64 h-64 bg-gradient-to-r from-green-400/20 to-emerald-400/15 rounded-full blur-3xl\"\n        animate={{ y: [0, 15, 0], x: [0, 20, 0] }}\n        transition={{ repeat: Infinity, duration: 18, ease: 'easeInOut', delay: 5 }}\n      />\n\n      <main className=\"relative z-10 w-full max-w-[1920px] mx-auto px-3 lg:px-4 xl:px-6 py-4 lg:py-6\">\n        <motion.div\n          variants={fadeIn}\n          initial=\"hidden\"\n          animate=\"visible\"\n          className=\"mb-4 lg:mb-6\"\n        >\n          <div className=\"flex flex-col md:flex-row md:items-center md:justify-between\">\n            <div>\n              <h1 className=\"text-3xl md:text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-purple-300 via-blue-300 to-orange-300 mb-2\">\n                AI Investment Advisor 🤖\n              </h1>\n              <p className=\"text-gray-300 text-base lg:text-lg\">\n                Personalized recommendations powered by your Supabase portfolio data\n              </p>\n            </div>\n            <div className=\"mt-4 md:mt-0 flex space-x-3\">\n              <GlassButton variant=\"glass\" size=\"default\" as={Link} to=\"/portfolio\">\n                💼 Review Portfolio\n              </GlassButton>\n              <GlassButton variant=\"primary\" size=\"default\" onClick={refresh} disabled={loading}>\n                {loading ? 'Refreshing…' : '🔄 Refresh Analysis'}\n              </GlassButton>\n            </div>\n          </div>\n        </motion.div>\n\n        <motion.div variants={fadeIn} initial=\"hidden\" animate=\"visible\" className=\"mb-4 lg:mb-6\">\n          <GlassCard variant=\"accent\" padding=\"large\" glow>\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-6\">\n              <div>\n                <h3 className=\"text-xl font-semibold text-white mb-2\">AI Confidence Score</h3>\n                <p className=\"text-white/80\">\n                  Confidence calculated from live portfolio metrics and recent market trends.\n                </p>\n              </div>\n              <div className=\"text-right\">\n                <div className=\"text-4xl font-bold text-green-400 mb-1\">\n                  {averageConfidence !== null ? `${averageConfidence}%` : '—'}\n                </div>\n                <div className=\"text-sm text-green-300\">{confidenceLabel}</div>\n              </div>\n            </div>\n            <div className=\"mt-4 w-full bg-white/20 rounded-full h-3 overflow-hidden\">\n              <div\n                className=\"bg-gradient-to-r from-green-400 to-emerald-500 h-3 rounded-full transition-all duration-700\"\n                style={{ width: confidenceWidth }}\n              />\n            </div>\n          </GlassCard>\n        </motion.div>\n\n        <div className=\"grid grid-cols-1 lg:grid-cols-4 gap-8\">\n          <div className=\"lg:col-span-3 space-y-8\">\n            <SuggestionsList\n              suggestions={suggestions}\n              loading={loading}\n              error={error}\n              onDismiss={handleDismiss}\n              onRefresh={refresh}\n              onViewDetails={handleOpenSuggestion}\n              onAdjustConfidence={handleConfidenceChange}\n              onRecordInteraction={recordInteraction}\n            />\n          </div>\n\n          <div className=\"space-y-8\">\n            <motion.div variants={fadeIn} initial=\"hidden\" animate=\"visible\">\n              <GlassCard variant=\"floating\" padding=\"large\" interactive>\n                <div className=\"flex items-center justify-between mb-4\">\n                  <h3 className=\"text-xl font-semibold text-white\">AI Market Insights</h3>\n                  <span className=\"px-2 py-1 bg-green-500/30 text-green-300 text-xs rounded-full\">\n                    {marketInsightsLoading ? 'Loading' : 'Live'}\n                  </span>\n                </div>\n                {marketInsightsLoading && (\n                  <div className=\"flex justify-center py-6\">\n                    <LoadingSpinner size=\"small\" />\n                  </div>\n                )}\n                {!marketInsightsLoading && marketInsightsError && (\n                  <div className=\"text-sm text-red-300\">\n                    {marketInsightsError}\n                  </div>\n                )}\n                {!marketInsightsLoading && !marketInsightsError && (\n                  <div className=\"space-y-3\">\n                    {marketInsights.map((insight, index) => (\n                      <div key={index} className=\"p-3 bg-white/5 rounded-lg border border-white/10\">\n                        <div className=\"flex items-center justify-between mb-2\">\n                          <span className=\"text-lg\">{insight.icon}</span>\n                          <span\n                            className={`px-2 py-1 text-xs rounded-full ${\n                              insight.impact === 'High'\n                                ? 'bg-red-500/20 text-red-300'\n                                : insight.impact === 'Low'\n                                ? 'bg-green-500/20 text-green-300'\n                                : 'bg-yellow-500/20 text-yellow-300'\n                            }`}\n                          >\n                            {insight.impact}\n                          </span>\n                        </div>\n                        <h4 className=\"text-sm font-medium text-white mb-1\">{insight.title}</h4>\n                        <p className=\"text-xs text-white/70 whitespace-pre-line\">\n                          {insight.description}\n                        </p>\n                      </div>\n                    ))}\n                    {!marketInsights.length && (\n                      <p className=\"text-sm text-white/70\">\n                        Insights will appear once the AI completes an initial portfolio scan.\n                      </p>\n                    )}\n                  </div>\n                )}\n              </GlassCard>\n            </motion.div>\n\n            <motion.div variants={fadeIn} initial=\"hidden\" animate=\"visible\">\n              <GlassCard variant=\"accent\" padding=\"large\" glow>\n                <h3 className=\"text-xl font-semibold text-white mb-4\">Grow With AI</h3>\n                <div className=\"space-y-4\">\n                  <div>\n                    <div className=\"flex justify-between text-sm mb-2\">\n                      <span className=\"text-white/90\">Portfolio Coverage</span>\n                      <span className=\"text-white\">\n                        {suggestions.length ? `${Math.min(100, suggestions.length * 20)}%` : '—'}\n                      </span>\n                    </div>\n                    <div className=\"w-full bg-white/20 rounded-full h-2\">\n                      <div\n                        className=\"bg-gradient-to-r from-blue-400 to-purple-500 h-2 rounded-full\"\n                        style={{ width: suggestions.length ? `${Math.min(100, suggestions.length * 20)}%` : '0%' }}\n                      />\n                    </div>\n                  </div>\n                </div>\n                <GlassButton as={Link} to=\"/education\" variant=\"glass\" className=\"w-full mt-4\">\n                  📚 Explore Learning Paths\n                </GlassButton>\n              </GlassCard>\n            </motion.div>\n\n            <motion.div variants={fadeIn} initial=\"hidden\" animate=\"visible\">\n              <GlassCard variant=\"default\" padding=\"large\">\n                <h3 className=\"text-xl font-semibold text-white mb-6\">Quick Actions</h3>\n                <div className=\"space-y-3\">\n                  <GlassButton variant=\"glass\" className=\"w-full justify-start\" as={Link} to=\"/diagnostic\">\n                    <span className=\"mr-3\">🧠</span>\n                    Refresh Diagnostic Profile\n                  </GlassButton>\n                  <GlassButton variant=\"glass\" className=\"w-full justify-start\" as={Link} to=\"/simulation\">\n                    <span className=\"mr-3\">🎮</span>\n                    Practice In Simulation\n                  </GlassButton>\n                  <GlassButton variant=\"glass\" className=\"w-full justify-start\" as={Link} to=\"/portfolio\">\n                    <span className=\"mr-3\">💼</span>\n                    Adjust Portfolio\n                  </GlassButton>\n                  <GlassButton variant=\"glass\" className=\"w-full justify-start\" as={Link} to=\"/chat\">\n                    <span className=\"mr-3\">💬</span>\n                    Ask InvestX Assistant\n                  </GlassButton>\n                </div>\n              </GlassCard>\n            </motion.div>\n          </div>\n        </div>\n      </main>\n\n      <Modal\n        isOpen={Boolean(selectedSuggestion)}\n        onClose={handleCloseModal}\n        size=\"large\"\n        title={selectedSuggestion ? `${selectedSuggestion.symbol || selectedSuggestion.title} • AI Insight` : ''}\n      >\n        {selectedSuggestion && (\n          <div className=\"space-y-6\">\n            <div className=\"flex flex-col md:flex-row md:items-center md:justify-between gap-4\">\n              <div>\n                <p className=\"text-sm text-white/60 uppercase tracking-wide\">Recommendation Type</p>\n                <p className=\"text-lg font-semibold capitalize\">{selectedSuggestion.type}</p>\n              </div>\n              <div>\n                <p className=\"text-sm text-white/60 uppercase tracking-wide\">Confidence</p>\n                <p className=\"text-lg font-semibold text-green-300\">\n                  {Number(selectedSuggestion.confidence) || 0}%\n                </p>\n              </div>\n              <div>\n                <p className=\"text-sm text-white/60 uppercase tracking-wide\">Timeframe</p>\n                <p className=\"text-lg font-semibold\">\n                  {selectedSuggestion.timeframe || selectedSuggestion.horizon || 'Medium Term'}\n                </p>\n              </div>\n            </div>\n\n            <div>\n              <h4 className=\"text-sm font-semibold text-white/80 mb-2\">AI Explanation</h4>\n              <div className=\"bg-white/5 border border-white/10 rounded-xl p-4 min-h-[120px]\">\n                {isExplanationLoading ? (\n                  <div className=\"flex justify-center py-6\">\n                    <LoadingSpinner size=\"small\" />\n                  </div>\n                ) : (\n                  <>\n                    {explanation && typeof explanation === 'object' ? (\n                      <div className=\"space-y-3 text-sm text-white/80\">\n                        {explanation.headline && (\n                          <p className=\"text-base font-semibold text-white\">\n                            {explanation.headline}\n                          </p>\n                        )}\n                        {explanation.profileAlignment && (\n                          <p>\n                            <span className=\"font-medium text-white/90\">Profile match:</span>{' '}\n                            {explanation.profileAlignment}\n                          </p>\n                        )}\n                        {explanation.knowledgeBaseSummary && (\n                          <p>\n                            <span className=\"font-medium text-white/90\">Strategy insight:</span>{' '}\n                            {explanation.knowledgeBaseSummary}\n                          </p>\n                        )}\n                        {explanation.learningOpportunity && (\n                          <p>\n                            <span className=\"font-medium text-white/90\">Learning focus:</span>{' '}\n                            {explanation.learningOpportunity}\n                          </p>\n                        )}\n                        {explanation.marketContext && (\n                          <p>\n                            <span className=\"font-medium text-white/90\">Market context:</span>{' '}\n                            {explanation.marketContext}\n                          </p>\n                        )}\n                        {explanation.newsInsight && (\n                          <div className=\"bg-white/5 border border-white/10 rounded-lg p-3 text-sm\">\n                            <p className=\"font-medium text-white\">\n                              Latest news • {explanation.newsSentimentLabel || 'neutral'}\n                            </p>\n                            <p className=\"text-white/70 mt-1\">\n                              {explanation.newsInsight}\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    ) : (\n                      <p className=\"text-sm leading-relaxed whitespace-pre-line text-white/80\">\n                        {explanation || 'AI explanation not available yet.'}\n                      </p>\n                    )}\n                  </>\n                )}\n              </div>\n            </div>\n\n            {selectedMarketStats && (\n              <div className=\"bg-white/5 border border-white/10 rounded-xl p-4\">\n                <h4 className=\"text-sm font-semibold text-white/80 mb-2\">Live Market Context</h4>\n                <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 text-sm text-white/80\">\n                  <div>\n                    <p className=\"text-xs uppercase tracking-wide text-white/50\">Current Price</p>\n                    <p className=\"text-base font-semibold text-white\">${selectedMarketStats.currentPrice}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-xs uppercase tracking-wide text-white/50\">Change</p>\n                    <p className={`text-base font-semibold ${selectedMarketStats.changeIsPositive ? 'text-emerald-300' : 'text-rose-300'}`}>\n                      {selectedMarketStats.changeIsPositive ? '+' : ''}\n                      {selectedMarketStats.changePercent}%\n                    </p>\n                  </div>\n                  <div>\n                    <p className=\"text-xs uppercase tracking-wide text-white/50\">Previous Close</p>\n                    <p className=\"text-base font-semibold text-white\">${selectedMarketStats.previousClose}</p>\n                  </div>\n                  <div>\n                    <p className=\"text-xs uppercase tracking-wide text-white/50\">Signal Score</p>\n                    <p className=\"text-base font-semibold text-white\">\n                      {selectedMarketStats.marketSignal ?? '—'} / 100\n                    </p>\n                  </div>\n                </div>\n              </div>\n            )}\n\n            <div>\n              <h4 className=\"text-sm font-semibold text-white/80 mb-2\">AI Suggested Actions</h4>\n              <ul className=\"list-disc list-inside text-sm text-white/70 space-y-1\">\n                {(selectedSuggestion.pros || []).map((pro, index) => (\n                  <li key={`pro-${index}`}>✅ {pro}</li>\n                ))}\n                {(selectedSuggestion.cons || []).map((con, index) => (\n                  <li key={`con-${index}`}>⚠️ {con}</li>\n                ))}\n                {!selectedSuggestion.pros?.length && !selectedSuggestion.cons?.length && (\n                  <li>AI is still compiling trade-offs for this recommendation.</li>\n                )}\n              </ul>\n            </div>\n\n            {Array.isArray(selectedSuggestion.news?.items) && selectedSuggestion.news.items.length > 0 && (\n              <div>\n                <h4 className=\"text-sm font-semibold text-white/80 mb-2\">Recent Headlines</h4>\n                <div className=\"space-y-3\">\n                  {selectedSuggestion.news.items.slice(0, 3).map((item, idx) => (\n                    <a\n                      key={`${item.url}-${idx}`}\n                      href={item.url}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      className=\"block bg-white/5 border border-white/10 rounded-lg p-3 hover:border-white/20 transition-colors\"\n                    >\n                      <p className=\"text-sm font-semibold text-white mb-1\">{item.headline}</p>\n                      <p className=\"text-xs text-white/60\">\n                        {item.source || 'News'} • {item.publishedAt ? new Date(item.publishedAt).toLocaleString() : 'recent'}\n                      </p>\n                    </a>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <div className=\"flex flex-wrap justify-between gap-3\">\n              <div className=\"flex gap-2\">\n                <GlassButton\n                  variant=\"ghost\"\n                  onClick={() => handleFeedback('helpful')}\n                >\n                  👍 Helpful\n                </GlassButton>\n                <GlassButton\n                  variant=\"ghost\"\n                  onClick={() => handleFeedback('not_helpful')}\n                >\n                  👎 Not Helpful\n                </GlassButton>\n              </div>\n              <div className=\"flex gap-2\">\n                <GlassButton variant=\"glass\" onClick={() => handleDismiss(selectedSuggestion.id)}>\n                  ❌ Dismiss\n                </GlassButton>\n                <GlassButton variant=\"primary\" onClick={handleCloseModal}>\n                  Done\n                </GlassButton>\n              </div>\n            </div>\n          </div>\n        )}\n      </Modal>\n    </div>\n  );\n};\n\nexport default SuggestionsPage;\n","import React from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport GlassCard from './GlassCard';\n\nconst Modal = ({ \n  isOpen, \n  onClose, \n  title, \n  children, \n  size = 'default',\n  className = '' \n}) => {\n  const sizeClasses = {\n    small: 'max-w-md',\n    default: 'max-w-lg',\n    large: 'max-w-2xl',\n    xlarge: 'max-w-4xl'\n  };\n\n  const backdropVariants = {\n    hidden: { opacity: 0 },\n    visible: { opacity: 1 }\n  };\n\n  const modalVariants = {\n    hidden: { \n      opacity: 0, \n      scale: 0.8,\n      y: 50\n    },\n    visible: { \n      opacity: 1, \n      scale: 1,\n      y: 0,\n      transition: {\n        type: \"spring\",\n        damping: 25,\n        stiffness: 300\n      }\n    },\n    exit: {\n      opacity: 0,\n      scale: 0.8,\n      y: 50,\n      transition: {\n        duration: 0.2\n      }\n    }\n  };\n  \n  return (\n    <AnimatePresence>\n      {isOpen && (\n        <motion.div \n          className=\"fixed inset-0 z-50 flex items-center justify-center p-4\"\n          variants={backdropVariants}\n          initial=\"hidden\"\n          animate=\"visible\"\n          exit=\"hidden\"\n          onClick={onClose}\n        >\n          {/* Enhanced Glass Backdrop */}\n          <div className=\"absolute inset-0 bg-black/60 backdrop-blur-2xl backdrop-saturate-150\" />\n          \n          <motion.div\n            className={`relative w-full ${sizeClasses[size]} ${className}`}\n            variants={modalVariants}\n            onClick={(e) => e.stopPropagation()}\n          >\n            <GlassCard \n              variant=\"hero\" \n              padding=\"none\" \n              shadow=\"xl\"\n              className=\"overflow-hidden\"\n            >\n              {title && (\n                <div className=\"flex items-center justify-between p-6 border-b border-white/10 bg-white/5 backdrop-blur-xl\">\n                  <h2 className=\"text-xl font-semibold text-white bg-gradient-to-r from-blue-300 to-purple-300 bg-clip-text text-transparent\">\n                    {title}\n                  </h2>\n                  <button\n                    onClick={onClose}\n                    className=\"p-2 rounded-xl text-white/70 hover:text-white hover:bg-white/10 transition-all duration-200 backdrop-blur-lg\"\n                  >\n                    <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                    </svg>\n                  </button>\n                </div>\n              )}\n              <div className=\"p-6 text-white\">\n                {children}\n              </div>\n            </GlassCard>\n          </motion.div>\n        </motion.div>\n      )}\n    </AnimatePresence>\n  );\n};\n\nexport default Modal;\n"],"names":["SuggestionCard","_ref","_suggestion$confidenc","_suggestion$marketCon","_suggestion$marketCon2","_suggestion$news","suggestion","onViewDetails","onDismiss","onAdjustConfidence","onRecordInteraction","confidenceValue","Number","confidence","priceChange","marketContext","changePercent","priceChangeClass","handleConfidenceAdjust","delta","interactionType","current","isFinite","next","Math","max","min","id","_jsxs","className","children","_jsx","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","title","company","symbol","Date","createdAt","toLocaleDateString","concat","type","getSuggestionTypeColor","toUpperCase","profileMatch","onClick","description","confidenceBreakdown","round","marketSignal","newsScore","expectedImpact","expectedReturn","companyName","currentPrice","toFixed","previousClose","news","summary","sentimentLabel","payload","arguments","length","undefined","handleRecordInteraction","React","SuggestionsList","suggestions","loading","error","onRefresh","filter","setFilter","useState","sortBy","setSortBy","filteredSuggestions","useMemo","Array","isArray","sortedSuggestions","list","sort","a","b","_b$confidence","_a$confidence","getTime","impactA","toString","localeCompare","handleViewDetails","suggestionId","handleDismiss","async","LoadingSpinner","size","value","onChange","e","target","label","map","option","CACHE_TTL","SHORT","MEDIUM","LONG","cache","Map","API_BASE_URL","deriveApiBaseUrl","explicit","process","REACT_APP_API_BASE_URL","replace","configured","API_CONFIG","BASE_URL","apiClient","axios","create","baseURL","timeout","TIMEOUT","headers","getCachedData","key","cached","get","data","timestamp","ttl","now","delete","setCachedData","set","MAX_RETRIES","trackRecommendationInteraction","recommendationId","metadata","_getSession3","_getSession3$user","logId","post","userId","getSession","user","_objectSpread","logInfo","success","reason","logError","message","logSuggestionInteraction","_ref2","_getSession5","_getSession5$user","_response$data6","_response$data6$data","log","mapSuggestion","_suggestion$metadata","_suggestion$metadata2","_suggestion$profileMa","_suggestion$explanati","_suggestion$currentPr","_ref3","_suggestion$priceChan","index","recommendation_id","log_id","action","category","ticker","asset_symbol","asset_name","confidence_score","profile_match","reasoning","explanation","profileAlignment","details","analysis","expected_return","projected_return","riskLevel","risk_level","timeframe","horizon","allocation","recommended_allocation","segment","aiReasoning","ai_reasoning","pros","advantages","cons","risks","created_at","toISOString","market_context","useAISuggestions","currentUser","useAuth","userProfile","profile","queueToast","useApp","setSuggestions","setLoading","setError","explanations","setExplanations","buildProfilePayload","useCallback","_currentUser$user_met","email","full_name","user_metadata","riskTolerance","risk_tolerance","investmentGoals","investment_goals","investmentExperience","investment_experience","interests","virtual_portfolio_value","loadSuggestions","profilePayload","_getSession","_getSession$user","options","useCache","cacheTtl","user_id","cacheKey","_cached","_response$data","_payload$count","_response$data2","_response$data3","_response$data4","response","count","limit","result","status","_stale","getAIRecommendations","normalized","rawItems","recommendations","stocks","Boolean","normalizeSuggestions","explanationMap","reduce","acc","item","Object","keys","prev","err","console","useEffect","refresh","dismissSuggestion","find","_console$debug","_console","debug","call","viewSuggestion","_console$debug2","_console2","recordInteraction","_console$debug3","_console3","updateConfidence","safeConfidence","_getSession4","_getSession4$user","_response$data5","_response$data5$data","patch","updateSuggestionConfidenceScore","recordFeedback","rating","comment","feedback","_getSession2","_getSession2$user","_window$navigator","supabase","rpc","user_agent","window","navigator","userAgent","submitFeedback","getExplanation","Error","fadeIn","hidden","opacity","y","visible","transition","duration","ease","SuggestionsPage","_selectedMarketStats$","_selectedSuggestion$p","_selectedSuggestion$c","_selectedSuggestion$n","selectedSuggestion","setSelectedSuggestion","setExplanation","isExplanationLoading","setIsExplanationLoading","marketInsights","setMarketInsights","marketInsightsLoading","setMarketInsightsLoading","marketInsightsError","setMarketInsightsError","averageConfidence","total","sum","confidenceLabel","confidenceWidth","selectedMarketStats","formatValue","digits","numeric","changeIsPositive","isMounted","filters","retries","sectors","region","includeTechnical","includeFundamental","includeSentiment","join","attempt","attemptsLeft","p_sectors","p_timeframe","p_region","p_include_technical","p_include_fundamental","p_include_sentiment","delay","Promise","resolve","setTimeout","getMarketInsights","insights","entries","c","JSON","stringify","impact","icon","normalize","insight","score","slice","loadInsights","handleCloseModal","handleFeedback","motion","div","animate","x","repeat","Infinity","variants","initial","GlassButton","variant","as","Link","to","disabled","GlassCard","padding","glow","style","width","nextConfidence","interactive","Modal","isOpen","onClose","_Fragment","headline","knowledgeBaseSummary","learningOpportunity","newsInsight","newsSentimentLabel","pro","con","items","idx","href","url","rel","source","publishedAt","toLocaleString","AnimatePresence","exit","small","default","large","xlarge","scale","damping","stiffness","stopPropagation","shadow"],"sourceRoot":""}