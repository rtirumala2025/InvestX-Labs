"use strict";(self.webpackChunkinvestx_labs=self.webpackChunkinvestx_labs||[]).push([[592],{2592:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u});var i=a(7405),l=a(8878),s=a(8883),r=a(3909),n=a(1879),o=a(7811),d=a(2486),c=a(7616),m=a(782);const x={hidden:{opacity:0,y:16},visible:{opacity:1,y:0,transition:{duration:.6,ease:"easeOut"}}},u=()=>{var e,t;const{currentUser:a,updateProfile:u,loading:h}=(0,o.A)(),{queueToast:p}=(0,d.nm)(),v=(null===a||void 0===a?void 0:a.profile)||{},f=(0,l.useMemo)(()=>{var e,t,a;return{xp:null!==(e=v.xp)&&void 0!==e?e:0,netWorth:null!==(t=v.net_worth)&&void 0!==t?t:0,achievements:null!==(a=v.achievements_count)&&void 0!==a?a:0,lastUpdated:v.updated_at?new Date(v.updated_at):null}},[v]),[b,g]=(0,l.useState)({name:"",email:"",bio:"",profileImagePath:""}),[w,j]=(0,l.useState)(!1),[y,N]=(0,l.useState)(null),[k,A]=(0,l.useState)(""),P=(0,l.useRef)(null);(0,l.useEffect)(()=>{g({name:v.full_name||"",email:(null===a||void 0===a?void 0:a.email)||"",bio:v.bio||"",profileImagePath:v.profile_image||v.avatar_url||""}),A(v.profile_image_url||""),N(null)},[null===a||void 0===a?void 0:a.email,v]);const _=e=>{const{name:t,value:a}=e.target;g(e=>(0,i.A)((0,i.A)({},e),{},{[t]:a}))};return(0,m.jsxs)("div",{className:"relative min-h-screen bg-gradient-to-b from-gray-950 via-gray-900 to-gray-950 text-white overflow-hidden",children:[(0,m.jsx)(s.P.div,{className:"absolute -top-24 -left-28 w-80 h-80 bg-gradient-to-r from-sky-500/35 to-purple-500/25 rounded-full blur-3xl",animate:{y:[0,20,0],x:[0,12,0]},transition:{repeat:1/0,duration:18,ease:"easeInOut"}}),(0,m.jsx)(s.P.div,{className:"absolute -bottom-40 -right-32 w-[26rem] h-[26rem] bg-gradient-to-r from-emerald-400/25 to-teal-400/15 rounded-full blur-3xl",animate:{y:[0,-18,0],x:[0,-16,0]},transition:{repeat:1/0,duration:22,ease:"easeInOut",delay:6}}),(0,m.jsxs)("main",{className:"relative z-10 w-full max-w-6xl mx-auto px-3 lg:px-8 py-6 lg:py-10",children:[(0,m.jsx)(s.P.div,{variants:x,initial:"hidden",animate:"visible",className:"mb-6",children:(0,m.jsx)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:(0,m.jsxs)("div",{children:[(0,m.jsx)("p",{className:"text-xs uppercase tracking-[0.35em] text-white/60 mb-2",children:"Account"}),(0,m.jsx)("h1",{className:"text-3xl md:text-4xl font-bold tracking-tight bg-clip-text text-transparent bg-gradient-to-r from-blue-200 via-purple-200 to-emerald-200",children:"\ud83d\udc64 Profile & Preferences"}),(0,m.jsx)("p",{className:"text-sm md:text-base text-white/65 mt-2",children:"Manage your InvestX Labs identity, update contact details, and keep your account information current."})]})})}),(0,m.jsxs)(s.P.div,{variants:x,initial:"hidden",animate:"visible",className:"grid grid-cols-1 lg:grid-cols-3 gap-4 lg:gap-6",children:[(0,m.jsx)("div",{className:"lg:col-span-2 space-y-4",children:(0,m.jsxs)(r.A,{variant:"hero",padding:"large",shadow:"xl",children:[(0,m.jsxs)("div",{className:"flex items-center gap-4 mb-6",children:[(0,m.jsx)("div",{className:"h-16 w-16 rounded-2xl bg-white/10 flex items-center justify-center text-2xl",children:b.name?b.name.charAt(0).toUpperCase():(null===a||void 0===a||null===(e=a.email)||void 0===e?void 0:e.charAt(0).toUpperCase())||"U"}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h2",{className:"text-2xl font-semibold text-white",children:b.name||"Investor"}),(0,m.jsx)("p",{className:"text-sm text-white/60",children:b.email||"Email not set"})]})]}),(0,m.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),j(!0);try{let e=b.profileImagePath;if(y){const{path:t,url:i}=await(0,c.F)(a.id,y);e=t,A(i),p("Profile image uploaded.","success")}const{success:t,error:l}=await u({full_name:b.name,email:b.email,bio:b.bio,profile_image:e,avatar_url:e});if(!t)throw new Error(l||"Unable to update profile.");g(t=>(0,i.A)((0,i.A)({},t),{},{profileImagePath:e})),N(null),p("Profile updated successfully.","success")}catch(t){p(t.message,"error")}finally{j(!1)}},className:"space-y-5",children:[(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"name",className:"text-sm font-medium text-white/70 mb-1 block",children:"Full Name"}),(0,m.jsx)("input",{id:"name",name:"name",type:"text",value:b.name,onChange:_,className:"w-full rounded-xl border border-white/10 bg-white/10 px-4 py-3 text-white placeholder-white/40 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30",placeholder:"Your full name"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"email",className:"text-sm font-medium text-white/70 mb-1 block",children:"Email Address"}),(0,m.jsx)("input",{id:"email",name:"email",type:"email",value:b.email,onChange:_,className:"w-full rounded-xl border border-white/10 bg-white/10 px-4 py-3 text-white placeholder-white/40 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30",placeholder:"name@example.com"})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{htmlFor:"bio",className:"text-sm font-medium text-white/70 mb-1 block",children:"Bio"}),(0,m.jsx)("textarea",{id:"bio",name:"bio",value:b.bio,onChange:_,rows:4,className:"w-full rounded-xl border border-white/10 bg-white/10 px-4 py-3 text-white placeholder-white/40 focus:border-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500/30",placeholder:"Share a short mission statement or investing goal."})]}),(0,m.jsxs)("div",{children:[(0,m.jsx)("label",{className:"text-sm font-medium text-white/70 mb-1 block",children:"Profile Avatar"}),(0,m.jsxs)("div",{className:"flex items-center gap-4",children:[(0,m.jsx)("div",{className:"relative",children:(0,m.jsx)("div",{className:"h-20 w-20 rounded-2xl border border-white/10 bg-white/10 overflow-hidden flex items-center justify-center text-xl text-white/70",children:k?(0,m.jsx)("img",{src:k,alt:"Profile preview",className:"h-full w-full object-cover"}):(0,m.jsx)("span",{children:b.name?b.name.charAt(0).toUpperCase():(null===a||void 0===a||null===(t=a.email)||void 0===t?void 0:t.charAt(0).toUpperCase())||"U"})})}),(0,m.jsxs)("div",{className:"space-y-2",children:[(0,m.jsx)("input",{ref:P,type:"file",accept:"image/png,image/jpeg,image/gif,image/webp",className:"hidden",onChange:e=>{var t;const a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(!a)return;if(!a.type.startsWith("image/"))return void p("Please select a valid image file.","error");if(a.size>5242880)return void p("Avatar must be smaller than 5MB.","error");N(a);const i=new FileReader;i.onload=e=>{var t;A((null===(t=e.target)||void 0===t?void 0:t.result)||"")},i.readAsDataURL(a)}}),(0,m.jsx)(n.A,{type:"button",variant:"glass",onClick:()=>{var e;return null===(e=P.current)||void 0===e?void 0:e.click()},disabled:w,children:y?"Replace Avatar":"Upload Avatar"}),y&&(0,m.jsxs)("p",{className:"text-xs text-white/50",children:["Selected: ",y.name]}),!y&&k&&(0,m.jsx)("p",{className:"text-xs text-white/50",children:"Current avatar in use"})]})]}),(0,m.jsx)("p",{className:"mt-2 text-xs text-white/40",children:"PNG, JPG, GIF, or WEBP up to 5MB. Your image is stored securely in Supabase Storage."})]}),(0,m.jsxs)("div",{className:"flex items-center justify-end gap-3 pt-2",children:[(0,m.jsx)(n.A,{type:"button",variant:"glass",onClick:()=>g({name:v.full_name||"",email:(null===a||void 0===a?void 0:a.email)||"",bio:v.bio||"",profileImagePath:v.profile_image||v.avatar_url||""}),disabled:w,children:"Reset"}),k&&(0,m.jsx)(n.A,{type:"button",variant:"glass",onClick:()=>{N(null),A(v.profile_image_url||""),P.current&&(P.current.value="")},disabled:w,children:"Revert Avatar"}),(0,m.jsx)(n.A,{type:"submit",variant:"primary",disabled:w||h,children:w?"Saving\u2026":"Save Changes"})]})]})]})}),(0,m.jsxs)("div",{className:"space-y-4",children:[(0,m.jsxs)(r.A,{variant:"floating",padding:"large",children:[(0,m.jsx)("h3",{className:"text-xl font-semibold text-white mb-4",children:"Profile Stats"}),(0,m.jsxs)("div",{className:"space-y-3",children:[(0,m.jsxs)("div",{className:"p-4 rounded-xl border border-white/10 bg-white/5",children:[(0,m.jsx)("p",{className:"text-xs text-white/50 uppercase tracking-[0.3em]",children:"Total XP"}),(0,m.jsx)("p",{className:"mt-2 text-2xl font-semibold text-white",children:f.xp.toLocaleString()})]}),(0,m.jsxs)("div",{className:"p-4 rounded-xl border border-white/10 bg-white/5",children:[(0,m.jsx)("p",{className:"text-xs text-white/50 uppercase tracking-[0.3em]",children:"Net Worth"}),(0,m.jsx)("p",{className:"mt-2 text-xl font-semibold text-white",children:f.netWorth.toLocaleString(void 0,{style:"currency",currency:"USD"})})]}),(0,m.jsxs)("div",{className:"p-4 rounded-xl border border-white/10 bg-white/5",children:[(0,m.jsx)("p",{className:"text-xs text-white/50 uppercase tracking-[0.3em]",children:"Achievements"}),(0,m.jsx)("p",{className:"mt-2 text-xl font-semibold text-white",children:f.achievements})]}),f.lastUpdated?(0,m.jsxs)("p",{className:"text-xs text-white/40",children:["Updated ",f.lastUpdated.toLocaleString()]}):null]})]}),(0,m.jsxs)(r.A,{variant:"default",padding:"large",children:[(0,m.jsx)("h3",{className:"text-xl font-semibold text-white mb-3",children:"Security Tips"}),(0,m.jsxs)("ul",{className:"space-y-2 text-sm text-white/70",children:[(0,m.jsx)("li",{children:"\u2022 Use a unique password for your InvestX Labs account."}),(0,m.jsx)("li",{children:"\u2022 Keep your email up to date for important notifications."}),(0,m.jsx)("li",{children:"\u2022 Enable multi-factor authentication from your account settings once available."})]})]})]})]})]})]})}}}]);